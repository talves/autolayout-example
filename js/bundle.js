!function t(e,n,i){function r(o,a){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var h=n[o]={exports:{}};e[o][0].call(h.exports,function(t){var n=e[o][1][t];return r(n?n:t)},h,h.exports,t,e,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e,n){(function(i){!function(t){if("object"==typeof n&&"undefined"!=typeof e)e.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof i?i:"undefined"!=typeof self?self:this,r.AutoLayout=t()}}(function(){return function e(n,i,r){function s(a,u){if(!i[a]){if(!n[a]){var l="function"==typeof t&&t;if(!u&&l)return l(a,!0);if(o)return o(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[a]={exports:{}};n[a][0].call(c.exports,function(t){var e=n[a][1][t];return s(e?e:t)},c,c.exports,e,n,i,r)}return i[a].exports}for(var o="function"==typeof t&&t,a=0;a<r.length;a++)s(r[a]);return s}({1:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){t.equalSpacerIndex=t.equalSpacerIndex||1;var n="_~"+t.lineIndex+":"+t.equalSpacerIndex+"~";t.equalSpacerIndex>1&&t.constraints.push({view1:"_~"+t.lineIndex+":1~",attr1:t.horizontal?g.WIDTH:g.HEIGHT,relation:t.relation.relation||_.EQU,view2:n,attr2:t.horizontal?g.WIDTH:g.HEIGHT,priority:t.relation.priority}),t.equalSpacerIndex++,t.relation.view||t.relation.multiplier&&1!==t.relation.multiplier?(t.constraints.push({view1:n,attr1:t.horizontal?g.WIDTH:g.HEIGHT,relation:t.relation.relation||_.EQU,view2:t.relation.view,attr2:t.horizontal?g.WIDTH:g.HEIGHT,priority:t.relation.priority,multiplier:t.relation.multiplier}),t.relation.multiplier=void 0):t.relation.constant&&(t.constraints.push({view1:n,attr1:t.horizontal?g.WIDTH:g.HEIGHT,relation:_.EQU,view2:null,attr2:g.CONST,priority:t.relation.priority,constant:t.relation.constant}),t.relation.constant=void 0);for(var i=0;i<t.prevViews.length;i++){var r=t.prevViews[i];switch(t.orientation){case E.HORIZONTAL:t.prevAttr=r!==e?g.RIGHT:g.LEFT,t.curAttr=g.LEFT;break;case E.VERTICAL:t.prevAttr=r!==e?g.BOTTOM:g.TOP,t.curAttr=g.TOP;break;case E.ZINDEX:t.prevAttr=g.ZINDEX,t.curAttr=g.ZINDEX,t.relation.constant=r!==e?"default":0}t.constraints.push({view1:r,attr1:t.prevAttr,relation:t.relation.relation,view2:n,attr2:t.curAttr,priority:t.relation.priority})}t.prevViews=[n]}function s(t,e){t.proportionalSpacerIndex=t.proportionalSpacerIndex||1;var n="_-"+t.lineIndex+":"+t.proportionalSpacerIndex+"-";t.proportionalSpacerIndex++,t.constraints.push({view1:n,attr1:t.horizontal?g.WIDTH:g.HEIGHT,relation:t.relation.relation||_.EQU,view2:t.relation.view,attr2:t.horizontal?g.WIDTH:g.HEIGHT,priority:t.relation.priority,multiplier:t.relation.multiplier}),t.relation.multiplier=void 0;for(var i=0;i<t.prevViews.length;i++){var r=t.prevViews[i];switch(t.orientation){case E.HORIZONTAL:t.prevAttr=r!==e?g.RIGHT:g.LEFT,t.curAttr=g.LEFT;break;case E.VERTICAL:t.prevAttr=r!==e?g.BOTTOM:g.TOP,t.curAttr=g.TOP;break;case E.ZINDEX:t.prevAttr=g.ZINDEX,t.curAttr=g.ZINDEX,t.relation.constant=r!==e?"default":0}t.constraints.push({view1:r,attr1:t.prevAttr,relation:t.relation.relation,view2:n,attr2:t.curAttr,priority:t.relation.priority})}t.prevViews=[n]}function o(t,e,n){for(var i=void 0,r=1;4>=r;r*=2)if(n.orientations&r&&n.stack.orientation!==r&&!(n.stack.processedOrientations&r)){n.stack.processedOrientations=n.stack.processedOrientations|r,i=i||{name:e,type:"stack"};for(var s=0,o=n.stack.subViews.length;o>s;s++)r===E.ZINDEX?t.constraints.push({view1:i,attr1:g.ZINDEX,relation:_.EQU,view2:n.stack.subViews[s],attr2:g.ZINDEX}):(t.constraints.push({view1:i,attr1:r===E.VERTICAL?g.HEIGHT:g.WIDTH,relation:_.EQU,view2:n.stack.subViews[s],attr2:r===E.VERTICAL?g.HEIGHT:g.WIDTH}),t.constraints.push({view1:i,attr1:r===E.VERTICAL?g.TOP:g.LEFT,relation:_.EQU,view2:n.stack.subViews[s],attr2:r===E.VERTICAL?g.TOP:g.LEFT}))}}function a(t,e){if(e===!0&&(e=t.match(/\.\.\d+$/),e&&(t=t.substring(0,t.length-e[0].length),e=parseInt(e[0].substring(2)))),!e)return[t];var n,i=t.match(/\d+$/),r=[];if(i)for(t=t.substring(0,t.length-i[0].length),n=parseInt(i);e>=n;n++)r.push(t+n);else for(r.push(t),n=2;e>=n;n++)r.push(t+n);return r}function u(t,e,n){var i=n?n.view:null,l=[],h=[],c=void 0;i&&(e.push({view:i}),h.push(i));for(var f=0;f<e.length;f++){var p=e[f];if(!Array.isArray(p)&&p.hasOwnProperty("view")||Array.isArray(p)&&p[0].view&&!p[0].relation)for(var d=Array.isArray(p)?p:[p],m=0;m<d.length;m++){p=d[m];for(var _=","===p?[]:p.view?a(p.view,p.range):[null],v=0;v<_.length;v++){var y=_[v];if(h.push(y),y!==i&&(l.push(y),c=t.subViews[y],c||(c={orientations:0},t.subViews[y]=c),c.orientations=c.orientations|t.orientation,c.stack&&o(t,y,c)),void 0!==t.prevViews&&void 0!==y&&t.relation&&"none"!==t.relation.relation)for(var b=0;b<t.prevViews.length;b++){var w=t.prevViews[b];switch(t.orientation){case E.HORIZONTAL:t.prevAttr=w!==i?g.RIGHT:g.LEFT,t.curAttr=y!==i?g.LEFT:g.RIGHT;break;case E.VERTICAL:t.prevAttr=w!==i?g.BOTTOM:g.TOP,t.curAttr=y!==i?g.TOP:g.BOTTOM;break;case E.ZINDEX:t.prevAttr=g.ZINDEX,t.curAttr=g.ZINDEX,t.relation.constant=w!==i?"default":0}t.constraints.push({view1:w,attr1:t.prevAttr,relation:t.relation.relation,view2:y,attr2:t.curAttr,multiplier:t.relation.multiplier,constant:"default"!==t.relation.constant&&t.relation.constant?-t.relation.constant:t.relation.constant,priority:t.relation.priority})}var T=p.constraints;if(T)for(var C=0;C<T.length;C++)t.prevAttr=t.horizontal?g.WIDTH:g.HEIGHT,t.curAttr=T[C].view||T[C].multiplier?T[C].attribute||t.prevAttr:T[C].variable?g.VARIABLE:g.CONST,t.constraints.push({view1:y,attr1:t.prevAttr,relation:T[C].relation,view2:T[C].view,attr2:t.curAttr,multiplier:T[C].multiplier,constant:T[C].constant,priority:T[C].priority});p.cascade&&u(t,p.cascade,p)}}else","!==p&&(t.prevViews=h,h=[],t.relation=p[0],void 0!==t.prevViews&&(t.relation.equalSpacing&&r(t,i),t.relation.multiplier&&s(t,i)))}if(i){if(c=t.subViews[i]){if(c.stack){var S=new Error('A stack named "'+i+'" has already been created');throw S.column=n.$parserOffset+1,S}}else c={orientations:t.orientation},t.subViews[i]=c;c.stack={orientation:t.orientation,processedOrientations:t.orientation,subViews:l},o(t,i,c)}}function l(t,e){var n,n=new m.Variable({value:e});return this._solver.addConstraint(new m.StayConstraint(n,m.Strength.required,0)),n}function h(t){return t?t.name?(this._subViews[t.name]=this._subViews[t.name]||new C({name:t.name,solver:this._solver}),this._subViews[t.name]._type=this._subViews[t.name]._type||t.type,this._subViews[t.name]):(this._subViews[t]=this._subViews[t]||new C({name:t,solver:this._solver}),this._subViews[t]):this._parentSubView}function c(t){var e=4;if(t.view1||"left"!==t.attr1)if(t.view1||"top"!==t.attr1)if(t.view2||"right"!==t.attr2)if(t.view2||"bottom"!==t.attr2)switch(t.attr1){case"left":case"right":case"centerX":case"leading":case"trailing":e=4;break;case"zIndex":e=6;break;default:e=5}else e=2;else e=1;else e=0;else e=3;return this._spacingVars=this._spacingVars||new Array(7),this._spacingExpr=this._spacingExpr||new Array(7),this._spacingVars[e]||(this._spacingVars[e]=new m.Variable,this._solver.addEditVar(this._spacingVars[e]),this._spacingExpr[e]=m.minus(0,this._spacingVars[e]),this._solver.suggestValue(this._spacingVars[e],this._spacing[e])),this._spacingExpr[e]}function f(t){var e=void 0,n=void 0!==t.multiplier?t.multiplier:1,i=void 0!==t.constant?t.constant:0;"default"===i&&(i=c.call(this,t));var r,s=h.call(this,t.view1)._getAttr(t.attr1),o=void 0;t.attr2===g.CONST?o=l.call(this,void 0,t.constant):(o=h.call(this,t.view2)._getAttr(t.attr2),1!==n&&i?o=m.plus(m.times(o,n),i):i?o=m.plus(o,i):1!==n&&(o=m.times(o,n)));var r=void 0!==t.priority&&t.priority<1e3?new m.Strength("priority",0,t.priority,1e3):S;switch(t.relation){case _.EQU:e=new m.Equation(s,o,r);break;case _.GEQ:e=new m.Inequality(s,m.GEQ,o,r);break;case _.LEQ:e=new m.Inequality(s,m.LEQ,o,r);break;default:throw"Invalid relation specified: "+t.relation}this._solver.addConstraint(e)}function p(t,e){if(t===e)return!0;if(!t||!e)return!1;for(var n=0;7>n;n++)if(t[n]!==e[n])return!1;return!0}var d=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),m=t("cassowary/bin/c"),g={CONST:"const",NOTANATTRIBUTE:"const",VARIABLE:"var",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",WIDTH:"width",HEIGHT:"height",CENTERX:"centerX",CENTERY:"centerY",ZINDEX:"zIndex"},_={LEQ:"leq",EQU:"equ",GEQ:"geq"},v={REQUIRED:1e3,DEFAULTHIGH:750,DEFAULTLOW:250},y=function(){function t(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}function e(t,e,n,i,r,s){this.message=t,this.expected=e,this.found=n,this.offset=i,this.line=r,this.column=s,this.name="SyntaxError"}function n(t){function n(){return Nt}function i(e){function n(e,n,i){var r,s;for(r=n;i>r;r++)s=t.charAt(r),"\n"===s?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===s||"\u2028"===s||"\u2029"===s?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}return Vt!==e&&(Vt>e&&(Vt=0,Lt={line:1,column:1,seenCR:!1}),n(Lt,Vt,e),Vt=e),Lt}function r(t){Mt>It||(It>Mt&&(Mt=It,zt=[]),zt.push(t))}function s(n,r,s){function o(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}function a(t,e){function n(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0180-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1080-\uFFFF]/g,function(t){return"\\u"+e(t)})}var i,r,s,o=new Array(t.length);for(s=0;s<t.length;s++)o[s]=t[s].description;return i=t.length>1?o.slice(0,-1).join(", ")+" or "+o[t.length-1]:o[0],r=e?'"'+n(e)+'"':"end of input","Expected "+i+" but "+r+" found."}var u=i(s),l=s<t.length?t.charAt(s):null;return null!==r&&o(r),new e(null!==n?n:a(r,l),r,l,s,u.line,u.column)}function o(){var e,n,i,s,o,c,f,p;if(e=It,n=It,i=a(),i!==C?(58===t.charCodeAt(It)?(s=R,It++):(s=C,0===Dt&&r(I)),s!==C?(i=[i,s],n=i):(It=n,n=O)):(It=n,n=O),n===C&&(n=x),n!==C)if(i=It,s=u(),s!==C?(o=h(),o!==C?(s=[s,o],i=s):(It=i,i=O)):(It=i,i=O),i===C&&(i=x),i!==C)if(s=l(),s!==C){for(o=[],c=It,f=h(),f!==C?(p=l(),p!==C?(f=[f,p],c=f):(It=c,c=O)):(It=c,c=O);c!==C;)o.push(c),c=It,f=h(),f!==C?(p=l(),p!==C?(f=[f,p],c=f):(It=c,c=O)):(It=c,c=O);o!==C?(c=It,f=h(),f!==C?(p=u(),p!==C?(f=[f,p],c=f):(It=c,c=O)):(It=c,c=O),c===C&&(c=x),c!==C?(Nt=e,n=N(n,i,s,o,c),e=n):(It=e,e=O)):(It=e,e=O)}else It=e,e=O;else It=e,e=O;else It=e,e=O;return e}function a(){var e,n;return e=It,72===t.charCodeAt(It)?(n=V,It++):(n=C,0===Dt&&r(L)),n===C&&(86===t.charCodeAt(It)?(n=M,It++):(n=C,0===Dt&&r(z))),n!==C&&(Nt=e,n=D(n)),e=n}function u(){var e,n;return e=It,124===t.charCodeAt(It)?(n=P,It++):(n=C,0===Dt&&r(F)),n!==C&&(Nt=e,n=U()),e=n}function l(){var e,n,i,s,o;return e=It,91===t.charCodeAt(It)?(n=H,It++):(n=C,0===Dt&&r(k)),n!==C?(i=y(),i!==C?(s=p(),s===C&&(s=x),s!==C?(93===t.charCodeAt(It)?(o=G,It++):(o=C,0===Dt&&r(q)),o!==C?(Nt=e,n=j(i,s),e=n):(It=e,e=O)):(It=e,e=O)):(It=e,e=O)):(It=e,e=O),e}function h(){var e,n,i,s;return e=It,45===t.charCodeAt(It)?(n=W,It++):(n=C,0===Dt&&r(B)),n!==C?(i=c(),i!==C?(45===t.charCodeAt(It)?(s=W,It++):(s=C,0===Dt&&r(B)),s!==C?(Nt=e,n=Y(i),e=n):(It=e,e=O)):(It=e,e=O)):(It=e,e=O),e===C&&(e=It,45===t.charCodeAt(It)?(n=W,It++):(n=C,0===Dt&&r(B)),n!==C&&(Nt=e,n=Q()),e=n,e===C&&(e=It,n=X,n!==C&&(Nt=e,n=K()),e=n)),e}function c(){var t;return t=f(),t===C&&(t=p()),t}function f(){var t,e;return t=It,e=b(),e!==C&&(Nt=t,e=Z(e)),t=e}function p(){var e,n,i,s,o,a,u;if(e=It,40===t.charCodeAt(It)?(n=J,It++):(n=C,0===Dt&&r($)),n!==C)if(i=d(),i!==C){for(s=[],o=It,44===t.charCodeAt(It)?(a=tt,It++):(a=C,0===Dt&&r(et)),a!==C?(u=d(),u!==C?(a=[a,u],o=a):(It=o,o=O)):(It=o,o=O);o!==C;)s.push(o),o=It,44===t.charCodeAt(It)?(a=tt,It++):(a=C,0===Dt&&r(et)),a!==C?(u=d(),u!==C?(a=[a,u],o=a):(It=o,o=O)):(It=o,o=O);s!==C?(41===t.charCodeAt(It)?(o=nt,It++):(o=C,0===Dt&&r(it)),o!==C?(Nt=e,n=rt(i,s),e=n):(It=e,e=O)):(It=e,e=O)}else It=e,e=O;else It=e,e=O;return e}function d(){var e,n,i,s,o,a;return e=It,n=m(),n===C&&(n=x),n!==C?(i=g(),i!==C?(s=It,64===t.charCodeAt(It)?(o=st,It++):(o=C,0===Dt&&r(ot)),o!==C?(a=_(),a!==C?(o=[o,a],s=o):(It=s,s=O)):(It=s,s=O),s===C&&(s=x),s!==C?(Nt=e,n=at(n,i,s),e=n):(It=e,e=O)):(It=e,e=O)):(It=e,e=O),e}function m(){var e,n;return e=It,t.substr(It,2)===ut?(n=ut,It+=2):(n=C,0===Dt&&r(lt)),n!==C&&(Nt=e,n=ht()),e=n,e===C&&(e=It,t.substr(It,2)===ct?(n=ct,It+=2):(n=C,0===Dt&&r(ft)),n!==C&&(Nt=e,n=pt()),e=n,e===C&&(e=It,t.substr(It,2)===dt?(n=dt,It+=2):(n=C,0===Dt&&r(mt)),n!==C&&(Nt=e,n=gt()),e=n)),e}function g(){var t;return t=v(),t===C&&(t=y()),t}function _(){var e,n,i;if(e=It,n=[],_t.test(t.charAt(It))?(i=t.charAt(It),It++):(i=C,0===Dt&&r(vt)),i!==C)for(;i!==C;)n.push(i),_t.test(t.charAt(It))?(i=t.charAt(It),It++):(i=C,0===Dt&&r(vt));else n=O;return n!==C&&(Nt=e,n=yt(n)),e=n}function v(){var t,e;return t=It,e=b(),e!==C&&(Nt=t,e=bt(e)),t=e}function y(){var e,n,i,s,o;if(e=It,n=It,i=[],Et.test(t.charAt(It))?(s=t.charAt(It),It++):(s=C,0===Dt&&r(wt)),s!==C)for(;s!==C;)i.push(s),Et.test(t.charAt(It))?(s=t.charAt(It),It++):(s=C,0===Dt&&r(wt));else i=O;if(i!==C&&(i=t.substring(n,It)),n=i,n!==C){for(i=It,s=[],Tt.test(t.charAt(It))?(o=t.charAt(It),It++):(o=C,0===Dt&&r(Ct));o!==C;)s.push(o),Tt.test(t.charAt(It))?(o=t.charAt(It),It++):(o=C,0===Dt&&r(Ct));s!==C&&(s=t.substring(i,It)),i=s,i!==C?(Nt=e,n=St(n,i),e=n):(It=e,e=O)}else It=e,e=O;return e}function b(){var e,n,i,s,o;if(e=It,n=[],_t.test(t.charAt(It))?(i=t.charAt(It),It++):(i=C,0===Dt&&r(vt)),i!==C)for(;i!==C;)n.push(i),_t.test(t.charAt(It))?(i=t.charAt(It),It++):(i=C,0===Dt&&r(vt));else n=O;if(n!==C)if(46===t.charCodeAt(It)?(i=At,It++):(i=C,0===Dt&&r(Ot)),i!==C){if(s=[],_t.test(t.charAt(It))?(o=t.charAt(It),It++):(o=C,0===Dt&&r(vt)),o!==C)for(;o!==C;)s.push(o),_t.test(t.charAt(It))?(o=t.charAt(It),It++):(o=C,0===Dt&&r(vt));else s=O;s!==C?(Nt=e,n=xt(n,s),e=n):(It=e,e=O)}else It=e,e=O;else It=e,e=O;if(e===C){if(e=It,n=[],_t.test(t.charAt(It))?(i=t.charAt(It),It++):(i=C,0===Dt&&r(vt)),i!==C)for(;i!==C;)n.push(i),_t.test(t.charAt(It))?(i=t.charAt(It),It++):(i=C,0===Dt&&r(vt));else n=O;n!==C&&(Nt=e,n=Rt(n)),e=n}return e}function E(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])t[n]=arguments[e][n];return t}var w,T=arguments.length>1?arguments[1]:{},C={},S={visualFormatString:o},A=o,O=C,x=null,R=":",I={type:"literal",value:":",description:'":"'},N=function(t,e,n,i,r){return{orientation:t?t[0]:"horizontal",cascade:(e||[]).concat([n],[].concat.apply([],i),r||[])}},V="H",L={type:"literal",value:"H",description:'"H"'},M="V",z={type:"literal",value:"V",description:'"V"'},D=function(t){return"H"==t?"horizontal":"vertical"},P="|",F={type:"literal",value:"|",description:'"|"'},U=function(){return{view:null}},H="[",k={type:"literal",value:"[",description:'"["'},G="]",q={type:"literal",value:"]",description:'"]"'},j=function(t,e){return E(t,e?{constraints:e}:{})},W="-",B={type:"literal",value:"-",description:'"-"'},Y=function(t){return t},Q=function(){return[{relation:"equ",constant:"default",$parserOffset:n()}]},X="",K=function(){return[{relation:"equ",constant:0,$parserOffset:n()}]},Z=function(t){return[{relation:"equ",constant:t,$parserOffset:n()}]},J="(",$={type:"literal",value:"(",description:'"("'},tt=",",et={type:"literal",value:",",description:'","'},nt=")",it={type:"literal",value:")",description:'")"'},rt=function(t,e){return[t].concat(e.map(function(t){return t[1]}))},st="@",ot={type:"literal",value:"@",description:'"@"'},at=function(t,e,n){return E({relation:"equ"},t||{},e,n?n[1]:{})},ut="==",lt={type:"literal",value:"==",description:'"=="'},ht=function(){return{relation:"equ",$parserOffset:n()}},ct="<=",ft={type:"literal",value:"<=",description:'"<="'},pt=function(){return{relation:"leq",$parserOffset:n()}},dt=">=",mt={type:"literal",value:">=",description:'">="'},gt=function(){return{relation:"geq",$parserOffset:n()}},_t=/^[0-9]/,vt={type:"class",value:"[0-9]",description:"[0-9]"},yt=function(t){return{priority:parseInt(t.join(""),10)}},bt=function(t){return{constant:t}},Et=/^[a-zA-Z_]/,wt={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},Tt=/^[a-zA-Z0-9_]/,Ct={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},St=function(t,e){return{view:t+e}},At=".",Ot={type:"literal",value:".",description:'"."'},xt=function(t,e){return parseFloat(t.concat(".").concat(e).join(""),10)},Rt=function(t){return parseInt(t.join(""),10)},It=0,Nt=0,Vt=0,Lt={line:1,column:1,seenCR:!1},Mt=0,zt=[],Dt=0;if("startRule"in T){if(!(T.startRule in S))throw new Error("Can't start parsing from rule \""+T.startRule+'".');A=S[T.startRule]}if(w=A(),w!==C&&It===t.length)return w;throw w!==C&&It<t.length&&r({type:"end",description:"end of input"}),s(null,zt,Mt)}return t(e,Error),{SyntaxError:e,parse:n}}(),b=function(){function t(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}function e(t,e,n,i,r,s){this.message=t,this.expected=e,this.found=n,this.offset=i,this.line=r,this.column=s,this.name="SyntaxError"}function n(t){function n(){return Je}function i(e){function n(e,n,i){var r,s;for(r=n;i>r;r++)s=t.charAt(r),"\n"===s?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===s||"\u2028"===s||"\u2029"===s?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}return $e!==e&&($e>e&&($e=0,tn={line:1,column:1,seenCR:!1}),n(tn,$e,e),$e=e),tn}function r(t){en>Ze||(Ze>en&&(en=Ze,nn=[]),nn.push(t))}function s(n,r,s){function o(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}function a(t,e){function n(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0180-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1080-\uFFFF]/g,function(t){return"\\u"+e(t)})}var i,r,s,o=new Array(t.length);for(s=0;s<t.length;s++)o[s]=t[s].description;return i=t.length>1?o.slice(0,-1).join(", ")+" or "+o[t.length-1]:o[0],r=e?'"'+n(e)+'"':"end of input","Expected "+i+" but "+r+" found."}var u=i(s),l=s<t.length?t.charAt(s):null;return null!==r&&o(r),new e(null!==n?n:a(r,l),r,l,s,u.line,u.column)}function o(){var e,n,i,s,o,c,f,d;if(e=Ze,n=Ze,i=a(),i!==D?(58===t.charCodeAt(Ze)?(s=k,Ze++):(s=D,0===rn&&r(G)),s!==D?(i=[i,s],n=i):(Ze=n,n=U)):(Ze=n,n=U),n===D&&(n=H),n!==D)if(i=Ze,s=l(),s!==D?(o=p(),o!==D?(s=[s,o],i=s):(Ze=i,i=U)):(Ze=i,i=U),i===D&&(i=H),i!==D)if(s=h(),s!==D){for(o=[],c=Ze,f=p(),f!==D?(d=h(),d!==D?(f=[f,d],c=f):(Ze=c,c=U)):(Ze=c,c=U);c!==D;)o.push(c),c=Ze,f=p(),f!==D?(d=h(),d!==D?(f=[f,d],c=f):(Ze=c,c=U)):(Ze=c,c=U);o!==D?(c=Ze,f=p(),f!==D?(d=l(),d!==D?(f=[f,d],c=f):(Ze=c,c=U)):(Ze=c,c=U),c===D&&(c=H),c!==D?(f=u(),f===D&&(f=H),f!==D?(Je=e,n=q(n,i,s,o,c,f),e=n):(Ze=e,e=U)):(Ze=e,e=U)):(Ze=e,e=U)}else Ze=e,e=U;else Ze=e,e=U;else Ze=e,e=U;return e}function a(){var e,n;return e=Ze,t.substr(Ze,2)===j?(n=j,Ze+=2):(n=D,0===rn&&r(W)),n!==D&&(Je=e,n=B()),e=n,e===D&&(e=Ze,72===t.charCodeAt(Ze)?(n=Y,Ze++):(n=D,0===rn&&r(Q)),n!==D&&(Je=e,n=X()),e=n,e===D&&(e=Ze,86===t.charCodeAt(Ze)?(n=K,Ze++):(n=D,0===rn&&r(Z)),n!==D&&(Je=e,n=J()),e=n,e===D&&(e=Ze,90===t.charCodeAt(Ze)?(n=$,Ze++):(n=D,0===rn&&r(tt)),n!==D&&(Je=e,n=et()),e=n))),e}function u(){var e,n,i,s,o;for(e=Ze,n=[],32===t.charCodeAt(Ze)?(i=nt,Ze++):(i=D,0===rn&&r(it));i!==D;)n.push(i),32===t.charCodeAt(Ze)?(i=nt,Ze++):(i=D,0===rn&&r(it));if(n!==D)if(t.substr(Ze,2)===rt?(i=rt,Ze+=2):(i=D,0===rn&&r(st)),i!==D){for(s=[],t.length>Ze?(o=t.charAt(Ze),Ze++):(o=D,0===rn&&r(ot));o!==D;)s.push(o),t.length>Ze?(o=t.charAt(Ze),Ze++):(o=D,0===rn&&r(ot));s!==D?(n=[n,i,s],e=n):(Ze=e,e=U)}else Ze=e,e=U;else Ze=e,e=U;return e}function l(){var e,n;return e=Ze,124===t.charCodeAt(Ze)?(n=at,Ze++):(n=D,0===rn&&r(ut)),n!==D&&(Je=e,n=lt()),e=n}function h(){var e,n,i,s,o,a,u;if(e=Ze,91===t.charCodeAt(Ze)?(n=ht,Ze++):(n=D,0===rn&&r(ct)),n!==D)if(i=c(),i!==D){for(s=[],o=Ze,44===t.charCodeAt(Ze)?(a=ft,Ze++):(a=D,0===rn&&r(pt)),a!==D?(u=c(),u!==D?(a=[a,u],o=a):(Ze=o,o=U)):(Ze=o,o=U);o!==D;)s.push(o),o=Ze,44===t.charCodeAt(Ze)?(a=ft,Ze++):(a=D,0===rn&&r(pt)),a!==D?(u=c(),u!==D?(a=[a,u],o=a):(Ze=o,o=U)):(Ze=o,o=U);s!==D?(93===t.charCodeAt(Ze)?(o=dt,Ze++):(o=D,0===rn&&r(mt)),o!==D?(Je=e,n=gt(i,s),e=n):(Ze=e,e=U)):(Ze=e,e=U)}else Ze=e,e=U;else Ze=e,e=U;return e}function c(){var t,e,n,i;return t=Ze,e=R(),e!==D?(n=g(),n===D&&(n=H),n!==D?(i=f(),i===D&&(i=H),i!==D?(Je=t,e=_t(e,n,i),t=e):(Ze=t,t=U)):(Ze=t,t=U)):(Ze=t,t=U),t}function f(){var e,n,i,s,o,a;if(e=Ze,58===t.charCodeAt(Ze)?(n=k,Ze++):(n=D,0===rn&&r(G)),n!==D){if(i=[],s=Ze,o=p(),o!==D?(a=h(),a!==D?(o=[o,a],s=o):(Ze=s,s=U)):(Ze=s,s=U),s!==D)for(;s!==D;)i.push(s),s=Ze,o=p(),o!==D?(a=h(),a!==D?(o=[o,a],s=o):(Ze=s,s=U)):(Ze=s,s=U);else i=U;i!==D?(s=p(),s!==D?(Je=e,n=vt(i,s),e=n):(Ze=e,e=U)):(Ze=e,e=U)}else Ze=e,e=U;return e}function p(){var e,n,i,s;return e=Ze,t.substr(Ze,2)===yt?(n=yt,Ze+=2):(n=D,0===rn&&r(bt)),n!==D&&(Je=e,n=Et()),e=n,e===D&&(e=Ze,45===t.charCodeAt(Ze)?(n=wt,Ze++):(n=D,0===rn&&r(Tt)),n!==D?(i=d(),i!==D?(45===t.charCodeAt(Ze)?(s=wt,Ze++):(s=D,0===rn&&r(Tt)),s!==D?(Je=e,n=Ct(i),e=n):(Ze=e,e=U)):(Ze=e,e=U)):(Ze=e,e=U),e===D&&(e=Ze,45===t.charCodeAt(Ze)?(n=wt,Ze++):(n=D,0===rn&&r(Tt)),n!==D&&(Je=e,n=St()),e=n,e===D&&(e=Ze,126===t.charCodeAt(Ze)?(n=At,Ze++):(n=D,0===rn&&r(Ot)),n!==D?(i=v(),i!==D?(126===t.charCodeAt(Ze)?(s=At,Ze++):(s=D,0===rn&&r(Ot)),s!==D?(Je=e,n=Ct(i),e=n):(Ze=e,e=U)):(Ze=e,e=U)):(Ze=e,e=U),e===D&&(e=Ze,126===t.charCodeAt(Ze)?(n=At,Ze++):(n=D,0===rn&&r(Ot)),n!==D&&(Je=e,n=xt()),e=n,e===D&&(e=Ze,n=Rt,n!==D&&(Je=e,n=It()),e=n))))),e}function d(){var t;return t=m(),t===D&&(t=g()),t}function m(){var t,e;return t=Ze,e=C(),e!==D&&(Je=t,e=Nt(e)),t=e,t===D&&(t=Ze,e=V(),e!==D&&(Je=t,e=Vt(e)),t=e),t}function g(){var e,n,i,s,o,a,u;if(e=Ze,40===t.charCodeAt(Ze)?(n=Lt,Ze++):(n=D,0===rn&&r(Mt)),n!==D)if(i=_(),i!==D){for(s=[],o=Ze,44===t.charCodeAt(Ze)?(a=ft,Ze++):(a=D,0===rn&&r(pt)),a!==D?(u=_(),u!==D?(a=[a,u],o=a):(Ze=o,o=U)):(Ze=o,o=U);o!==D;)s.push(o),o=Ze,44===t.charCodeAt(Ze)?(a=ft,Ze++):(a=D,0===rn&&r(pt)),a!==D?(u=_(),u!==D?(a=[a,u],o=a):(Ze=o,o=U)):(Ze=o,o=U);s!==D?(41===t.charCodeAt(Ze)?(o=zt,Ze++):(o=D,0===rn&&r(Dt)),o!==D?(Je=e,n=Pt(i,s),e=n):(Ze=e,e=U)):(Ze=e,e=U)}else Ze=e,e=U;else Ze=e,e=U;return e}function _(){var e,n,i,s,o,a;return e=Ze,n=b(),n===D&&(n=H),n!==D?(i=E(),i!==D?(s=Ze,64===t.charCodeAt(Ze)?(o=Ft,Ze++):(o=D,0===rn&&r(Ut)),o!==D?(a=w(),a!==D?(o=[o,a],s=o):(Ze=s,s=U)):(Ze=s,s=U),s===D&&(s=H),s!==D?(Je=e,n=Ht(n,i,s),e=n):(Ze=e,e=U)):(Ze=e,e=U)):(Ze=e,e=U),e}function v(){var e,n,i,s,o,a,u;if(e=Ze,40===t.charCodeAt(Ze)?(n=Lt,Ze++):(n=D,0===rn&&r(Mt)),n!==D)if(i=y(),i!==D){for(s=[],o=Ze,44===t.charCodeAt(Ze)?(a=ft,Ze++):(a=D,0===rn&&r(pt)),a!==D?(u=y(),u!==D?(a=[a,u],o=a):(Ze=o,o=U)):(Ze=o,o=U);o!==D;)s.push(o),o=Ze,44===t.charCodeAt(Ze)?(a=ft,Ze++):(a=D,0===rn&&r(pt)),a!==D?(u=y(),u!==D?(a=[a,u],o=a):(Ze=o,o=U)):(Ze=o,o=U);s!==D?(41===t.charCodeAt(Ze)?(o=zt,Ze++):(o=D,0===rn&&r(Dt)),o!==D?(Je=e,n=Pt(i,s),e=n):(Ze=e,e=U)):(Ze=e,e=U)}else Ze=e,e=U;else Ze=e,e=U;return e}function y(){var e,n,i,s,o,a;return e=Ze,n=b(),n===D&&(n=H),n!==D?(i=E(),i!==D?(s=Ze,64===t.charCodeAt(Ze)?(o=Ft,Ze++):(o=D,0===rn&&r(Ut)),o!==D?(a=w(),a!==D?(o=[o,a],s=o):(Ze=s,s=U)):(Ze=s,s=U),s===D&&(s=H),s!==D?(Je=e,n=kt(n,i,s),e=n):(Ze=e,e=U)):(Ze=e,e=U)):(Ze=e,e=U),e}function b(){var e,n;return e=Ze,t.substr(Ze,2)===Gt?(n=Gt,Ze+=2):(n=D,0===rn&&r(qt)),n!==D&&(Je=e,n=jt()),e=n,e===D&&(e=Ze,t.substr(Ze,2)===Wt?(n=Wt,Ze+=2):(n=D,0===rn&&r(Bt)),n!==D&&(Je=e,n=Yt()),e=n,e===D&&(e=Ze,t.substr(Ze,2)===Qt?(n=Qt,Ze+=2):(n=D,0===rn&&r(Xt)),n!==D&&(Je=e,n=Kt()),e=n)),e}function E(){var t;return t=C(),t===D&&(t=T(),t===D&&(t=S())),t}function w(){var e,n,i;if(e=Ze,n=[],Zt.test(t.charAt(Ze))?(i=t.charAt(Ze),Ze++):(i=D,0===rn&&r(Jt)),i!==D)for(;i!==D;)n.push(i),Zt.test(t.charAt(Ze))?(i=t.charAt(Ze),Ze++):(i=D,0===rn&&r(Jt));else n=U;return n!==D&&(Je=e,n=$t(n)),e=n}function T(){var t,e;return t=Ze,e=V(),e!==D&&(Je=t,e=te(e)),t=e}function C(){var e,n,i;return e=Ze,n=V(),n!==D?(37===t.charCodeAt(Ze)?(i=ee,Ze++):(i=D,0===rn&&r(ne)),i!==D?(Je=e,n=ie(n),e=n):(Ze=e,e=U)):(Ze=e,e=U),e}function S(){var t,e,n,i,r;return t=Ze,e=I(),e!==D?(n=A(),n===D&&(n=H),n!==D?(i=O(),i===D&&(i=H),i!==D?(r=x(),r===D&&(r=H),r!==D?(Je=t,e=re(e,n,i,r),t=e):(Ze=t,t=U)):(Ze=t,t=U)):(Ze=t,t=U)):(Ze=t,t=U),t}function A(){var e,n;return e=Ze,t.substr(Ze,5)===se?(n=se,Ze+=5):(n=D,0===rn&&r(oe)),n!==D&&(Je=e,n=ae()),e=n,e===D&&(e=Ze,t.substr(Ze,6)===ue?(n=ue,Ze+=6):(n=D,0===rn&&r(le)),n!==D&&(Je=e,n=he()),e=n,e===D&&(e=Ze,t.substr(Ze,4)===ce?(n=ce,Ze+=4):(n=D,0===rn&&r(fe)),n!==D&&(Je=e,n=pe()),e=n,e===D&&(e=Ze,t.substr(Ze,7)===de?(n=de,Ze+=7):(n=D,0===rn&&r(me)),n!==D&&(Je=e,n=ge()),e=n,e===D&&(e=Ze,t.substr(Ze,6)===_e?(n=_e,Ze+=6):(n=D,0===rn&&r(ve)),n!==D&&(Je=e,n=ye()),e=n,e===D&&(e=Ze,t.substr(Ze,7)===be?(n=be,Ze+=7):(n=D,0===rn&&r(Ee)),n!==D&&(Je=e,n=we()),e=n,e===D&&(e=Ze,t.substr(Ze,8)===Te?(n=Te,Ze+=8):(n=D,0===rn&&r(Ce)),n!==D&&(Je=e,n=Se()),e=n,e===D&&(e=Ze,t.substr(Ze,8)===Ae?(n=Ae,Ze+=8):(n=D,0===rn&&r(Oe)),n!==D&&(Je=e,n=xe()),e=n))))))),e}function O(){var e,n,i;return e=Ze,47===t.charCodeAt(Ze)?(n=Re,Ze++):(n=D,0===rn&&r(Ie)),n!==D?(i=V(),i!==D?(Je=e,n=Ne(i),e=n):(Ze=e,e=U)):(Ze=e,e=U),e===D&&(e=Ze,42===t.charCodeAt(Ze)?(n=Ve,Ze++):(n=D,0===rn&&r(Le)),n!==D?(i=V(),i!==D?(Je=e,n=Me(i),e=n):(Ze=e,e=U)):(Ze=e,e=U)),e}function x(){var e,n,i;return e=Ze,45===t.charCodeAt(Ze)?(n=wt,Ze++):(n=D,0===rn&&r(Tt)),n!==D?(i=V(),i!==D?(Je=e,n=ze(i),e=n):(Ze=e,e=U)):(Ze=e,e=U),e===D&&(e=Ze,43===t.charCodeAt(Ze)?(n=De,Ze++):(n=D,0===rn&&r(Pe)),n!==D?(i=V(),i!==D?(Je=e,n=Me(i),e=n):(Ze=e,e=U)):(Ze=e,e=U)),e}function R(){var e,n,i,s,o;if(e=Ze,n=Ze,i=[],Fe.test(t.charAt(Ze))?(s=t.charAt(Ze),Ze++):(s=D,0===rn&&r(Ue)),s!==D)for(;s!==D;)i.push(s),Fe.test(t.charAt(Ze))?(s=t.charAt(Ze),Ze++):(s=D,0===rn&&r(Ue));else i=U;if(i!==D&&(i=t.substring(n,Ze)),n=i,n!==D){for(i=Ze,s=[],He.test(t.charAt(Ze))?(o=t.charAt(Ze),Ze++):(o=D,0===rn&&r(ke));o!==D;)s.push(o),He.test(t.charAt(Ze))?(o=t.charAt(Ze),Ze++):(o=D,0===rn&&r(ke));s!==D&&(s=t.substring(i,Ze)),i=s,i!==D?(s=N(),s!==D?(Je=e,n=Ge(n,i,s),e=n):(Ze=e,e=U)):(Ze=e,e=U)}else Ze=e,e=U;if(e===D){if(e=Ze,n=Ze,i=[],Fe.test(t.charAt(Ze))?(s=t.charAt(Ze),Ze++):(s=D,0===rn&&r(Ue)),s!==D)for(;s!==D;)i.push(s),Fe.test(t.charAt(Ze))?(s=t.charAt(Ze),Ze++):(s=D,0===rn&&r(Ue));else i=U;if(i!==D&&(i=t.substring(n,Ze)),n=i,n!==D){for(i=Ze,s=[],He.test(t.charAt(Ze))?(o=t.charAt(Ze),Ze++):(o=D,0===rn&&r(ke));o!==D;)s.push(o),He.test(t.charAt(Ze))?(o=t.charAt(Ze),Ze++):(o=D,0===rn&&r(ke));s!==D&&(s=t.substring(i,Ze)),i=s,i!==D?(Je=e,n=qe(n,i),e=n):(Ze=e,e=U)}else Ze=e,e=U}return e}function I(){var e,n,i,s,o;if(e=Ze,n=Ze,i=[],Fe.test(t.charAt(Ze))?(s=t.charAt(Ze),Ze++):(s=D,0===rn&&r(Ue)),s!==D)for(;s!==D;)i.push(s),Fe.test(t.charAt(Ze))?(s=t.charAt(Ze),Ze++):(s=D,0===rn&&r(Ue));else i=U;if(i!==D&&(i=t.substring(n,Ze)),n=i,n!==D){for(i=Ze,s=[],He.test(t.charAt(Ze))?(o=t.charAt(Ze),Ze++):(o=D,0===rn&&r(ke));o!==D;)s.push(o),He.test(t.charAt(Ze))?(o=t.charAt(Ze),Ze++):(o=D,0===rn&&r(ke));s!==D&&(s=t.substring(i,Ze)),i=s,i!==D?(Je=e,n=qe(n,i),e=n):(Ze=e,e=U)}else Ze=e,e=U;return e}function N(){var e,n,i,s;if(e=Ze,t.substr(Ze,2)===je?(n=je,Ze+=2):(n=D,0===rn&&r(We)),n!==D){if(i=[],Zt.test(t.charAt(Ze))?(s=t.charAt(Ze),Ze++):(s=D,0===rn&&r(Jt)),s!==D)for(;s!==D;)i.push(s),Zt.test(t.charAt(Ze))?(s=t.charAt(Ze),Ze++):(s=D,0===rn&&r(Jt));else i=U;i!==D?(Je=e,n=Be(i),e=n):(Ze=e,e=U)}else Ze=e,e=U;return e}function V(){var e,n,i,s,o;if(e=Ze,n=[],Zt.test(t.charAt(Ze))?(i=t.charAt(Ze),Ze++):(i=D,0===rn&&r(Jt)),i!==D)for(;i!==D;)n.push(i),Zt.test(t.charAt(Ze))?(i=t.charAt(Ze),Ze++):(i=D,0===rn&&r(Jt));else n=U;if(n!==D)if(46===t.charCodeAt(Ze)?(i=Ye,Ze++):(i=D,0===rn&&r(Qe)),i!==D){if(s=[],Zt.test(t.charAt(Ze))?(o=t.charAt(Ze),Ze++):(o=D,0===rn&&r(Jt)),o!==D)for(;o!==D;)s.push(o),Zt.test(t.charAt(Ze))?(o=t.charAt(Ze),Ze++):(o=D,0===rn&&r(Jt));else s=U;s!==D?(Je=e,n=Xe(n,s),e=n):(Ze=e,e=U)}else Ze=e,e=U;else Ze=e,e=U;if(e===D){if(e=Ze,n=[],Zt.test(t.charAt(Ze))?(i=t.charAt(Ze),Ze++):(i=D,0===rn&&r(Jt)),i!==D)for(;i!==D;)n.push(i),Zt.test(t.charAt(Ze))?(i=t.charAt(Ze),Ze++):(i=D,0===rn&&r(Jt));else n=U;n!==D&&(Je=e,n=Ke(n)),e=n}return e}function L(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])t[n]=arguments[e][n];return t}var M,z=arguments.length>1?arguments[1]:{},D={},P={visualFormatString:o},F=o,U=D,H=null,k=":",G={type:"literal",value:":",description:'":"'},q=function(t,e,n,i,r,s){return{orientation:t?t[0]:"horizontal",cascade:(e||[]).concat(n,[].concat.apply([],i),r||[])}},j="HV",W={type:"literal",value:"HV",description:'"HV"'},B=function(){return"horzvert"},Y="H",Q={type:"literal",value:"H",description:'"H"'},X=function(){return"horizontal"},K="V",Z={type:"literal",value:"V",description:'"V"'},J=function(){return"vertical"},$="Z",tt={type:"literal",value:"Z",description:'"Z"'},et=function(){return"zIndex"},nt=" ",it={type:"literal",value:" ",description:'" "'},rt="//",st={type:"literal",value:"//",description:'"//"'},ot={type:"any",description:"any character"},at="|",ut={type:"literal",value:"|",description:'"|"'},lt=function(){return{view:null}},ht="[",ct={type:"literal",value:"[",description:'"["'},ft=",",pt={type:"literal",value:",",description:'","'},dt="]",mt={type:"literal",value:"]",description:'"]"'},gt=function(t,e){return e.length?[t].concat([].concat.apply([],e)):t},_t=function(t,e,n){return L(L(t,e?{constraints:e}:{}),n?{cascade:n}:{})},vt=function(t,e){return[].concat([].concat.apply([],t),[e])},yt="->",bt={type:"literal",value:"->",description:'"->"'},Et=function(){return[{relation:"none"}]},wt="-",Tt={type:"literal",value:"-",description:'"-"'},Ct=function(t){return t},St=function(){return[{relation:"equ",constant:"default"}]},At="~",Ot={type:"literal",value:"~",description:'"~"'},xt=function(){return[{relation:"equ",equalSpacing:!0}]},Rt="",It=function(){return[{relation:"equ",constant:0}]},Nt=function(t){return[{relation:"equ",multiplier:t.multiplier}]},Vt=function(t){return[{relation:"equ",constant:t}]},Lt="(",Mt={type:"literal",value:"(",description:'"("'},zt=")",Dt={type:"literal",value:")",description:'")"'},Pt=function(t,e){return[t].concat(e.map(function(t){return t[1]}))},Ft="@",Ut={type:"literal",value:"@",description:'"@"'},Ht=function(t,e,n){return L({relation:"equ"},t||{},e,n?n[1]:{})},kt=function(t,e,n){return L({relation:"equ",equalSpacing:!0},t||{},e,n?n[1]:{})},Gt="==",qt={type:"literal",value:"==",description:'"=="'},jt=function(){return{relation:"equ"}},Wt="<=",Bt={type:"literal",value:"<=",description:'"<="'},Yt=function(){return{relation:"leq"}},Qt=">=",Xt={type:"literal",value:">=",description:'">="'},Kt=function(){return{relation:"geq"}},Zt=/^[0-9]/,Jt={type:"class",value:"[0-9]",description:"[0-9]"},$t=function(t){return{priority:parseInt(t.join(""),10)}},te=function(t){return{constant:t}},ee="%",ne={type:"literal",value:"%",description:'"%"'},ie=function(t){return{view:null,multiplier:t/100}},re=function(t,e,n,i){
return{view:t.view,attribute:e?e:void 0,multiplier:n?n:1,constant:i?i:void 0}},se=".left",oe={type:"literal",value:".left",description:'".left"'},ae=function(){return"left"},ue=".right",le={type:"literal",value:".right",description:'".right"'},he=function(){return"right"},ce=".top",fe={type:"literal",value:".top",description:'".top"'},pe=function(){return"top"},de=".bottom",me={type:"literal",value:".bottom",description:'".bottom"'},ge=function(){return"bottom"},_e=".width",ve={type:"literal",value:".width",description:'".width"'},ye=function(){return"width"},be=".height",Ee={type:"literal",value:".height",description:'".height"'},we=function(){return"height"},Te=".centerX",Ce={type:"literal",value:".centerX",description:'".centerX"'},Se=function(){return"centerX"},Ae=".centerY",Oe={type:"literal",value:".centerY",description:'".centerY"'},xe=function(){return"centerY"},Re="/",Ie={type:"literal",value:"/",description:'"/"'},Ne=function(t){return 1/t},Ve="*",Le={type:"literal",value:"*",description:'"*"'},Me=function(t){return t},ze=function(t){return-t},De="+",Pe={type:"literal",value:"+",description:'"+"'},Fe=/^[a-zA-Z_]/,Ue={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},He=/^[a-zA-Z0-9_]/,ke={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},Ge=function(t,e,i){return{view:t+e,range:i,$parserOffset:n()}},qe=function(t,e){return{view:t+e,$parserOffset:n()}},je="..",We={type:"literal",value:"..",description:'".."'},Be=function(t){return parseInt(t)},Ye=".",Qe={type:"literal",value:".",description:'"."'},Xe=function(t,e){return parseFloat(t.concat(".").concat(e).join(""),10)},Ke=function(t){return parseInt(t.join(""),10)},Ze=0,Je=0,$e=0,tn={line:1,column:1,seenCR:!1},en=0,nn=[],rn=0;if("startRule"in z){if(!(z.startRule in P))throw new Error("Can't start parsing from rule \""+z.startRule+'".');F=P[z.startRule]}if(M=F(),M!==D&&Ze===t.length)return M;throw M!==D&&Ze<t.length&&r({type:"end",description:"end of input"}),s(null,nn,en)}return t(e,Error),{SyntaxError:e,parse:n}}(),E={HORIZONTAL:1,VERTICAL:2,ZINDEX:4},w=["viewport","spacing","colors","shapes","widths","heights"],T=function(){function t(){i(this,t)}return d(t,null,[{key:"parseLine",value:function(t,e){if(0===t.length||e&&e.extended&&0===t.indexOf("//"))return[];var n=e&&e.extended?b.parse(t):y.parse(t);if(e&&"raw"===e.outFormat)return[n];var i={constraints:[],lineIndex:(e?e.lineIndex:void 0)||1,subViews:(e?e.subViews:void 0)||{}};switch(n.orientation){case"horizontal":i.orientation=E.HORIZONTAL,i.horizontal=!0,u(i,n.cascade,null);break;case"vertical":i.orientation=E.VERTICAL,u(i,n.cascade,null);break;case"horzvert":i.orientation=E.HORIZONTAL,i.horizontal=!0,u(i,n.cascade,null),i={constraints:i.constraints,lineIndex:i.lineIndex,subViews:i.subViews,orientation:E.VERTICAL},u(i,n.cascade,null);break;case"zIndex":i.orientation=E.ZINDEX,u(i,n.cascade,null)}return i.constraints}},{key:"parse",value:function(t,e){var n=e&&e.lineSeperator?e.lineSeperator:"\n";if(!Array.isArray(t)&&t.indexOf(n)<0)try{return this.parseLine(t,e)}catch(i){throw i.source=t,i}t=Array.isArray(t)?t:[t];var r=void 0,s=[],o=0,a=void 0,u={lineIndex:o,extended:e&&e.extended,strict:e&&void 0!==e.strict?e.strict:!0,outFormat:e?e.outFormat:void 0,subViews:{}};try{for(var l=0;l<t.length;l++){r=t[l].split(n);for(var h=0;h<r.length;h++)a=r[h],o++,u.lineIndex=o,u.strict||(a=a.trim()),(u.strict||a.length)&&(s=s.concat(this.parseLine(a,u)))}}catch(i){throw i.source=a,i.line=o,i}return s}},{key:"parseMetaInfo",value:function(t,e){var n=e&&e.lineSeperator?e.lineSeperator:"\n",i=e?e.prefix:void 0;t=Array.isArray(t)?t:[t];for(var r,s={},o=0;o<t.length;o++)for(var u=t[o].split(n),l=0;l<u.length;l++)for(var h=u[l],c=0;c<w.length;c++)for(var f=0;(i?2:1)>f;f++){var p=w[c],d=(0===f?"":i)+p;if(0===h.indexOf("//"+d+" "))for(var m=h.substring(3+d.length).split(" "),g=0;g<m.length;g++){s[p]=s[p]||{};for(var _=m[g].split(":"),v=a(_[0],!0),y=0;y<v.length;y++)s[p][v[y]]=_.length>1?_[1]:""}else 0===h.indexOf("//"+d+":")&&(s[p]=h.substring(3+d.length))}if(s.viewport){var b=s.viewport,E=b["aspect-ratio"];E&&(E=E.split("/"),b["aspect-ratio"]=parseInt(E[0])/parseInt(E[1])),void 0!==b.height&&(b.height="intrinsic"===b.height?!0:parseInt(b.height)),void 0!==b.width&&(b.width="intrinsic"===b.width?!0:parseInt(b.width)),void 0!==b["max-height"]&&(b["max-height"]=parseInt(b["max-height"])),void 0!==b["max-width"]&&(b["max-width"]=parseInt(b["max-width"])),void 0!==b["min-height"]&&(b["min-height"]=parseInt(b["min-height"])),void 0!==b["min-width"]&&(b["min-width"]=parseInt(b["min-width"]))}if(s.widths)for(r in s.widths){var T="intrinsic"===s.widths[r]?!0:parseInt(s.widths[r]);s.widths[r]=T,(void 0===T||isNaN(T))&&delete s.widths[r]}if(s.heights)for(r in s.heights){var C="intrinsic"===s.heights[r]?!0:parseInt(s.heights[r]);s.heights[r]=C,(void 0===C||isNaN(C))&&delete s.heights[r]}if(s.spacing){var S=JSON.parse(s.spacing);s.spacing=S,(void 0===S||isNaN(S))&&delete s.spacing}return s}}]),t}(),C=function(){function t(e){i(this,t),this._name=e.name,this._type=e.type,this._solver=e.solver,this._attr={},e.name||(this._attr[g.LEFT]=new m.Variable,this._solver.addConstraint(new m.StayConstraint(this._attr[g.LEFT],m.Strength.required)),this._attr[g.TOP]=new m.Variable,this._solver.addConstraint(new m.StayConstraint(this._attr[g.TOP],m.Strength.required)),this._attr[g.ZINDEX]=new m.Variable,this._solver.addConstraint(new m.StayConstraint(this._attr[g.ZINDEX],m.Strength.required)))}return d(t,[{key:"toJSON",value:function(){return{name:this.name,left:this.left,top:this.top,width:this.width,height:this.height}}},{key:"toString",value:function(){JSON.stringify(this.toJSON(),void 0,2)}},{key:"getValue",value:function(t){return this._attr[t]?this._attr[t].value():void 0}},{key:"_getAttr",value:function(t){if(this._attr[t])return this._attr[t];switch(this._attr[t]=new m.Variable,t){case g.RIGHT:this._getAttr(g.LEFT),this._getAttr(g.WIDTH),this._solver.addConstraint(new m.Equation(this._attr[t],m.plus(this._attr[g.LEFT],this._attr[g.WIDTH])));break;case g.BOTTOM:this._getAttr(g.TOP),this._getAttr(g.HEIGHT),this._solver.addConstraint(new m.Equation(this._attr[t],m.plus(this._attr[g.TOP],this._attr[g.HEIGHT])));break;case g.CENTERX:this._getAttr(g.LEFT),this._getAttr(g.WIDTH),this._solver.addConstraint(new m.Equation(this._attr[t],m.plus(this._attr[g.LEFT],m.divide(this._attr[g.WIDTH],2))));break;case g.CENTERY:this._getAttr(g.TOP),this._getAttr(g.HEIGHT),this._solver.addConstraint(new m.Equation(this._attr[t],m.plus(this._attr[g.TOP],m.divide(this._attr[g.HEIGHT],2))))}return this._attr[t]}},{key:"_getAttrValue",value:function(t){return this._getAttr(t).value}},{key:"name",get:function(){return this._name}},{key:"left",get:function(){return this._getAttrValue(g.LEFT)}},{key:"right",get:function(){return this._getAttrValue(g.RIGHT)}},{key:"width",get:function(){return this._getAttrValue(g.WIDTH)}},{key:"height",get:function(){return this._getAttrValue(g.HEIGHT)}},{key:"intrinsicWidth",get:function(){return this._intrinsicWidth},set:function(t){if(void 0!==t&&t!==this._intrinsicWidth){var e=this._getAttr(g.WIDTH);void 0===this._intrinsicWidth&&this._solver.addEditVar(e,new m.Strength("required",this._name?998:999,1e3,1e3)),this._intrinsicWidth=t,this._solver.suggestValue(e,t),this._solver.resolve()}}},{key:"intrinsicHeight",get:function(){return this._intrinsicHeight},set:function(t){if(void 0!==t&&t!==this._intrinsicHeight){var e=this._getAttr(g.HEIGHT);void 0===this._intrinsicHeight&&this._solver.addEditVar(e,new m.Strength("required",this._name?998:999,1e3,1e3)),this._intrinsicHeight=t,this._solver.suggestValue(e,t),this._solver.resolve()}}},{key:"top",get:function(){return this._getAttrValue(g.TOP)}},{key:"bottom",get:function(){return this._getAttrValue(g.BOTTOM)}},{key:"centerX",get:function(){return this._getAttrValue(g.CENTERX)}},{key:"centerY",get:function(){return this._getAttrValue(g.CENTERY)}},{key:"zIndex",get:function(){return this._getAttrValue(g.ZINDEX)}},{key:"type",get:function(){return this._type}}]),t}(),S=new m.Strength("defaultPriority",0,1e3,1e3),A=function(){function t(e){i(this,t),this._solver=new m.SimplexSolver,this._subViews={},this._parentSubView=new C({solver:this._solver}),this.setSpacing(e&&void 0!==e.spacing?e.spacing:8),e&&((void 0!==e.width||void 0!==e.height)&&this.setSize(e.width,e.height),e.constraints&&this.addConstraints(e.constraints))}return d(t,[{key:"setSize",value:function(t,e){return this._parentSubView.intrinsicWidth=t,this._parentSubView.intrinsicHeight=e,this}},{key:"setSpacing",value:function(t){switch(Array.isArray(t)?t.length:-1){case-1:t=[t,t,t,t,t,t,1];break;case 1:t=[t[0],t[0],t[0],t[0],t[0],t[0],1];break;case 2:t=[t[1],t[0],t[1],t[0],t[0],t[1],1];break;case 3:t=[t[1],t[0],t[1],t[0],t[0],t[1],t[2]];break;case 6:t=[t[0],t[1],t[2],t[3],t[4],t[5],1];break;case 7:break;default:throw"Invalid spacing syntax"}if(!p(this._spacing,t)&&(this._spacing=t,this._spacingVars)){for(var e=0;e<this._spacingVars.length;e++)this._spacingVars[e]&&this._solver.suggestValue(this._spacingVars[e],this._spacing[e]);this._solver.resolve()}return this}},{key:"addConstraint",value:function(t){return f.call(this,t),this}},{key:"addConstraints",value:function(t){for(var e=0;e<t.length;e++)f.call(this,t[e]);return this}},{key:"width",get:function(){return this._parentSubView.intrinsicWidth}},{key:"height",get:function(){return this._parentSubView.intrinsicHeight}},{key:"fittingWidth",get:function(){return this._parentSubView.width}},{key:"fittingHeight",get:function(){return this._parentSubView.height}},{key:"subViews",get:function(){return this._subViews}}]),t}(),O={Attribute:g,Relation:_,Priority:v,VisualFormat:T,View:A,SubView:C};e.exports=O},{"cassowary/bin/c":2}],2:[function(t,e,n){(function(){!function(n){"use strict";try{(function(){}).bind(n)}catch(i){Object.defineProperty(Function.prototype,"bind",{value:function(t){var e=this;return function(){return e.apply(t,arguments)}},enumerable:!1,configurable:!0,writable:!0})}var r=void 0!==n.HTMLElement,s=function(t){for(var e=null;t&&t!=Object.prototype;){if(t.tagName){e=t.tagName;break}t=t.prototype}return e||"div"},o=1e-8,a={},u=function(t,e){if(t&&e){if("function"==typeof t[e])return t[e];var n=t.prototype;if(n&&"function"==typeof n[e])return n[e];if(n!==Object.prototype&&n!==Function.prototype)return"function"==typeof t.__super__?u(t.__super__,e):void 0}},l=n.c={debug:!1,trace:!1,verbose:!1,traceAdded:!1,GC:!1,GEQ:1,LEQ:2,inherit:function(t){var e=null,i=null;t["extends"]&&(i=t["extends"],delete t["extends"]),t.initialize&&(e=t.initialize,delete t.initialize);var o=e||function(){};Object.defineProperty(o,"__super__",{value:i?i:Object,enumerable:!1,configurable:!0,writable:!1}),t._t&&(a[t._t]=o);var u=o.prototype=Object.create(i?i.prototype:Object.prototype);if(this.extend(u,t),r&&i&&i.prototype instanceof n.HTMLElement){var l=o,h=s(u),c=function(t){return t.__proto__=u,l.apply(t,arguments),u.created&&t.created(),u.decorate&&t.decorate(),t};this.extend(u,{upgrade:c}),o=function(){return c(n.document.createElement(h))},o.prototype=u,this.extend(o,{ctor:l})}return o},extend:function(t,e){return this.own(e,function(n){var i=Object.getOwnPropertyDescriptor(e,n);try{"function"==typeof i.get||"function"==typeof i.set?Object.defineProperty(t,n,i):"function"==typeof i.value||"_"===n.charAt(0)?(i.writable=!0,i.configurable=!0,i.enumerable=!1,Object.defineProperty(t,n,i)):t[n]=e[n]}catch(r){}}),t},own:function(t,e,i){return Object.getOwnPropertyNames(t).forEach(e,i||n),t},traceprint:function(t){l.verbose&&console.log(t)},fnenterprint:function(t){console.log("* "+t)},fnexitprint:function(t){console.log("- "+t)},assert:function(t,e){if(!t)throw new l.InternalError("Assertion failed: "+e)},plus:function(t,e){return t instanceof l.Expression||(t=new l.Expression(t)),e instanceof l.Expression||(e=new l.Expression(e)),t.plus(e)},minus:function(t,e){return t instanceof l.Expression||(t=new l.Expression(t)),e instanceof l.Expression||(e=new l.Expression(e)),t.minus(e)},times:function(t,e){return("number"==typeof t||t instanceof l.Variable)&&(t=new l.Expression(t)),("number"==typeof e||e instanceof l.Variable)&&(e=new l.Expression(e)),t.times(e)},divide:function(t,e){return("number"==typeof t||t instanceof l.Variable)&&(t=new l.Expression(t)),("number"==typeof e||e instanceof l.Variable)&&(e=new l.Expression(e)),t.divide(e)},approx:function(t,e){if(t===e)return!0;var n,i;return n=t instanceof l.Variable?t.value:t,i=e instanceof l.Variable?e.value:e,0==n?o>Math.abs(i):0==i?o>Math.abs(n):Math.abs(n-i)<Math.abs(n)*o},_inc:function(t){return function(){return t++}}(0),parseJSON:function(t){return JSON.parse(t,function(t,e){if("object"!=typeof e||"string"!=typeof e._t)return e;var n=e._t,i=a[n];if(n&&i){var r=u(i,"fromJSON");if(r)return r(e,i)}return e})}};"function"==typeof t&&"undefined"!=typeof e&&"undefined"==typeof load&&(n.exports=l)}(this),function(t){"use strict";var e=function(t){var e=t.hashCode?t.hashCode:""+t;return e},n=function(t,e){Object.keys(t).forEach(function(n){e[n]=t[n]})},i={};t.HashTable=t.inherit({initialize:function(){this.size=0,this._store={},this._keyStrMap={},this._deleted=0},set:function(t,n){var i=e(t);this._store.hasOwnProperty(i)||this.size++,this._store[i]=n,this._keyStrMap[i]=t},get:function(t){if(!this.size)return null;t=e(t);var n=this._store[t];return void 0!==n?this._store[t]:null},clear:function(){this.size=0,this._store={},this._keyStrMap={}},_compact:function(){var t={};n(this._store,t),this._store=t},_compactThreshold:100,_perhapsCompact:function(){this._size>64||this._deleted>this._compactThreshold&&(this._compact(),this._deleted=0)},"delete":function(t){t=e(t),this._store.hasOwnProperty(t)&&(this._deleted++,delete this._store[t],this.size>0&&this.size--)},each:function(t,e){if(this.size){this._perhapsCompact();var n=this._store,i=this._keyStrMap;Object.keys(this._store).forEach(function(r){t.call(e||null,i[r],n[r])},this)}},escapingEach:function(t,e){if(this.size){this._perhapsCompact();for(var n=this,r=this._store,s=this._keyStrMap,o=i,a=Object.keys(r),u=0;a.length>u;u++)if(function(i){n._store.hasOwnProperty(i)&&(o=t.call(e||null,s[i],r[i]))}(a[u]),o){if(void 0!==o.retval)return o;if(o.brk)break}}},clone:function(){var e=new t.HashTable;return this.size&&(e.size=this.size,n(this._store,e._store),n(this._keyStrMap,e._keyStrMap)),e},equals:function(e){if(e===this)return!0;if(!(e instanceof t.HashTable)||e._size!==this._size)return!1;for(var n=Object.keys(this._store),i=0;n.length>i;i++){var r=n[i];if(this._keyStrMap[r]!==e._keyStrMap[r]||this._store[r]!==e._store[r])return!1}return!0},toString:function(){var t="";return this.each(function(e,n){t+=e+" => "+n+"\n"}),t}})}(this.c||e.parent.exports||{}),function(t){"use strict";t.HashSet=t.inherit({_t:"c.HashSet",initialize:function(){this.storage=[],this.size=0},add:function(t){var e=this.storage;e.indexOf(t),-1==e.indexOf(t)&&e.push(t),this.size=this.storage.length},values:function(){return this.storage},has:function(t){var e=this.storage;return-1!=e.indexOf(t)},"delete":function(t){var e=this.storage.indexOf(t);return-1==e?null:(this.storage.splice(e,1)[0],void(this.size=this.storage.length))},clear:function(){this.storage.length=0},each:function(t,e){this.size&&this.storage.forEach(t,e)},escapingEach:function(t,e){this.size&&this.storage.forEach(t,e)},toString:function(){var t=this.size+" {",e=!0;return this.each(function(n){e?e=!1:t+=", ",t+=n}),t+="}\n"},toJSON:function(){var t=[];return this.each(function(e){t.push(e.toJSON())}),{_t:"c.HashSet",data:t}},fromJSON:function(e){var n=new t.HashSet;return e.data&&(n.size=e.data.length,n.storage=e.data),n}})}(this.c||e.parent.exports||{}),function(t){"use strict";t.Error=t.inherit({initialize:function(t){t&&(this._description=t)},_name:"c.Error",_description:"An error has occured in Cassowary",set description(t){this._description=t},get description(){return"("+this._name+") "+this._description},get message(){return this.description},toString:function(){return this.description}});var e=function(e,n){return t.inherit({"extends":t.Error,initialize:function(){t.Error.apply(this,arguments)},_name:e||"",_description:n||""})};t.ConstraintNotFound=e("c.ConstraintNotFound","Tried to remove a constraint never added to the tableu"),t.InternalError=e("c.InternalError"),t.NonExpression=e("c.NonExpression","The resulting expression would be non"),t.NotEnoughStays=e("c.NotEnoughStays","There are not enough stays to give specific values to every variable"),t.RequiredFailure=e("c.RequiredFailure","A required constraint cannot be satisfied"),t.TooDifficult=e("c.TooDifficult","The constraints are too difficult to solve")}(this.c||e.parent.exports||{}),function(t){"use strict";var e=1e3;t.SymbolicWeight=t.inherit({_t:"c.SymbolicWeight",initialize:function(){this.value=0;for(var t=1,n=arguments.length-1;n>=0;--n)this.value+=arguments[n]*t,t*=e},toJSON:function(){return{_t:this._t,value:this.value}}})}(this.c||e.parent.exports||{}),function(t){t.Strength=t.inherit({initialize:function(e,n,i,r){this.name=e,this.symbolicWeight=n instanceof t.SymbolicWeight?n:new t.SymbolicWeight(n,i,r)},get required(){return this===t.Strength.required},toString:function(){return this.name+(this.isRequired?"":":"+this.symbolicWeight)}}),t.Strength.required=new t.Strength("<Required>",1e3,1e3,1e3),t.Strength.strong=new t.Strength("strong",1,0,0),t.Strength.medium=new t.Strength("medium",0,1,0),t.Strength.weak=new t.Strength("weak",0,0,1)}(this.c||("undefined"!=typeof e?e.parent.exports.c:{})),function(t){"use strict";t.AbstractVariable=t.inherit({isDummy:!1,isExternal:!1,isPivotable:!1,isRestricted:!1,_init:function(e,n){this.hashCode=t._inc(),this.name=(n||"")+this.hashCode,e&&(void 0!==e.name&&(this.name=e.name),void 0!==e.value&&(this.value=e.value),void 0!==e.prefix&&(this._prefix=e.prefix))},_prefix:"",name:"",value:0,toJSON:function(){var t={};return this._t&&(t._t=this._t),this.name&&(t.name=this.name),void 0!==this.value&&(t.value=this.value),this._prefix&&(t._prefix=this._prefix),this._t&&(t._t=this._t),t},fromJSON:function(e,n){var i=new n;return t.extend(i,e),i},toString:function(){return this._prefix+"["+this.name+":"+this.value+"]"}}),t.Variable=t.inherit({_t:"c.Variable","extends":t.AbstractVariable,initialize:function(e){this._init(e,"v");var n=t.Variable._map;n&&(n[this.name]=this)},isExternal:!0}),t.DummyVariable=t.inherit({_t:"c.DummyVariable","extends":t.AbstractVariable,initialize:function(t){this._init(t,"d")},isDummy:!0,isRestricted:!0,value:"dummy"}),t.ObjectiveVariable=t.inherit({_t:"c.ObjectiveVariable","extends":t.AbstractVariable,initialize:function(t){this._init(t,"o")},value:"obj"}),t.SlackVariable=t.inherit({_t:"c.SlackVariable","extends":t.AbstractVariable,initialize:function(t){this._init(t,"s")},isPivotable:!0,isRestricted:!0,value:"slack"})}(this.c||e.parent.exports||{}),function(t){"use strict";t.Point=t.inherit({initialize:function(e,n,i){if(e instanceof t.Variable)this._x=e;else{var r={value:e};i&&(r.name="x"+i),this._x=new t.Variable(r)}if(n instanceof t.Variable)this._y=n;else{var s={value:n};i&&(s.name="y"+i),this._y=new t.Variable(s)}},get x(){return this._x},set x(e){e instanceof t.Variable?this._x=e:this._x.value=e},get y(){return this._y},set y(e){e instanceof t.Variable?this._y=e:this._y.value=e},toString:function(){return"("+this.x+", "+this.y+")"}})}(this.c||e.parent.exports||{}),function(t){"use strict";t.Expression=t.inherit({initialize:function(e,n,i){t.GC&&console.log("new c.Expression"),this.constant="number"!=typeof i||isNaN(i)?0:i,this.terms=new t.HashTable,e instanceof t.AbstractVariable?this.setVariable(e,"number"==typeof n?n:1):"number"==typeof e&&(isNaN(e)?console.trace():this.constant=e)},initializeFromHash:function(e,n){return t.verbose&&(console.log("*******************************"),console.log("clone c.initializeFromHash"),console.log("*******************************")),t.GC&&console.log("clone c.Expression"),this.constant=e,this.terms=n.clone(),this},multiplyMe:function(t){this.constant*=t;var e=this.terms;return e.each(function(n,i){e.set(n,i*t)}),this},clone:function(){t.verbose&&(console.log("*******************************"),console.log("clone c.Expression"),console.log("*******************************"));var e=new t.Expression;return e.initializeFromHash(this.constant,this.terms),e},times:function(e){if("number"==typeof e)return this.clone().multiplyMe(e);if(this.isConstant)return e.times(this.constant);if(e.isConstant)return this.times(e.constant);throw new t.NonExpression},plus:function(e){return e instanceof t.Expression?this.clone().addExpression(e,1):e instanceof t.Variable?this.clone().addVariable(e,1):void 0},minus:function(e){return e instanceof t.Expression?this.clone().addExpression(e,-1):e instanceof t.Variable?this.clone().addVariable(e,-1):void 0},divide:function(e){if("number"==typeof e){if(t.approx(e,0))throw new t.NonExpression;return this.times(1/e)}if(e instanceof t.Expression){if(!e.isConstant)throw new t.NonExpression;return this.times(1/e.constant)}},addExpression:function(e,n,i,r){return e instanceof t.AbstractVariable&&(e=new t.Expression(e),t.trace&&console.log("addExpression: Had to cast a var to an expression")),n=n||1,this.constant+=n*e.constant,e.terms.each(function(t,e){this.addVariable(t,e*n,i,r)},this),this},addVariable:function(e,n,i,r){null==n&&(n=1),t.trace&&console.log("c.Expression::addVariable():",e,n);var s=this.terms.get(e);if(s){var o=s+n;0==o||t.approx(o,0)?(r&&r.noteRemovedVariable(e,i),this.terms["delete"](e)):this.setVariable(e,o)}else t.approx(n,0)||(this.setVariable(e,n),r&&r.noteAddedVariable(e,i));return this},setVariable:function(t,e){return this.terms.set(t,e),this},anyPivotableVariable:function(){if(this.isConstant)throw new t.InternalError("anyPivotableVariable called on a constant");var e=this.terms.escapingEach(function(t){return t.isPivotable?{retval:t}:void 0});return e&&void 0!==e.retval?e.retval:null},substituteOut:function(e,n,i,r){t.trace&&(t.fnenterprint("CLE:substituteOut: "+e+", "+n+", "+i+", ..."),t.traceprint("this = "+this));var s=this.setVariable.bind(this),o=this.terms,a=o.get(e);o["delete"](e),this.constant+=a*n.constant,n.terms.each(function(e,n){var u=o.get(e);if(u){var l=u+a*n;t.approx(l,0)?(r.noteRemovedVariable(e,i),o["delete"](e)):s(e,l)}else s(e,a*n),r&&r.noteAddedVariable(e,i)}),t.trace&&t.traceprint("Now this is "+this)},changeSubject:function(t,e){this.setVariable(t,this.newSubject(e))},newSubject:function(e){t.trace&&t.fnenterprint("newSubject:"+e);var n=1/this.terms.get(e);return this.terms["delete"](e),this.multiplyMe(-n),n},coefficientFor:function(t){return this.terms.get(t)||0},get isConstant(){return 0==this.terms.size},toString:function(){var e="",n=!1;if(!t.approx(this.constant,0)||this.isConstant){if(e+=this.constant,this.isConstant)return e;n=!0}return this.terms.each(function(t,i){n&&(e+=" + "),e+=i+"*"+t,n=!0}),e},equals:function(e){return e===this?!0:e instanceof t.Expression&&e.constant===this.constant&&e.terms.equals(this.terms)},Plus:function(t,e){return t.plus(e)},Minus:function(t,e){return t.minus(e)},Times:function(t,e){return t.times(e)},Divide:function(t,e){return t.divide(e)}})}(this.c||e.parent.exports||{}),function(t){"use strict";t.AbstractConstraint=t.inherit({initialize:function(e,n){this.hashCode=t._inc(),this.strength=e||t.Strength.required,this.weight=n||1},isEditConstraint:!1,isInequality:!1,isStayConstraint:!1,get required(){return this.strength===t.Strength.required},toString:function(){return this.strength+" {"+this.weight+"} ("+this.expression+")"}});var e=t.AbstractConstraint.prototype.toString,n=function(e,n,i){t.AbstractConstraint.call(this,n||t.Strength.strong,i),this.variable=e,this.expression=new t.Expression(e,-1,e.value)};t.EditConstraint=t.inherit({"extends":t.AbstractConstraint,initialize:function(){n.apply(this,arguments)},isEditConstraint:!0,toString:function(){return"edit:"+e.call(this)}}),t.StayConstraint=t.inherit({"extends":t.AbstractConstraint,initialize:function(){n.apply(this,arguments)},isStayConstraint:!0,toString:function(){return"stay:"+e.call(this)}});var i=t.Constraint=t.inherit({"extends":t.AbstractConstraint,initialize:function(e,n,i){t.AbstractConstraint.call(this,n,i),this.expression=e}});t.Inequality=t.inherit({"extends":t.Constraint,_cloneOrNewCle:function(e){return e.clone?e.clone():new t.Expression(e)},initialize:function(e,n,r,s,o){var a=e instanceof t.Expression,u=r instanceof t.Expression,l=e instanceof t.AbstractVariable,h=r instanceof t.AbstractVariable,c="number"==typeof e,f="number"==typeof r;if((a||c)&&h){var p=e,d=n,m=r,g=s,_=o;if(i.call(this,this._cloneOrNewCle(p),g,_),d==t.LEQ)this.expression.multiplyMe(-1),this.expression.addVariable(m);else{if(d!=t.GEQ)throw new t.InternalError("Invalid operator in c.Inequality constructor");this.expression.addVariable(m,-1)}}else if(l&&(u||f)){var p=r,d=n,m=e,g=s,_=o;if(i.call(this,this._cloneOrNewCle(p),g,_),d==t.GEQ)this.expression.multiplyMe(-1),this.expression.addVariable(m);else{if(d!=t.LEQ)throw new t.InternalError("Invalid operator in c.Inequality constructor");this.expression.addVariable(m,-1)}}else{if(a&&f){var v=e,d=n,y=r,g=s,_=o;if(i.call(this,this._cloneOrNewCle(v),g,_),d==t.LEQ)this.expression.multiplyMe(-1),this.expression.addExpression(this._cloneOrNewCle(y));else{if(d!=t.GEQ)throw new t.InternalError("Invalid operator in c.Inequality constructor");this.expression.addExpression(this._cloneOrNewCle(y),-1)}return this}if(c&&u){var v=r,d=n,y=e,g=s,_=o;if(i.call(this,this._cloneOrNewCle(v),g,_),d==t.GEQ)this.expression.multiplyMe(-1),this.expression.addExpression(this._cloneOrNewCle(y));else{if(d!=t.LEQ)throw new t.InternalError("Invalid operator in c.Inequality constructor");this.expression.addExpression(this._cloneOrNewCle(y),-1)}return this}if(a&&u){var v=e,d=n,y=r,g=s,_=o;if(i.call(this,this._cloneOrNewCle(y),g,_),d==t.GEQ)this.expression.multiplyMe(-1),this.expression.addExpression(this._cloneOrNewCle(v));else{if(d!=t.LEQ)throw new t.InternalError("Invalid operator in c.Inequality constructor");this.expression.addExpression(this._cloneOrNewCle(v),-1)}}else{if(a)return i.call(this,e,n,r);if(n==t.GEQ)i.call(this,new t.Expression(r),s,o),this.expression.multiplyMe(-1),this.expression.addVariable(e);else{if(n!=t.LEQ)throw new t.InternalError("Invalid operator in c.Inequality constructor");i.call(this,new t.Expression(r),s,o),this.expression.addVariable(e,-1)}}}},isInequality:!0,toString:function(){return i.prototype.toString.call(this)+" >= 0) id: "+this.hashCode}}),t.Equation=t.inherit({"extends":t.Constraint,initialize:function(e,n,r,s){if(e instanceof t.Expression&&!n||n instanceof t.Strength)i.call(this,e,n,r);else if(e instanceof t.AbstractVariable&&n instanceof t.Expression){var o=e,a=n,u=r,l=s;i.call(this,a.clone(),u,l),this.expression.addVariable(o,-1)}else if(e instanceof t.AbstractVariable&&"number"==typeof n){var o=e,h=n,u=r,l=s;i.call(this,new t.Expression(h),u,l),this.expression.addVariable(o,-1)}else if(e instanceof t.Expression&&n instanceof t.AbstractVariable){var a=e,o=n,u=r,l=s;i.call(this,a.clone(),u,l),this.expression.addVariable(o,-1)}else{if(!(e instanceof t.Expression||e instanceof t.AbstractVariable||"number"==typeof e)||!(n instanceof t.Expression||n instanceof t.AbstractVariable||"number"==typeof n))throw"Bad initializer to c.Equation";e=e instanceof t.Expression?e.clone():new t.Expression(e),n=n instanceof t.Expression?n.clone():new t.Expression(n),i.call(this,e,r,s),this.expression.addExpression(n,-1)}t.assert(this.strength instanceof t.Strength,"_strength not set")},toString:function(){return i.prototype.toString.call(this)+" = 0)"}})}(this.c||e.parent.exports||{}),function(t){"use strict";t.EditInfo=t.inherit({initialize:function(t,e,n,i,r){this.constraint=t,this.editPlus=e,this.editMinus=n,this.prevEditConstant=i,this.index=r},toString:function(){return"<cn="+this.constraint+", ep="+this.editPlus+", em="+this.editMinus+", pec="+this.prevEditConstant+", index="+this.index+">"}})}(this.c||e.parent.exports||{}),function(t){"use strict";t.Tableau=t.inherit({initialize:function(){this.columns=new t.HashTable,this.rows=new t.HashTable,this._infeasibleRows=new t.HashSet,this._externalRows=new t.HashSet,this._externalParametricVars=new t.HashSet},noteRemovedVariable:function(e,n){t.trace&&console.log("c.Tableau::noteRemovedVariable: ",e,n);var i=this.columns.get(e);n&&i&&i["delete"](n)},noteAddedVariable:function(t,e){e&&this.insertColVar(t,e)},getInternalInfo:function(){var t="Tableau Information:\n";return t+="Rows: "+this.rows.size,t+=" (= "+(this.rows.size-1)+" constraints)",t+="\nColumns: "+this.columns.size,t+="\nInfeasible Rows: "+this._infeasibleRows.size,t+="\nExternal basic variables: "+this._externalRows.size,t+="\nExternal parametric variables: ",t+=this._externalParametricVars.size,t+="\n"},toString:function(){var t="Tableau:\n";return this.rows.each(function(e,n){t+=e,t+=" <==> ",t+=n,t+="\n"}),t+="\nColumns:\n",t+=this.columns,t+="\nInfeasible rows: ",t+=this._infeasibleRows,t+="External basic variables: ",t+=this._externalRows,t+="External parametric variables: ",t+=this._externalParametricVars},insertColVar:function(e,n){var i=this.columns.get(e);i||(i=new t.HashSet,this.columns.set(e,i)),i.add(n)},addRow:function(e,n){t.trace&&t.fnenterprint("addRow: "+e+", "+n),this.rows.set(e,n),n.terms.each(function(t){this.insertColVar(t,e),t.isExternal&&this._externalParametricVars.add(t)},this),e.isExternal&&this._externalRows.add(e),t.trace&&t.traceprint(""+this)},removeColumn:function(e){t.trace&&t.fnenterprint("removeColumn:"+e);var n=this.columns.get(e);n?(this.columns["delete"](e),n.each(function(t){var n=this.rows.get(t);n.terms["delete"](e)},this)):t.trace&&console.log("Could not find var",e,"in columns"),e.isExternal&&(this._externalRows["delete"](e),this._externalParametricVars["delete"](e))},removeRow:function(e){t.trace&&t.fnenterprint("removeRow:"+e);var n=this.rows.get(e);return t.assert(null!=n),n.terms.each(function(n){var i=this.columns.get(n);null!=i&&(t.trace&&console.log("removing from varset:",e),i["delete"](e))},this),this._infeasibleRows["delete"](e),e.isExternal&&this._externalRows["delete"](e),this.rows["delete"](e),t.trace&&t.fnexitprint("returning "+n),n},substituteOut:function(e,n){t.trace&&t.fnenterprint("substituteOut:"+e+", "+n),t.trace&&t.traceprint(""+this);var i=this.columns.get(e);i.each(function(t){var i=this.rows.get(t);i.substituteOut(e,n,t,this),t.isRestricted&&0>i.constant&&this._infeasibleRows.add(t)},this),e.isExternal&&(this._externalRows.add(e),this._externalParametricVars["delete"](e)),this.columns["delete"](e)},columnsHasKey:function(t){return!!this.columns.get(t)}})}(this.c||e.parent.exports||{}),function(t){var e=t.Tableau,n=e.prototype,i=1e-8,r=t.Strength.weak;t.SimplexSolver=t.inherit({"extends":t.Tableau,initialize:function(){t.Tableau.call(this),this._stayMinusErrorVars=[],this._stayPlusErrorVars=[],this._errorVars=new t.HashTable,this._markerVars=new t.HashTable,this._objective=new t.ObjectiveVariable({name:"Z"}),this._editVarMap=new t.HashTable,this._editVarList=[],this._slackCounter=0,this._artificialCounter=0,this._dummyCounter=0,this.autoSolve=!0,this._fNeedsSolving=!1,this._optimizeCount=0,this.rows.set(this._objective,new t.Expression),this._stkCedcns=[0],t.trace&&t.traceprint("objective expr == "+this.rows.get(this._objective))},addLowerBound:function(e,n){var i=new t.Inequality(e,t.GEQ,new t.Expression(n));return this.addConstraint(i)},addUpperBound:function(e,n){var i=new t.Inequality(e,t.LEQ,new t.Expression(n));return this.addConstraint(i)},addBounds:function(t,e,n){return this.addLowerBound(t,e),this.addUpperBound(t,n),this},add:function(){for(var t=0;arguments.length>t;t++)this.addConstraint(arguments[t]);return this},addConstraint:function(e){t.trace&&t.fnenterprint("addConstraint: "+e);var n=Array(2),i=Array(1),r=this.newExpression(e,n,i);if(i=i[0],this.tryAddingDirectly(r)||this.addWithArtificialVariable(r),
this._fNeedsSolving=!0,e.isEditConstraint){var s=this._editVarMap.size,o=n[0],a=n[1];!o instanceof t.SlackVariable&&console.warn("cvEplus not a slack variable =",o),!a instanceof t.SlackVariable&&console.warn("cvEminus not a slack variable =",a),t.debug&&console.log("new c.EditInfo("+e+", "+o+", "+a+", "+i+", "+s+")");var u=new t.EditInfo(e,o,a,i,s);this._editVarMap.set(e.variable,u),this._editVarList[s]={v:e.variable,info:u}}return this.autoSolve&&(this.optimize(this._objective),this._setExternalVariables()),this},addConstraintNoException:function(e){t.trace&&t.fnenterprint("addConstraintNoException: "+e);try{return this.addConstraint(e),!0}catch(n){return!1}},addEditVar:function(e,n){return t.trace&&t.fnenterprint("addEditVar: "+e+" @ "+n),this.addConstraint(new t.EditConstraint(e,n||t.Strength.strong))},beginEdit:function(){return t.assert(this._editVarMap.size>0,"_editVarMap.size > 0"),this._infeasibleRows.clear(),this._resetStayConstants(),this._stkCedcns.push(this._editVarMap.size),this},endEdit:function(){return t.assert(this._editVarMap.size>0,"_editVarMap.size > 0"),this.resolve(),this._stkCedcns.pop(),this.removeEditVarsTo(this._stkCedcns[this._stkCedcns.length-1]),this},removeAllEditVars:function(){return this.removeEditVarsTo(0)},removeEditVarsTo:function(e){try{for(var n=this._editVarList.length,i=e;n>i;i++)this._editVarList[i]&&this.removeConstraint(this._editVarMap.get(this._editVarList[i].v).constraint);return this._editVarList.length=e,t.assert(this._editVarMap.size==e,"_editVarMap.size == n"),this}catch(r){throw new t.InternalError("Constraint not found in removeEditVarsTo")}},addPointStays:function(e){return t.trace&&console.log("addPointStays",e),e.forEach(function(t,e){this.addStay(t.x,r,Math.pow(2,e)),this.addStay(t.y,r,Math.pow(2,e))},this),this},addStay:function(e,n,i){var s=new t.StayConstraint(e,n||r,i||1);return this.addConstraint(s)},removeConstraint:function(t){return this.removeConstraintInternal(t),this},removeConstraintInternal:function(e){t.trace&&t.fnenterprint("removeConstraintInternal: "+e),t.trace&&t.traceprint(""+this),this._fNeedsSolving=!0,this._resetStayConstants();var n=this.rows.get(this._objective),i=this._errorVars.get(e);t.trace&&t.traceprint("eVars == "+i),null!=i&&i.each(function(r){var s=this.rows.get(r);null==s?n.addVariable(r,-e.weight*e.strength.symbolicWeight.value,this._objective,this):n.addExpression(s,-e.weight*e.strength.symbolicWeight.value,this._objective,this),t.trace&&t.traceprint("now eVars == "+i)},this);var r=this._markerVars.get(e);if(this._markerVars["delete"](e),null==r)throw new t.InternalError("Constraint not found in removeConstraintInternal");if(t.trace&&t.traceprint("Looking to remove var "+r),null==this.rows.get(r)){var s=this.columns.get(r);t.trace&&t.traceprint("Must pivot -- columns are "+s);var o=null,a=0;s.each(function(e){if(e.isRestricted){var n=this.rows.get(e),i=n.coefficientFor(r);if(t.trace&&t.traceprint("Marker "+r+"'s coefficient in "+n+" is "+i),0>i){var s=-n.constant/i;(null==o||a>s||t.approx(s,a)&&e.hashCode<o.hashCode)&&(a=s,o=e)}}},this),null==o&&(t.trace&&t.traceprint("exitVar is still null"),s.each(function(t){if(t.isRestricted){var e=this.rows.get(t),n=e.coefficientFor(r),i=e.constant/n;(null==o||a>i)&&(a=i,o=t)}},this)),null==o&&(0==s.size?this.removeColumn(r):s.escapingEach(function(t){return t!=this._objective?(o=t,{brk:!0}):void 0},this)),null!=o&&this.pivot(r,o)}if(null!=this.rows.get(r)&&this.removeRow(r),null!=i&&i.each(function(t){t!=r&&this.removeColumn(t)},this),e.isStayConstraint){if(null!=i)for(var u=0;this._stayPlusErrorVars.length>u;u++)i["delete"](this._stayPlusErrorVars[u]),i["delete"](this._stayMinusErrorVars[u])}else if(e.isEditConstraint){t.assert(null!=i,"eVars != null");var l=this._editVarMap.get(e.variable);this.removeColumn(l.editMinus),this._editVarMap["delete"](e.variable)}return null!=i&&this._errorVars["delete"](i),this.autoSolve&&(this.optimize(this._objective),this._setExternalVariables()),this},reset:function(){throw t.trace&&t.fnenterprint("reset"),new t.InternalError("reset not implemented")},resolveArray:function(e){t.trace&&t.fnenterprint("resolveArray"+e);var n=e.length;this._editVarMap.each(function(t,i){var r=i.index;n>r&&this.suggestValue(t,e[r])},this),this.resolve()},resolvePair:function(t,e){this.suggestValue(this._editVarList[0].v,t),this.suggestValue(this._editVarList[1].v,e),this.resolve()},resolve:function(){t.trace&&t.fnenterprint("resolve()"),this.dualOptimize(),this._setExternalVariables(),this._infeasibleRows.clear(),this._resetStayConstants()},suggestValue:function(e,n){t.trace&&console.log("suggestValue("+e+", "+n+")");var i=this._editVarMap.get(e);if(!i)throw new t.Error("suggestValue for variable "+e+", but var is not an edit variable");var r=n-i.prevEditConstant;return i.prevEditConstant=n,this.deltaEditConstant(r,i.editPlus,i.editMinus),this},solve:function(){return this._fNeedsSolving&&(this.optimize(this._objective),this._setExternalVariables()),this},setEditedValue:function(e,n){if(!this.columnsHasKey(e)&&null==this.rows.get(e))return e.value=n,this;if(!t.approx(n,e.value)){this.addEditVar(e),this.beginEdit();try{this.suggestValue(e,n)}catch(i){throw new t.InternalError("Error in setEditedValue")}this.endEdit()}return this},addVar:function(e){if(!this.columnsHasKey(e)&&null==this.rows.get(e)){try{this.addStay(e)}catch(n){throw new t.InternalError("Error in addVar -- required failure is impossible")}t.trace&&t.traceprint("added initial stay on "+e)}return this},getInternalInfo:function(){var t=n.getInternalInfo.call(this);return t+="\nSolver info:\n",t+="Stay Error Variables: ",t+=this._stayPlusErrorVars.length+this._stayMinusErrorVars.length,t+=" ("+this._stayPlusErrorVars.length+" +, ",t+=this._stayMinusErrorVars.length+" -)\n",t+="Edit Variables: "+this._editVarMap.size,t+="\n"},getDebugInfo:function(){return""+this+this.getInternalInfo()+"\n"},toString:function(){var t=n.getInternalInfo.call(this);return t+="\n_stayPlusErrorVars: ",t+="["+this._stayPlusErrorVars+"]",t+="\n_stayMinusErrorVars: ",t+="["+this._stayMinusErrorVars+"]",t+="\n",t+="_editVarMap:\n"+this._editVarMap,t+="\n"},getConstraintMap:function(){return this._markerVars},addWithArtificialVariable:function(e){t.trace&&t.fnenterprint("addWithArtificialVariable: "+e);var n=new t.SlackVariable({value:++this._artificialCounter,prefix:"a"}),i=new t.ObjectiveVariable({name:"az"}),r=e.clone();t.trace&&t.traceprint("before addRows:\n"+this),this.addRow(i,r),this.addRow(n,e),t.trace&&t.traceprint("after addRows:\n"+this),this.optimize(i);var s=this.rows.get(i);if(t.trace&&t.traceprint("azTableauRow.constant == "+s.constant),!t.approx(s.constant,0))throw this.removeRow(i),this.removeColumn(n),new t.RequiredFailure;var o=this.rows.get(n);if(null!=o){if(o.isConstant)return this.removeRow(n),void this.removeRow(i);var a=o.anyPivotableVariable();this.pivot(a,n)}t.assert(null==this.rows.get(n),"rowExpression(av) == null"),this.removeColumn(n),this.removeRow(i)},tryAddingDirectly:function(e){t.trace&&t.fnenterprint("tryAddingDirectly: "+e);var n=this.chooseSubject(e);return null==n?(t.trace&&t.fnexitprint("returning false"),!1):(e.newSubject(n),this.columnsHasKey(n)&&this.substituteOut(n,e),this.addRow(n,e),t.trace&&t.fnexitprint("returning true"),!0)},chooseSubject:function(e){t.trace&&t.fnenterprint("chooseSubject: "+e);var n=null,i=!1,r=!1,s=e.terms,o=s.escapingEach(function(t,e){if(i){if(!t.isRestricted&&!this.columnsHasKey(t))return{retval:t}}else if(t.isRestricted){if(!r&&!t.isDummy&&0>e){var s=this.columns.get(t);(null==s||1==s.size&&this.columnsHasKey(this._objective))&&(n=t,r=!0)}}else n=t,i=!0},this);if(o&&void 0!==o.retval)return o.retval;if(null!=n)return n;var a=0,o=s.escapingEach(function(t,e){return t.isDummy?void(this.columnsHasKey(t)||(n=t,a=e)):{retval:null}},this);if(o&&void 0!==o.retval)return o.retval;if(!t.approx(e.constant,0))throw new t.RequiredFailure;return a>0&&e.multiplyMe(-1),n},deltaEditConstant:function(e,n,i){t.trace&&t.fnenterprint("deltaEditConstant :"+e+", "+n+", "+i);var r=this.rows.get(n);if(null!=r)return r.constant+=e,void(0>r.constant&&this._infeasibleRows.add(n));var s=this.rows.get(i);if(null!=s)return s.constant+=-e,void(0>s.constant&&this._infeasibleRows.add(i));var o=this.columns.get(i);o||console.log("columnVars is null -- tableau is:\n"+this),o.each(function(t){var n=this.rows.get(t),r=n.coefficientFor(i);n.constant+=r*e,t.isRestricted&&0>n.constant&&this._infeasibleRows.add(t)},this)},dualOptimize:function(){t.trace&&t.fnenterprint("dualOptimize:");for(var e=this.rows.get(this._objective);this._infeasibleRows.size;){var n=this._infeasibleRows.values()[0];this._infeasibleRows["delete"](n);var i=null,r=this.rows.get(n);if(r&&0>r.constant){var s,o=Number.MAX_VALUE,a=r.terms;if(a.each(function(n,r){if(r>0&&n.isPivotable){var a=e.coefficientFor(n);s=a/r,(o>s||t.approx(s,o)&&n.hashCode<i.hashCode)&&(i=n,o=s)}}),o==Number.MAX_VALUE)throw new t.InternalError("ratio == nil (MAX_VALUE) in dualOptimize");this.pivot(i,n)}}},newExpression:function(e,n,i){t.trace&&(t.fnenterprint("newExpression: "+e),t.traceprint("cn.isInequality == "+e.isInequality),t.traceprint("cn.required == "+e.required));var r=e.expression,s=new t.Expression(r.constant),o=new t.SlackVariable,a=new t.DummyVariable,u=new t.SlackVariable,l=new t.SlackVariable,h=r.terms;if(h.each(function(t,e){var n=this.rows.get(t);n?s.addExpression(n,e):s.addVariable(t,e)},this),e.isInequality){if(t.trace&&t.traceprint("Inequality, adding slack"),++this._slackCounter,o=new t.SlackVariable({value:this._slackCounter,prefix:"s"}),s.setVariable(o,-1),this._markerVars.set(e,o),!e.required){++this._slackCounter,u=new t.SlackVariable({value:this._slackCounter,prefix:"em"}),s.setVariable(u,1);var c=this.rows.get(this._objective);c.setVariable(u,e.strength.symbolicWeight.value*e.weight),this.insertErrorVar(e,u),this.noteAddedVariable(u,this._objective)}}else if(e.required)t.trace&&t.traceprint("Equality, required"),++this._dummyCounter,a=new t.DummyVariable({value:this._dummyCounter,prefix:"d"}),s.setVariable(a,1),this._markerVars.set(e,a),t.trace&&t.traceprint("Adding dummyVar == d"+this._dummyCounter);else{t.trace&&t.traceprint("Equality, not required"),++this._slackCounter,l=new t.SlackVariable({value:this._slackCounter,prefix:"ep"}),u=new t.SlackVariable({value:this._slackCounter,prefix:"em"}),s.setVariable(l,-1),s.setVariable(u,1),this._markerVars.set(e,l);var c=this.rows.get(this._objective);t.trace&&console.log(c);var f=e.strength.symbolicWeight.value*e.weight;0==f&&(t.trace&&t.traceprint("cn == "+e),t.trace&&t.traceprint("adding "+l+" and "+u+" with swCoeff == "+f)),c.setVariable(l,f),this.noteAddedVariable(l,this._objective),c.setVariable(u,f),this.noteAddedVariable(u,this._objective),this.insertErrorVar(e,u),this.insertErrorVar(e,l),e.isStayConstraint?(this._stayPlusErrorVars.push(l),this._stayMinusErrorVars.push(u)):e.isEditConstraint&&(n[0]=l,n[1]=u,i[0]=r.constant)}return 0>s.constant&&s.multiplyMe(-1),t.trace&&t.fnexitprint("returning "+s),s},optimize:function(e){t.trace&&t.fnenterprint("optimize: "+e),t.trace&&t.traceprint(""+this),this._optimizeCount++;var n=this.rows.get(e);t.assert(null!=n,"zRow != null");for(var r,s,o=null,a=null;;){if(r=0,s=n.terms,s.escapingEach(function(t,e){return t.isPivotable&&r>e?(r=e,o=t,{brk:1}):void 0},this),r>=-i)return;t.trace&&console.log("entryVar:",o,"objectiveCoeff:",r);var u=Number.MAX_VALUE,l=this.columns.get(o),h=0;if(l.each(function(e){if(t.trace&&t.traceprint("Checking "+e),e.isPivotable){var n=this.rows.get(e),i=n.coefficientFor(o);t.trace&&t.traceprint("pivotable, coeff = "+i),0>i&&(h=-n.constant/i,(u>h||t.approx(h,u)&&e.hashCode<a.hashCode)&&(u=h,a=e))}},this),u==Number.MAX_VALUE)throw new t.InternalError("Objective function is unbounded in optimize");this.pivot(o,a),t.trace&&t.traceprint(""+this)}},pivot:function(e,n){t.trace&&console.log("pivot: ",e,n);var i=!1;i&&console.time(" SimplexSolver::pivot"),null==e&&console.warn("pivot: entryVar == null"),null==n&&console.warn("pivot: exitVar == null"),i&&console.time("  removeRow");var r=this.removeRow(n);i&&console.timeEnd("  removeRow"),i&&console.time("  changeSubject"),r.changeSubject(n,e),i&&console.timeEnd("  changeSubject"),i&&console.time("  substituteOut"),this.substituteOut(e,r),i&&console.timeEnd("  substituteOut"),i&&console.time("  addRow"),this.addRow(e,r),i&&console.timeEnd("  addRow"),i&&console.timeEnd(" SimplexSolver::pivot")},_resetStayConstants:function(){t.trace&&console.log("_resetStayConstants");for(var e=0;this._stayPlusErrorVars.length>e;e++){var n=this.rows.get(this._stayPlusErrorVars[e]);null==n&&(n=this.rows.get(this._stayMinusErrorVars[e])),null!=n&&(n.constant=0)}},_setExternalVariables:function(){t.trace&&t.fnenterprint("_setExternalVariables:"),t.trace&&t.traceprint(""+this),this._externalParametricVars.each(function(e){null!=this.rows.get(e)?t.trace&&console.log("Error: variable"+e+" in _externalParametricVars is basic"):e.value=0},this),this._externalRows.each(function(t){var e=this.rows.get(t);t.value!=e.constant&&(t.value=e.constant)},this),this._fNeedsSolving=!1,this.onsolved()},onsolved:function(){},insertErrorVar:function(e,n){t.trace&&t.fnenterprint("insertErrorVar:"+e+", "+n);var i=this._errorVars.get(n);i||(i=new t.HashSet,this._errorVars.set(e,i)),i.add(n)}})}(this.c||e.parent.exports||{}),function(t){"use strict";t.Timer=t.inherit({initialize:function(){this.isRunning=!1,this._elapsedMs=0},start:function(){return this.isRunning=!0,this._startReading=new Date,this},stop:function(){return this.isRunning=!1,this._elapsedMs+=new Date-this._startReading,this},reset:function(){return this.isRunning=!1,this._elapsedMs=0,this},elapsedTime:function(){return this.isRunning?(this._elapsedMs+(new Date-this._startReading))/1e3:this._elapsedMs/1e3}})}(this.c||e.parent.exports||{}),__cassowary_parser=function(){function t(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var e={parse:function(e,n){function i(t){H>F||(F>H&&(H=F,k=[]),k.push(t))}function r(){var t,e,n,i,r;if(i=F,r=F,t=v(),null!==t){if(n=s(),null!==n)for(e=[];null!==n;)e.push(n),n=s();else e=null;null!==e?(n=v(),null!==n?t=[t,e,n]:(t=null,F=r)):(t=null,F=r)}else t=null,F=r;return null!==t&&(t=function(t,e){return e}(i,t[1])),null===t&&(F=i),t}function s(){var t,e,n,i;return n=F,i=F,t=M(),null!==t?(e=c(),null!==e?t=[t,e]:(t=null,F=i)):(t=null,F=i),null!==t&&(t=function(t,e){return e}(n,t[0])),null===t&&(F=n),t}function o(){var t;return e.length>F?(t=e.charAt(F),F++):(t=null,0===U&&i("any character")),t}function a(){var t;return/^[a-zA-Z]/.test(e.charAt(F))?(t=e.charAt(F),F++):(t=null,0===U&&i("[a-zA-Z]")),null===t&&(36===e.charCodeAt(F)?(t="$",F++):(t=null,0===U&&i('"$"')),null===t&&(95===e.charCodeAt(F)?(t="_",F++):(t=null,0===U&&i('"_"')))),t}function u(){var t;return U++,/^[\t\x0B\f \xA0\uFEFF]/.test(e.charAt(F))?(t=e.charAt(F),F++):(t=null,0===U&&i("[\\t\\x0B\\f \\xA0\\uFEFF]")),U--,0===U&&null===t&&i("whitespace"),t}function l(){var t;return/^[\n\r\u2028\u2029]/.test(e.charAt(F))?(t=e.charAt(F),F++):(t=null,0===U&&i("[\\n\\r\\u2028\\u2029]")),t}function h(){var t;return U++,10===e.charCodeAt(F)?(t="\n",F++):(t=null,0===U&&i('"\\n"')),null===t&&("\r\n"===e.substr(F,2)?(t="\r\n",F+=2):(t=null,0===U&&i('"\\r\\n"')),null===t&&(13===e.charCodeAt(F)?(t="\r",F++):(t=null,0===U&&i('"\\r"')),null===t&&(8232===e.charCodeAt(F)?(t="\u2028",F++):(t=null,0===U&&i('"\\u2028"')),null===t&&(8233===e.charCodeAt(F)?(t="\u2029",F++):(t=null,0===U&&i('"\\u2029"')))))),U--,0===U&&null===t&&i("end of line"),t}function c(){var t,n,r;return r=F,t=v(),null!==t?(59===e.charCodeAt(F)?(n=";",F++):(n=null,0===U&&i('";"')),null!==n?t=[t,n]:(t=null,F=r)):(t=null,F=r),null===t&&(r=F,t=_(),null!==t?(n=h(),null!==n?t=[t,n]:(t=null,F=r)):(t=null,F=r),null===t&&(r=F,t=v(),null!==t?(n=f(),null!==n?t=[t,n]:(t=null,F=r)):(t=null,F=r))),t}function f(){var t,n;return n=F,U++,e.length>F?(t=e.charAt(F),F++):(t=null,0===U&&i("any character")),U--,null===t?t="":(t=null,F=n),t}function p(){var t;return U++,t=d(),null===t&&(t=g()),U--,0===U&&null===t&&i("comment"),t}function d(){var t,n,r,s,a,u,l;if(a=F,"/*"===e.substr(F,2)?(t="/*",F+=2):(t=null,0===U&&i('"/*"')),null!==t){for(n=[],u=F,l=F,U++,"*/"===e.substr(F,2)?(r="*/",F+=2):(r=null,0===U&&i('"*/"')),U--,null===r?r="":(r=null,F=l),null!==r?(s=o(),null!==s?r=[r,s]:(r=null,F=u)):(r=null,F=u);null!==r;)n.push(r),u=F,l=F,U++,"*/"===e.substr(F,2)?(r="*/",F+=2):(r=null,0===U&&i('"*/"')),U--,null===r?r="":(r=null,F=l),null!==r?(s=o(),null!==s?r=[r,s]:(r=null,F=u)):(r=null,F=u);null!==n?("*/"===e.substr(F,2)?(r="*/",F+=2):(r=null,0===U&&i('"*/"')),null!==r?t=[t,n,r]:(t=null,F=a)):(t=null,F=a)}else t=null,F=a;return t}function m(){var t,n,r,s,a,u,h;if(a=F,"/*"===e.substr(F,2)?(t="/*",F+=2):(t=null,0===U&&i('"/*"')),null!==t){for(n=[],u=F,h=F,U++,"*/"===e.substr(F,2)?(r="*/",F+=2):(r=null,0===U&&i('"*/"')),null===r&&(r=l()),U--,null===r?r="":(r=null,F=h),null!==r?(s=o(),null!==s?r=[r,s]:(r=null,F=u)):(r=null,F=u);null!==r;)n.push(r),u=F,h=F,U++,"*/"===e.substr(F,2)?(r="*/",F+=2):(r=null,0===U&&i('"*/"')),null===r&&(r=l()),U--,null===r?r="":(r=null,F=h),null!==r?(s=o(),null!==s?r=[r,s]:(r=null,F=u)):(r=null,F=u);null!==n?("*/"===e.substr(F,2)?(r="*/",F+=2):(r=null,0===U&&i('"*/"')),null!==r?t=[t,n,r]:(t=null,F=a)):(t=null,F=a)}else t=null,F=a;return t}function g(){var t,n,r,s,a,u,h;if(a=F,"//"===e.substr(F,2)?(t="//",F+=2):(t=null,0===U&&i('"//"')),null!==t){for(n=[],u=F,h=F,U++,r=l(),U--,null===r?r="":(r=null,F=h),null!==r?(s=o(),null!==s?r=[r,s]:(r=null,F=u)):(r=null,F=u);null!==r;)n.push(r),u=F,h=F,U++,r=l(),U--,null===r?r="":(r=null,F=h),null!==r?(s=o(),null!==s?r=[r,s]:(r=null,F=u)):(r=null,F=u);null!==n?t=[t,n]:(t=null,F=a)}else t=null,F=a;return t}function _(){var t,e;for(t=[],e=u(),null===e&&(e=m(),null===e&&(e=g()));null!==e;)t.push(e),e=u(),null===e&&(e=m(),null===e&&(e=g()));return t}function v(){var t,e;for(t=[],e=u(),null===e&&(e=h(),null===e&&(e=p()));null!==e;)t.push(e),e=u(),null===e&&(e=h(),null===e&&(e=p()));return t}function y(){var t,e;return e=F,t=E(),null===t&&(t=b()),null!==t&&(t=function(t,e){return{type:"NumericLiteral",value:e}}(e,t)),null===t&&(F=e),t}function b(){var t,n,r;if(r=F,/^[0-9]/.test(e.charAt(F))?(n=e.charAt(F),F++):(n=null,0===U&&i("[0-9]")),null!==n)for(t=[];null!==n;)t.push(n),/^[0-9]/.test(e.charAt(F))?(n=e.charAt(F),F++):(n=null,0===U&&i("[0-9]"));else t=null;return null!==t&&(t=function(t,e){return parseInt(e.join(""))}(r,t)),null===t&&(F=r),t}function E(){var t,n,r,s,o;return s=F,o=F,t=b(),null!==t?(46===e.charCodeAt(F)?(n=".",F++):(n=null,0===U&&i('"."')),null!==n?(r=b(),null!==r?t=[t,n,r]:(t=null,F=o)):(t=null,F=o)):(t=null,F=o),null!==t&&(t=function(t,e){return parseFloat(e.join(""))}(s,t)),null===t&&(F=s),t}function w(){var t,n,r,s;if(s=F,/^[\-+]/.test(e.charAt(F))?(t=e.charAt(F),F++):(t=null,0===U&&i("[\\-+]")),t=null!==t?t:"",null!==t){if(/^[0-9]/.test(e.charAt(F))?(r=e.charAt(F),F++):(r=null,0===U&&i("[0-9]")),null!==r)for(n=[];null!==r;)n.push(r),/^[0-9]/.test(e.charAt(F))?(r=e.charAt(F),F++):(r=null,0===U&&i("[0-9]"));else n=null;null!==n?t=[t,n]:(t=null,F=s)}else t=null,F=s;return t}function T(){var t,e;return U++,e=F,t=C(),null!==t&&(t=function(t,e){return e}(e,t)),null===t&&(F=e),U--,0===U&&null===t&&i("identifier"),t}function C(){var t,e,n,r,s;if(U++,r=F,s=F,t=a(),null!==t){for(e=[],n=a();null!==n;)e.push(n),n=a();null!==e?t=[t,e]:(t=null,F=s)}else t=null,F=s;return null!==t&&(t=function(t,e,n){return e+n.join("")}(r,t[0],t[1])),null===t&&(F=r),U--,0===U&&null===t&&i("identifier"),t}function S(){var t,n,r,s,o,a,u;return a=F,t=T(),null!==t&&(t=function(t,e){return{type:"Variable",name:e}}(a,t)),null===t&&(F=a),null===t&&(t=y(),null===t&&(a=F,u=F,40===e.charCodeAt(F)?(t="(",F++):(t=null,0===U&&i('"("')),null!==t?(n=v(),null!==n?(r=M(),null!==r?(s=v(),null!==s?(41===e.charCodeAt(F)?(o=")",F++):(o=null,0===U&&i('")"')),null!==o?t=[t,n,r,s,o]:(t=null,F=u)):(t=null,F=u)):(t=null,F=u)):(t=null,F=u)):(t=null,F=u),null!==t&&(t=function(t,e){return e}(a,t[2])),null===t&&(F=a))),t}function A(){var t,e,n,i,r;return t=S(),null===t&&(i=F,r=F,t=O(),null!==t?(e=v(),null!==e?(n=A(),null!==n?t=[t,e,n]:(t=null,F=r)):(t=null,F=r)):(t=null,F=r),null!==t&&(t=function(t,e,n){return{type:"UnaryExpression",operator:e,expression:n}}(i,t[0],t[2])),null===t&&(F=i)),t}function O(){var t;return 43===e.charCodeAt(F)?(t="+",F++):(t=null,0===U&&i('"+"')),null===t&&(45===e.charCodeAt(F)?(t="-",F++):(t=null,0===U&&i('"-"')),null===t&&(33===e.charCodeAt(F)?(t="!",F++):(t=null,0===U&&i('"!"')))),t}function x(){var t,e,n,i,r,s,o,a,u;if(o=F,a=F,t=A(),null!==t){for(e=[],u=F,n=v(),null!==n?(i=R(),null!==i?(r=v(),null!==r?(s=A(),null!==s?n=[n,i,r,s]:(n=null,F=u)):(n=null,F=u)):(n=null,F=u)):(n=null,F=u);null!==n;)e.push(n),u=F,n=v(),null!==n?(i=R(),null!==i?(r=v(),null!==r?(s=A(),null!==s?n=[n,i,r,s]:(n=null,F=u)):(n=null,F=u)):(n=null,F=u)):(n=null,F=u);null!==e?t=[t,e]:(t=null,F=a)}else t=null,F=a;return null!==t&&(t=function(t,e,n){for(var i=e,r=0;n.length>r;r++)i={type:"MultiplicativeExpression",operator:n[r][1],left:i,right:n[r][3]};return i}(o,t[0],t[1])),null===t&&(F=o),t}function R(){var t;return 42===e.charCodeAt(F)?(t="*",F++):(t=null,0===U&&i('"*"')),null===t&&(47===e.charCodeAt(F)?(t="/",F++):(t=null,0===U&&i('"/"'))),t}function I(){var t,e,n,i,r,s,o,a,u;if(o=F,a=F,t=x(),null!==t){for(e=[],u=F,n=v(),null!==n?(i=N(),null!==i?(r=v(),null!==r?(s=x(),null!==s?n=[n,i,r,s]:(n=null,F=u)):(n=null,F=u)):(n=null,F=u)):(n=null,F=u);null!==n;)e.push(n),u=F,n=v(),null!==n?(i=N(),null!==i?(r=v(),null!==r?(s=x(),null!==s?n=[n,i,r,s]:(n=null,F=u)):(n=null,F=u)):(n=null,F=u)):(n=null,F=u);null!==e?t=[t,e]:(t=null,F=a)}else t=null,F=a;return null!==t&&(t=function(t,e,n){for(var i=e,r=0;n.length>r;r++)i={type:"AdditiveExpression",operator:n[r][1],left:i,right:n[r][3]};return i}(o,t[0],t[1])),null===t&&(F=o),t}function N(){var t;return 43===e.charCodeAt(F)?(t="+",F++):(t=null,0===U&&i('"+"')),null===t&&(45===e.charCodeAt(F)?(t="-",F++):(t=null,0===U&&i('"-"'))),t}function V(){var t,e,n,i,r,s,o,a,u;if(o=F,a=F,t=I(),null!==t){for(e=[],u=F,n=v(),null!==n?(i=L(),null!==i?(r=v(),null!==r?(s=I(),null!==s?n=[n,i,r,s]:(n=null,F=u)):(n=null,F=u)):(n=null,F=u)):(n=null,F=u);null!==n;)e.push(n),u=F,n=v(),null!==n?(i=L(),null!==i?(r=v(),null!==r?(s=I(),null!==s?n=[n,i,r,s]:(n=null,F=u)):(n=null,F=u)):(n=null,F=u)):(n=null,F=u);null!==e?t=[t,e]:(t=null,F=a)}else t=null,F=a;return null!==t&&(t=function(t,e,n){for(var i=e,r=0;n.length>r;r++)i={type:"Inequality",operator:n[r][1],left:i,right:n[r][3]};return i}(o,t[0],t[1])),null===t&&(F=o),t}function L(){var t;return"<="===e.substr(F,2)?(t="<=",F+=2):(t=null,0===U&&i('"<="')),null===t&&(">="===e.substr(F,2)?(t=">=",F+=2):(t=null,0===U&&i('">="')),null===t&&(60===e.charCodeAt(F)?(t="<",F++):(t=null,0===U&&i('"<"')),null===t&&(62===e.charCodeAt(F)?(t=">",F++):(t=null,0===U&&i('">"'))))),t}function M(){var t,n,r,s,o,a,u,l,h;if(u=F,l=F,t=V(),null!==t){for(n=[],h=F,r=v(),null!==r?("=="===e.substr(F,2)?(s="==",F+=2):(s=null,0===U&&i('"=="')),null!==s?(o=v(),null!==o?(a=V(),null!==a?r=[r,s,o,a]:(r=null,F=h)):(r=null,F=h)):(r=null,F=h)):(r=null,F=h);null!==r;)n.push(r),h=F,r=v(),null!==r?("=="===e.substr(F,2)?(s="==",F+=2):(s=null,0===U&&i('"=="')),null!==s?(o=v(),null!==o?(a=V(),null!==a?r=[r,s,o,a]:(r=null,F=h)):(r=null,F=h)):(r=null,F=h)):(r=null,F=h);null!==n?t=[t,n]:(t=null,F=l)}else t=null,F=l;return null!==t&&(t=function(t,e,n){for(var i=e,r=0;n.length>r;r++)i={type:"Equality",operator:n[r][1],left:i,right:n[r][3]};return i}(u,t[0],t[1])),null===t&&(F=u),t}function z(t){t.sort();for(var e=null,n=[],i=0;t.length>i;i++)t[i]!==e&&(n.push(t[i]),e=t[i]);return n}function D(){for(var t=1,n=1,i=!1,r=0;Math.max(F,H)>r;r++){var s=e.charAt(r);"\n"===s?(i||t++,n=1,i=!1):"\r"===s||"\u2028"===s||"\u2029"===s?(t++,n=1,i=!0):(n++,i=!1)}return{line:t,column:n}}var P={start:r,Statement:s,SourceCharacter:o,IdentifierStart:a,WhiteSpace:u,LineTerminator:l,LineTerminatorSequence:h,EOS:c,EOF:f,Comment:p,MultiLineComment:d,MultiLineCommentNoLineTerminator:m,SingleLineComment:g,_:_,__:v,Literal:y,Integer:b,Real:E,SignedInteger:w,Identifier:T,IdentifierName:C,PrimaryExpression:S,UnaryExpression:A,UnaryOperator:O,MultiplicativeExpression:x,MultiplicativeOperator:R,AdditiveExpression:I,AdditiveOperator:N,InequalityExpression:V,InequalityOperator:L,LinearExpression:M};if(void 0!==n){if(void 0===P[n])throw Error("Invalid rule name: "+t(n)+".")}else n="start";var F=0,U=0,H=0,k=[],G=P[n]();if(null===G||F!==e.length){var q=Math.max(F,H),j=e.length>q?e.charAt(q):null,W=D();throw new this.SyntaxError(z(k),j,q,W.line,W.column)}return G},toSource:function(){return this._source}};return e.SyntaxError=function(e,n,i,r,s){function o(e,n){var i,r;switch(e.length){case 0:i="end of input";break;case 1:i=e[0];break;default:i=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return r=n?t(n):"end of input","Expected "+i+" but "+r+" found."}this.name="SyntaxError",this.expected=e,this.found=n,this.message=o(e,n),this.offset=i,this.line=r,this.column=s},e.SyntaxError.prototype=Error.prototype,e}()}).call("undefined"!=typeof e?e.compiled=!0&&e:this)},{}]},{},[1])(1)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"cassowary/bin/c":2}],2:[function(t,e,n){(function(){!function(n){"use strict";try{(function(){}).bind(n)}catch(i){Object.defineProperty(Function.prototype,"bind",{value:function(t){var e=this;return function(){return e.apply(t,arguments)}},enumerable:!1,configurable:!0,writable:!0})}var r=void 0!==n.HTMLElement,s=function(t){for(var e=null;t&&t!=Object.prototype;){if(t.tagName){e=t.tagName;break}t=t.prototype}return e||"div"},o=1e-8,a={},u=function(t,e){if(t&&e){if("function"==typeof t[e])return t[e];var n=t.prototype;if(n&&"function"==typeof n[e])return n[e];if(n!==Object.prototype&&n!==Function.prototype)return"function"==typeof t.__super__?u(t.__super__,e):void 0}},l=n.c={debug:!1,trace:!1,verbose:!1,traceAdded:!1,GC:!1,GEQ:1,LEQ:2,inherit:function(t){var e=null,i=null;t["extends"]&&(i=t["extends"],delete t["extends"]),t.initialize&&(e=t.initialize,delete t.initialize);var o=e||function(){};Object.defineProperty(o,"__super__",{value:i?i:Object,enumerable:!1,configurable:!0,writable:!1}),t._t&&(a[t._t]=o);var u=o.prototype=Object.create(i?i.prototype:Object.prototype);if(this.extend(u,t),r&&i&&i.prototype instanceof n.HTMLElement){var l=o,h=s(u),c=function(t){return t.__proto__=u,l.apply(t,arguments),u.created&&t.created(),u.decorate&&t.decorate(),t};this.extend(u,{upgrade:c}),o=function(){return c(n.document.createElement(h))},o.prototype=u,this.extend(o,{ctor:l})}return o},extend:function(t,e){return this.own(e,function(n){var i=Object.getOwnPropertyDescriptor(e,n);try{"function"==typeof i.get||"function"==typeof i.set?Object.defineProperty(t,n,i):"function"==typeof i.value||"_"===n.charAt(0)?(i.writable=!0,i.configurable=!0,i.enumerable=!1,Object.defineProperty(t,n,i)):t[n]=e[n]}catch(r){}}),t},own:function(t,e,i){return Object.getOwnPropertyNames(t).forEach(e,i||n),t},traceprint:function(t){l.verbose&&console.log(t)},fnenterprint:function(t){console.log("* "+t)},fnexitprint:function(t){console.log("- "+t)},assert:function(t,e){if(!t)throw new l.InternalError("Assertion failed: "+e)},plus:function(t,e){return t instanceof l.Expression||(t=new l.Expression(t)),e instanceof l.Expression||(e=new l.Expression(e)),t.plus(e)},minus:function(t,e){return t instanceof l.Expression||(t=new l.Expression(t)),e instanceof l.Expression||(e=new l.Expression(e)),t.minus(e)},times:function(t,e){return("number"==typeof t||t instanceof l.Variable)&&(t=new l.Expression(t)),("number"==typeof e||e instanceof l.Variable)&&(e=new l.Expression(e)),t.times(e)},divide:function(t,e){return("number"==typeof t||t instanceof l.Variable)&&(t=new l.Expression(t)),("number"==typeof e||e instanceof l.Variable)&&(e=new l.Expression(e)),t.divide(e)},approx:function(t,e){if(t===e)return!0;var n,i;return n=t instanceof l.Variable?t.value:t,i=e instanceof l.Variable?e.value:e,0==n?o>Math.abs(i):0==i?o>Math.abs(n):Math.abs(n-i)<Math.abs(n)*o},_inc:function(t){return function(){return t++}}(0),parseJSON:function(t){return JSON.parse(t,function(t,e){if("object"!=typeof e||"string"!=typeof e._t)return e;var n=e._t,i=a[n];if(n&&i){var r=u(i,"fromJSON");if(r)return r(e,i)}return e})}};"function"==typeof t&&"undefined"!=typeof e&&"undefined"==typeof load&&(n.exports=l)}(this),function(t){"use strict";var e=function(t){var e=t.hashCode?t.hashCode:""+t;return e},n=function(t,e){Object.keys(t).forEach(function(n){e[n]=t[n]})},i={};t.HashTable=t.inherit({initialize:function(){this.size=0,this._store={},this._keyStrMap={},this._deleted=0},set:function(t,n){var i=e(t);this._store.hasOwnProperty(i)||this.size++,this._store[i]=n,this._keyStrMap[i]=t},get:function(t){if(!this.size)return null;t=e(t);var n=this._store[t];return void 0!==n?this._store[t]:null},clear:function(){this.size=0,this._store={},this._keyStrMap={}},_compact:function(){var t={};n(this._store,t),this._store=t},_compactThreshold:100,_perhapsCompact:function(){this._size>64||this._deleted>this._compactThreshold&&(this._compact(),this._deleted=0)},"delete":function(t){t=e(t),this._store.hasOwnProperty(t)&&(this._deleted++,delete this._store[t],this.size>0&&this.size--)},each:function(t,e){if(this.size){this._perhapsCompact();var n=this._store,i=this._keyStrMap;Object.keys(this._store).forEach(function(r){t.call(e||null,i[r],n[r])},this)}},escapingEach:function(t,e){if(this.size){this._perhapsCompact();for(var n=this,r=this._store,s=this._keyStrMap,o=i,a=Object.keys(r),u=0;a.length>u;u++)if(function(i){n._store.hasOwnProperty(i)&&(o=t.call(e||null,s[i],r[i]))}(a[u]),o){if(void 0!==o.retval)return o;if(o.brk)break}}},clone:function(){var e=new t.HashTable;return this.size&&(e.size=this.size,n(this._store,e._store),n(this._keyStrMap,e._keyStrMap)),e},equals:function(e){if(e===this)return!0;if(!(e instanceof t.HashTable)||e._size!==this._size)return!1;for(var n=Object.keys(this._store),i=0;n.length>i;i++){var r=n[i];if(this._keyStrMap[r]!==e._keyStrMap[r]||this._store[r]!==e._store[r])return!1}return!0},toString:function(){var t="";return this.each(function(e,n){t+=e+" => "+n+"\n"}),t}})}(this.c||e.parent.exports||{}),function(t){"use strict";t.HashSet=t.inherit({_t:"c.HashSet",initialize:function(){this.storage=[],this.size=0},add:function(t){var e=this.storage;e.indexOf(t),-1==e.indexOf(t)&&e.push(t),this.size=this.storage.length},values:function(){return this.storage},has:function(t){var e=this.storage;return-1!=e.indexOf(t)},"delete":function(t){var e=this.storage.indexOf(t);return-1==e?null:(this.storage.splice(e,1)[0],void(this.size=this.storage.length))},clear:function(){this.storage.length=0},each:function(t,e){this.size&&this.storage.forEach(t,e)},escapingEach:function(t,e){this.size&&this.storage.forEach(t,e)},toString:function(){var t=this.size+" {",e=!0;return this.each(function(n){e?e=!1:t+=", ",t+=n}),t+="}\n"},toJSON:function(){var t=[];return this.each(function(e){t.push(e.toJSON())}),{_t:"c.HashSet",data:t}},fromJSON:function(e){var n=new t.HashSet;return e.data&&(n.size=e.data.length,n.storage=e.data),n}})}(this.c||e.parent.exports||{}),function(t){"use strict";t.Error=t.inherit({initialize:function(t){t&&(this._description=t)},_name:"c.Error",_description:"An error has occured in Cassowary",set description(t){this._description=t},get description(){return"("+this._name+") "+this._description},get message(){return this.description},toString:function(){return this.description}});var e=function(e,n){return t.inherit({"extends":t.Error,initialize:function(){t.Error.apply(this,arguments)},_name:e||"",_description:n||""})};t.ConstraintNotFound=e("c.ConstraintNotFound","Tried to remove a constraint never added to the tableu"),
t.InternalError=e("c.InternalError"),t.NonExpression=e("c.NonExpression","The resulting expression would be non"),t.NotEnoughStays=e("c.NotEnoughStays","There are not enough stays to give specific values to every variable"),t.RequiredFailure=e("c.RequiredFailure","A required constraint cannot be satisfied"),t.TooDifficult=e("c.TooDifficult","The constraints are too difficult to solve")}(this.c||e.parent.exports||{}),function(t){"use strict";var e=1e3;t.SymbolicWeight=t.inherit({_t:"c.SymbolicWeight",initialize:function(){this.value=0;for(var t=1,n=arguments.length-1;n>=0;--n)this.value+=arguments[n]*t,t*=e},toJSON:function(){return{_t:this._t,value:this.value}}})}(this.c||e.parent.exports||{}),function(t){t.Strength=t.inherit({initialize:function(e,n,i,r){this.name=e,this.symbolicWeight=n instanceof t.SymbolicWeight?n:new t.SymbolicWeight(n,i,r)},get required(){return this===t.Strength.required},toString:function(){return this.name+(this.isRequired?"":":"+this.symbolicWeight)}}),t.Strength.required=new t.Strength("<Required>",1e3,1e3,1e3),t.Strength.strong=new t.Strength("strong",1,0,0),t.Strength.medium=new t.Strength("medium",0,1,0),t.Strength.weak=new t.Strength("weak",0,0,1)}(this.c||("undefined"!=typeof e?e.parent.exports.c:{})),function(t){"use strict";t.AbstractVariable=t.inherit({isDummy:!1,isExternal:!1,isPivotable:!1,isRestricted:!1,_init:function(e,n){this.hashCode=t._inc(),this.name=(n||"")+this.hashCode,e&&(void 0!==e.name&&(this.name=e.name),void 0!==e.value&&(this.value=e.value),void 0!==e.prefix&&(this._prefix=e.prefix))},_prefix:"",name:"",value:0,toJSON:function(){var t={};return this._t&&(t._t=this._t),this.name&&(t.name=this.name),void 0!==this.value&&(t.value=this.value),this._prefix&&(t._prefix=this._prefix),this._t&&(t._t=this._t),t},fromJSON:function(e,n){var i=new n;return t.extend(i,e),i},toString:function(){return this._prefix+"["+this.name+":"+this.value+"]"}}),t.Variable=t.inherit({_t:"c.Variable","extends":t.AbstractVariable,initialize:function(e){this._init(e,"v");var n=t.Variable._map;n&&(n[this.name]=this)},isExternal:!0}),t.DummyVariable=t.inherit({_t:"c.DummyVariable","extends":t.AbstractVariable,initialize:function(t){this._init(t,"d")},isDummy:!0,isRestricted:!0,value:"dummy"}),t.ObjectiveVariable=t.inherit({_t:"c.ObjectiveVariable","extends":t.AbstractVariable,initialize:function(t){this._init(t,"o")},value:"obj"}),t.SlackVariable=t.inherit({_t:"c.SlackVariable","extends":t.AbstractVariable,initialize:function(t){this._init(t,"s")},isPivotable:!0,isRestricted:!0,value:"slack"})}(this.c||e.parent.exports||{}),function(t){"use strict";t.Point=t.inherit({initialize:function(e,n,i){if(e instanceof t.Variable)this._x=e;else{var r={value:e};i&&(r.name="x"+i),this._x=new t.Variable(r)}if(n instanceof t.Variable)this._y=n;else{var s={value:n};i&&(s.name="y"+i),this._y=new t.Variable(s)}},get x(){return this._x},set x(e){e instanceof t.Variable?this._x=e:this._x.value=e},get y(){return this._y},set y(e){e instanceof t.Variable?this._y=e:this._y.value=e},toString:function(){return"("+this.x+", "+this.y+")"}})}(this.c||e.parent.exports||{}),function(t){"use strict";t.Expression=t.inherit({initialize:function(e,n,i){t.GC&&console.log("new c.Expression"),this.constant="number"!=typeof i||isNaN(i)?0:i,this.terms=new t.HashTable,e instanceof t.AbstractVariable?this.setVariable(e,"number"==typeof n?n:1):"number"==typeof e&&(isNaN(e)?console.trace():this.constant=e)},initializeFromHash:function(e,n){return t.verbose&&(console.log("*******************************"),console.log("clone c.initializeFromHash"),console.log("*******************************")),t.GC&&console.log("clone c.Expression"),this.constant=e,this.terms=n.clone(),this},multiplyMe:function(t){this.constant*=t;var e=this.terms;return e.each(function(n,i){e.set(n,i*t)}),this},clone:function(){t.verbose&&(console.log("*******************************"),console.log("clone c.Expression"),console.log("*******************************"));var e=new t.Expression;return e.initializeFromHash(this.constant,this.terms),e},times:function(e){if("number"==typeof e)return this.clone().multiplyMe(e);if(this.isConstant)return e.times(this.constant);if(e.isConstant)return this.times(e.constant);throw new t.NonExpression},plus:function(e){return e instanceof t.Expression?this.clone().addExpression(e,1):e instanceof t.Variable?this.clone().addVariable(e,1):void 0},minus:function(e){return e instanceof t.Expression?this.clone().addExpression(e,-1):e instanceof t.Variable?this.clone().addVariable(e,-1):void 0},divide:function(e){if("number"==typeof e){if(t.approx(e,0))throw new t.NonExpression;return this.times(1/e)}if(e instanceof t.Expression){if(!e.isConstant)throw new t.NonExpression;return this.times(1/e.constant)}},addExpression:function(e,n,i,r){return e instanceof t.AbstractVariable&&(e=new t.Expression(e),t.trace&&console.log("addExpression: Had to cast a var to an expression")),n=n||1,this.constant+=n*e.constant,e.terms.each(function(t,e){this.addVariable(t,e*n,i,r)},this),this},addVariable:function(e,n,i,r){null==n&&(n=1),t.trace&&console.log("c.Expression::addVariable():",e,n);var s=this.terms.get(e);if(s){var o=s+n;0==o||t.approx(o,0)?(r&&r.noteRemovedVariable(e,i),this.terms["delete"](e)):this.setVariable(e,o)}else t.approx(n,0)||(this.setVariable(e,n),r&&r.noteAddedVariable(e,i));return this},setVariable:function(t,e){return this.terms.set(t,e),this},anyPivotableVariable:function(){if(this.isConstant)throw new t.InternalError("anyPivotableVariable called on a constant");var e=this.terms.escapingEach(function(t){return t.isPivotable?{retval:t}:void 0});return e&&void 0!==e.retval?e.retval:null},substituteOut:function(e,n,i,r){t.trace&&(t.fnenterprint("CLE:substituteOut: "+e+", "+n+", "+i+", ..."),t.traceprint("this = "+this));var s=this.setVariable.bind(this),o=this.terms,a=o.get(e);o["delete"](e),this.constant+=a*n.constant,n.terms.each(function(e,n){var u=o.get(e);if(u){var l=u+a*n;t.approx(l,0)?(r.noteRemovedVariable(e,i),o["delete"](e)):s(e,l)}else s(e,a*n),r&&r.noteAddedVariable(e,i)}),t.trace&&t.traceprint("Now this is "+this)},changeSubject:function(t,e){this.setVariable(t,this.newSubject(e))},newSubject:function(e){t.trace&&t.fnenterprint("newSubject:"+e);var n=1/this.terms.get(e);return this.terms["delete"](e),this.multiplyMe(-n),n},coefficientFor:function(t){return this.terms.get(t)||0},get isConstant(){return 0==this.terms.size},toString:function(){var e="",n=!1;if(!t.approx(this.constant,0)||this.isConstant){if(e+=this.constant,this.isConstant)return e;n=!0}return this.terms.each(function(t,i){n&&(e+=" + "),e+=i+"*"+t,n=!0}),e},equals:function(e){return e===this?!0:e instanceof t.Expression&&e.constant===this.constant&&e.terms.equals(this.terms)},Plus:function(t,e){return t.plus(e)},Minus:function(t,e){return t.minus(e)},Times:function(t,e){return t.times(e)},Divide:function(t,e){return t.divide(e)}})}(this.c||e.parent.exports||{}),function(t){"use strict";t.AbstractConstraint=t.inherit({initialize:function(e,n){this.hashCode=t._inc(),this.strength=e||t.Strength.required,this.weight=n||1},isEditConstraint:!1,isInequality:!1,isStayConstraint:!1,get required(){return this.strength===t.Strength.required},toString:function(){return this.strength+" {"+this.weight+"} ("+this.expression+")"}});var e=t.AbstractConstraint.prototype.toString,n=function(e,n,i){t.AbstractConstraint.call(this,n||t.Strength.strong,i),this.variable=e,this.expression=new t.Expression(e,-1,e.value)};t.EditConstraint=t.inherit({"extends":t.AbstractConstraint,initialize:function(){n.apply(this,arguments)},isEditConstraint:!0,toString:function(){return"edit:"+e.call(this)}}),t.StayConstraint=t.inherit({"extends":t.AbstractConstraint,initialize:function(){n.apply(this,arguments)},isStayConstraint:!0,toString:function(){return"stay:"+e.call(this)}});var i=t.Constraint=t.inherit({"extends":t.AbstractConstraint,initialize:function(e,n,i){t.AbstractConstraint.call(this,n,i),this.expression=e}});t.Inequality=t.inherit({"extends":t.Constraint,_cloneOrNewCle:function(e){return e.clone?e.clone():new t.Expression(e)},initialize:function(e,n,r,s,o){var a=e instanceof t.Expression,u=r instanceof t.Expression,l=e instanceof t.AbstractVariable,h=r instanceof t.AbstractVariable,c="number"==typeof e,f="number"==typeof r;if((a||c)&&h){var p=e,d=n,m=r,g=s,_=o;if(i.call(this,this._cloneOrNewCle(p),g,_),d==t.LEQ)this.expression.multiplyMe(-1),this.expression.addVariable(m);else{if(d!=t.GEQ)throw new t.InternalError("Invalid operator in c.Inequality constructor");this.expression.addVariable(m,-1)}}else if(l&&(u||f)){var p=r,d=n,m=e,g=s,_=o;if(i.call(this,this._cloneOrNewCle(p),g,_),d==t.GEQ)this.expression.multiplyMe(-1),this.expression.addVariable(m);else{if(d!=t.LEQ)throw new t.InternalError("Invalid operator in c.Inequality constructor");this.expression.addVariable(m,-1)}}else{if(a&&f){var v=e,d=n,y=r,g=s,_=o;if(i.call(this,this._cloneOrNewCle(v),g,_),d==t.LEQ)this.expression.multiplyMe(-1),this.expression.addExpression(this._cloneOrNewCle(y));else{if(d!=t.GEQ)throw new t.InternalError("Invalid operator in c.Inequality constructor");this.expression.addExpression(this._cloneOrNewCle(y),-1)}return this}if(c&&u){var v=r,d=n,y=e,g=s,_=o;if(i.call(this,this._cloneOrNewCle(v),g,_),d==t.GEQ)this.expression.multiplyMe(-1),this.expression.addExpression(this._cloneOrNewCle(y));else{if(d!=t.LEQ)throw new t.InternalError("Invalid operator in c.Inequality constructor");this.expression.addExpression(this._cloneOrNewCle(y),-1)}return this}if(a&&u){var v=e,d=n,y=r,g=s,_=o;if(i.call(this,this._cloneOrNewCle(y),g,_),d==t.GEQ)this.expression.multiplyMe(-1),this.expression.addExpression(this._cloneOrNewCle(v));else{if(d!=t.LEQ)throw new t.InternalError("Invalid operator in c.Inequality constructor");this.expression.addExpression(this._cloneOrNewCle(v),-1)}}else{if(a)return i.call(this,e,n,r);if(n==t.GEQ)i.call(this,new t.Expression(r),s,o),this.expression.multiplyMe(-1),this.expression.addVariable(e);else{if(n!=t.LEQ)throw new t.InternalError("Invalid operator in c.Inequality constructor");i.call(this,new t.Expression(r),s,o),this.expression.addVariable(e,-1)}}}},isInequality:!0,toString:function(){return i.prototype.toString.call(this)+" >= 0) id: "+this.hashCode}}),t.Equation=t.inherit({"extends":t.Constraint,initialize:function(e,n,r,s){if(e instanceof t.Expression&&!n||n instanceof t.Strength)i.call(this,e,n,r);else if(e instanceof t.AbstractVariable&&n instanceof t.Expression){var o=e,a=n,u=r,l=s;i.call(this,a.clone(),u,l),this.expression.addVariable(o,-1)}else if(e instanceof t.AbstractVariable&&"number"==typeof n){var o=e,h=n,u=r,l=s;i.call(this,new t.Expression(h),u,l),this.expression.addVariable(o,-1)}else if(e instanceof t.Expression&&n instanceof t.AbstractVariable){var a=e,o=n,u=r,l=s;i.call(this,a.clone(),u,l),this.expression.addVariable(o,-1)}else{if(!(e instanceof t.Expression||e instanceof t.AbstractVariable||"number"==typeof e)||!(n instanceof t.Expression||n instanceof t.AbstractVariable||"number"==typeof n))throw"Bad initializer to c.Equation";e=e instanceof t.Expression?e.clone():new t.Expression(e),n=n instanceof t.Expression?n.clone():new t.Expression(n),i.call(this,e,r,s),this.expression.addExpression(n,-1)}t.assert(this.strength instanceof t.Strength,"_strength not set")},toString:function(){return i.prototype.toString.call(this)+" = 0)"}})}(this.c||e.parent.exports||{}),function(t){"use strict";t.EditInfo=t.inherit({initialize:function(t,e,n,i,r){this.constraint=t,this.editPlus=e,this.editMinus=n,this.prevEditConstant=i,this.index=r},toString:function(){return"<cn="+this.constraint+", ep="+this.editPlus+", em="+this.editMinus+", pec="+this.prevEditConstant+", index="+this.index+">"}})}(this.c||e.parent.exports||{}),function(t){"use strict";t.Tableau=t.inherit({initialize:function(){this.columns=new t.HashTable,this.rows=new t.HashTable,this._infeasibleRows=new t.HashSet,this._externalRows=new t.HashSet,this._externalParametricVars=new t.HashSet},noteRemovedVariable:function(e,n){t.trace&&console.log("c.Tableau::noteRemovedVariable: ",e,n);var i=this.columns.get(e);n&&i&&i["delete"](n)},noteAddedVariable:function(t,e){e&&this.insertColVar(t,e)},getInternalInfo:function(){var t="Tableau Information:\n";return t+="Rows: "+this.rows.size,t+=" (= "+(this.rows.size-1)+" constraints)",t+="\nColumns: "+this.columns.size,t+="\nInfeasible Rows: "+this._infeasibleRows.size,t+="\nExternal basic variables: "+this._externalRows.size,t+="\nExternal parametric variables: ",t+=this._externalParametricVars.size,t+="\n"},toString:function(){var t="Tableau:\n";return this.rows.each(function(e,n){t+=e,t+=" <==> ",t+=n,t+="\n"}),t+="\nColumns:\n",t+=this.columns,t+="\nInfeasible rows: ",t+=this._infeasibleRows,t+="External basic variables: ",t+=this._externalRows,t+="External parametric variables: ",t+=this._externalParametricVars},insertColVar:function(e,n){var i=this.columns.get(e);i||(i=new t.HashSet,this.columns.set(e,i)),i.add(n)},addRow:function(e,n){t.trace&&t.fnenterprint("addRow: "+e+", "+n),this.rows.set(e,n),n.terms.each(function(t){this.insertColVar(t,e),t.isExternal&&this._externalParametricVars.add(t)},this),e.isExternal&&this._externalRows.add(e),t.trace&&t.traceprint(""+this)},removeColumn:function(e){t.trace&&t.fnenterprint("removeColumn:"+e);var n=this.columns.get(e);n?(this.columns["delete"](e),n.each(function(t){var n=this.rows.get(t);n.terms["delete"](e)},this)):t.trace&&console.log("Could not find var",e,"in columns"),e.isExternal&&(this._externalRows["delete"](e),this._externalParametricVars["delete"](e))},removeRow:function(e){t.trace&&t.fnenterprint("removeRow:"+e);var n=this.rows.get(e);return t.assert(null!=n),n.terms.each(function(n){var i=this.columns.get(n);null!=i&&(t.trace&&console.log("removing from varset:",e),i["delete"](e))},this),this._infeasibleRows["delete"](e),e.isExternal&&this._externalRows["delete"](e),this.rows["delete"](e),t.trace&&t.fnexitprint("returning "+n),n},substituteOut:function(e,n){t.trace&&t.fnenterprint("substituteOut:"+e+", "+n),t.trace&&t.traceprint(""+this);var i=this.columns.get(e);i.each(function(t){var i=this.rows.get(t);i.substituteOut(e,n,t,this),t.isRestricted&&0>i.constant&&this._infeasibleRows.add(t)},this),e.isExternal&&(this._externalRows.add(e),this._externalParametricVars["delete"](e)),this.columns["delete"](e)},columnsHasKey:function(t){return!!this.columns.get(t)}})}(this.c||e.parent.exports||{}),function(t){var e=t.Tableau,n=e.prototype,i=1e-8,r=t.Strength.weak;t.SimplexSolver=t.inherit({"extends":t.Tableau,initialize:function(){t.Tableau.call(this),this._stayMinusErrorVars=[],this._stayPlusErrorVars=[],this._errorVars=new t.HashTable,this._markerVars=new t.HashTable,this._objective=new t.ObjectiveVariable({name:"Z"}),this._editVarMap=new t.HashTable,this._editVarList=[],this._slackCounter=0,this._artificialCounter=0,this._dummyCounter=0,this.autoSolve=!0,this._fNeedsSolving=!1,this._optimizeCount=0,this.rows.set(this._objective,new t.Expression),this._stkCedcns=[0],t.trace&&t.traceprint("objective expr == "+this.rows.get(this._objective))},addLowerBound:function(e,n){var i=new t.Inequality(e,t.GEQ,new t.Expression(n));return this.addConstraint(i)},addUpperBound:function(e,n){var i=new t.Inequality(e,t.LEQ,new t.Expression(n));return this.addConstraint(i)},addBounds:function(t,e,n){return this.addLowerBound(t,e),this.addUpperBound(t,n),this},add:function(){for(var t=0;arguments.length>t;t++)this.addConstraint(arguments[t]);return this},addConstraint:function(e){t.trace&&t.fnenterprint("addConstraint: "+e);var n=Array(2),i=Array(1),r=this.newExpression(e,n,i);if(i=i[0],this.tryAddingDirectly(r)||this.addWithArtificialVariable(r),this._fNeedsSolving=!0,e.isEditConstraint){var s=this._editVarMap.size,o=n[0],a=n[1];!o instanceof t.SlackVariable&&console.warn("cvEplus not a slack variable =",o),!a instanceof t.SlackVariable&&console.warn("cvEminus not a slack variable =",a),t.debug&&console.log("new c.EditInfo("+e+", "+o+", "+a+", "+i+", "+s+")");var u=new t.EditInfo(e,o,a,i,s);this._editVarMap.set(e.variable,u),this._editVarList[s]={v:e.variable,info:u}}return this.autoSolve&&(this.optimize(this._objective),this._setExternalVariables()),this},addConstraintNoException:function(e){t.trace&&t.fnenterprint("addConstraintNoException: "+e);try{return this.addConstraint(e),!0}catch(n){return!1}},addEditVar:function(e,n){return t.trace&&t.fnenterprint("addEditVar: "+e+" @ "+n),this.addConstraint(new t.EditConstraint(e,n||t.Strength.strong))},beginEdit:function(){return t.assert(this._editVarMap.size>0,"_editVarMap.size > 0"),this._infeasibleRows.clear(),this._resetStayConstants(),this._stkCedcns.push(this._editVarMap.size),this},endEdit:function(){return t.assert(this._editVarMap.size>0,"_editVarMap.size > 0"),this.resolve(),this._stkCedcns.pop(),this.removeEditVarsTo(this._stkCedcns[this._stkCedcns.length-1]),this},removeAllEditVars:function(){return this.removeEditVarsTo(0)},removeEditVarsTo:function(e){try{for(var n=this._editVarList.length,i=e;n>i;i++)this._editVarList[i]&&this.removeConstraint(this._editVarMap.get(this._editVarList[i].v).constraint);return this._editVarList.length=e,t.assert(this._editVarMap.size==e,"_editVarMap.size == n"),this}catch(r){throw new t.InternalError("Constraint not found in removeEditVarsTo")}},addPointStays:function(e){return t.trace&&console.log("addPointStays",e),e.forEach(function(t,e){this.addStay(t.x,r,Math.pow(2,e)),this.addStay(t.y,r,Math.pow(2,e))},this),this},addStay:function(e,n,i){var s=new t.StayConstraint(e,n||r,i||1);return this.addConstraint(s)},removeConstraint:function(t){return this.removeConstraintInternal(t),this},removeConstraintInternal:function(e){t.trace&&t.fnenterprint("removeConstraintInternal: "+e),t.trace&&t.traceprint(""+this),this._fNeedsSolving=!0,this._resetStayConstants();var n=this.rows.get(this._objective),i=this._errorVars.get(e);t.trace&&t.traceprint("eVars == "+i),null!=i&&i.each(function(r){var s=this.rows.get(r);null==s?n.addVariable(r,-e.weight*e.strength.symbolicWeight.value,this._objective,this):n.addExpression(s,-e.weight*e.strength.symbolicWeight.value,this._objective,this),t.trace&&t.traceprint("now eVars == "+i)},this);var r=this._markerVars.get(e);if(this._markerVars["delete"](e),null==r)throw new t.InternalError("Constraint not found in removeConstraintInternal");if(t.trace&&t.traceprint("Looking to remove var "+r),null==this.rows.get(r)){var s=this.columns.get(r);t.trace&&t.traceprint("Must pivot -- columns are "+s);var o=null,a=0;s.each(function(e){if(e.isRestricted){var n=this.rows.get(e),i=n.coefficientFor(r);if(t.trace&&t.traceprint("Marker "+r+"'s coefficient in "+n+" is "+i),0>i){var s=-n.constant/i;(null==o||a>s||t.approx(s,a)&&e.hashCode<o.hashCode)&&(a=s,o=e)}}},this),null==o&&(t.trace&&t.traceprint("exitVar is still null"),s.each(function(t){if(t.isRestricted){var e=this.rows.get(t),n=e.coefficientFor(r),i=e.constant/n;(null==o||a>i)&&(a=i,o=t)}},this)),null==o&&(0==s.size?this.removeColumn(r):s.escapingEach(function(t){return t!=this._objective?(o=t,{brk:!0}):void 0},this)),null!=o&&this.pivot(r,o)}if(null!=this.rows.get(r)&&this.removeRow(r),null!=i&&i.each(function(t){t!=r&&this.removeColumn(t)},this),e.isStayConstraint){if(null!=i)for(var u=0;this._stayPlusErrorVars.length>u;u++)i["delete"](this._stayPlusErrorVars[u]),i["delete"](this._stayMinusErrorVars[u])}else if(e.isEditConstraint){t.assert(null!=i,"eVars != null");var l=this._editVarMap.get(e.variable);this.removeColumn(l.editMinus),this._editVarMap["delete"](e.variable)}return null!=i&&this._errorVars["delete"](i),this.autoSolve&&(this.optimize(this._objective),this._setExternalVariables()),this},reset:function(){throw t.trace&&t.fnenterprint("reset"),new t.InternalError("reset not implemented")},resolveArray:function(e){t.trace&&t.fnenterprint("resolveArray"+e);var n=e.length;this._editVarMap.each(function(t,i){var r=i.index;n>r&&this.suggestValue(t,e[r])},this),this.resolve()},resolvePair:function(t,e){this.suggestValue(this._editVarList[0].v,t),this.suggestValue(this._editVarList[1].v,e),this.resolve()},resolve:function(){t.trace&&t.fnenterprint("resolve()"),this.dualOptimize(),this._setExternalVariables(),this._infeasibleRows.clear(),this._resetStayConstants()},suggestValue:function(e,n){t.trace&&console.log("suggestValue("+e+", "+n+")");var i=this._editVarMap.get(e);if(!i)throw new t.Error("suggestValue for variable "+e+", but var is not an edit variable");var r=n-i.prevEditConstant;return i.prevEditConstant=n,this.deltaEditConstant(r,i.editPlus,i.editMinus),this},solve:function(){return this._fNeedsSolving&&(this.optimize(this._objective),this._setExternalVariables()),this},setEditedValue:function(e,n){if(!this.columnsHasKey(e)&&null==this.rows.get(e))return e.value=n,this;if(!t.approx(n,e.value)){this.addEditVar(e),this.beginEdit();try{this.suggestValue(e,n)}catch(i){throw new t.InternalError("Error in setEditedValue")}this.endEdit()}return this},addVar:function(e){if(!this.columnsHasKey(e)&&null==this.rows.get(e)){try{this.addStay(e)}catch(n){throw new t.InternalError("Error in addVar -- required failure is impossible")}t.trace&&t.traceprint("added initial stay on "+e)}return this},getInternalInfo:function(){var t=n.getInternalInfo.call(this);return t+="\nSolver info:\n",t+="Stay Error Variables: ",t+=this._stayPlusErrorVars.length+this._stayMinusErrorVars.length,t+=" ("+this._stayPlusErrorVars.length+" +, ",t+=this._stayMinusErrorVars.length+" -)\n",t+="Edit Variables: "+this._editVarMap.size,t+="\n"},getDebugInfo:function(){return""+this+this.getInternalInfo()+"\n"},toString:function(){var t=n.getInternalInfo.call(this);return t+="\n_stayPlusErrorVars: ",t+="["+this._stayPlusErrorVars+"]",t+="\n_stayMinusErrorVars: ",t+="["+this._stayMinusErrorVars+"]",t+="\n",t+="_editVarMap:\n"+this._editVarMap,t+="\n"},getConstraintMap:function(){return this._markerVars},addWithArtificialVariable:function(e){t.trace&&t.fnenterprint("addWithArtificialVariable: "+e);var n=new t.SlackVariable({value:++this._artificialCounter,prefix:"a"}),i=new t.ObjectiveVariable({name:"az"}),r=e.clone();t.trace&&t.traceprint("before addRows:\n"+this),this.addRow(i,r),this.addRow(n,e),t.trace&&t.traceprint("after addRows:\n"+this),this.optimize(i);var s=this.rows.get(i);if(t.trace&&t.traceprint("azTableauRow.constant == "+s.constant),!t.approx(s.constant,0))throw this.removeRow(i),this.removeColumn(n),new t.RequiredFailure;var o=this.rows.get(n);if(null!=o){if(o.isConstant)return this.removeRow(n),void this.removeRow(i);var a=o.anyPivotableVariable();this.pivot(a,n)}t.assert(null==this.rows.get(n),"rowExpression(av) == null"),this.removeColumn(n),this.removeRow(i)},tryAddingDirectly:function(e){t.trace&&t.fnenterprint("tryAddingDirectly: "+e);var n=this.chooseSubject(e);return null==n?(t.trace&&t.fnexitprint("returning false"),!1):(e.newSubject(n),this.columnsHasKey(n)&&this.substituteOut(n,e),this.addRow(n,e),t.trace&&t.fnexitprint("returning true"),!0)},chooseSubject:function(e){t.trace&&t.fnenterprint("chooseSubject: "+e);var n=null,i=!1,r=!1,s=e.terms,o=s.escapingEach(function(t,e){if(i){if(!t.isRestricted&&!this.columnsHasKey(t))return{retval:t}}else if(t.isRestricted){if(!r&&!t.isDummy&&0>e){var s=this.columns.get(t);(null==s||1==s.size&&this.columnsHasKey(this._objective))&&(n=t,r=!0)}}else n=t,i=!0},this);if(o&&void 0!==o.retval)return o.retval;if(null!=n)return n;var a=0,o=s.escapingEach(function(t,e){return t.isDummy?void(this.columnsHasKey(t)||(n=t,a=e)):{retval:null}},this);if(o&&void 0!==o.retval)return o.retval;if(!t.approx(e.constant,0))throw new t.RequiredFailure;return a>0&&e.multiplyMe(-1),n},deltaEditConstant:function(e,n,i){t.trace&&t.fnenterprint("deltaEditConstant :"+e+", "+n+", "+i);var r=this.rows.get(n);if(null!=r)return r.constant+=e,void(0>r.constant&&this._infeasibleRows.add(n));var s=this.rows.get(i);if(null!=s)return s.constant+=-e,void(0>s.constant&&this._infeasibleRows.add(i));var o=this.columns.get(i);o||console.log("columnVars is null -- tableau is:\n"+this),o.each(function(t){var n=this.rows.get(t),r=n.coefficientFor(i);n.constant+=r*e,t.isRestricted&&0>n.constant&&this._infeasibleRows.add(t)},this)},dualOptimize:function(){t.trace&&t.fnenterprint("dualOptimize:");for(var e=this.rows.get(this._objective);this._infeasibleRows.size;){var n=this._infeasibleRows.values()[0];this._infeasibleRows["delete"](n);var i=null,r=this.rows.get(n);if(r&&0>r.constant){var s,o=Number.MAX_VALUE,a=r.terms;if(a.each(function(n,r){if(r>0&&n.isPivotable){var a=e.coefficientFor(n);s=a/r,(o>s||t.approx(s,o)&&n.hashCode<i.hashCode)&&(i=n,o=s)}}),o==Number.MAX_VALUE)throw new t.InternalError("ratio == nil (MAX_VALUE) in dualOptimize");this.pivot(i,n)}}},newExpression:function(e,n,i){t.trace&&(t.fnenterprint("newExpression: "+e),t.traceprint("cn.isInequality == "+e.isInequality),t.traceprint("cn.required == "+e.required));var r=e.expression,s=new t.Expression(r.constant),o=new t.SlackVariable,a=new t.DummyVariable,u=new t.SlackVariable,l=new t.SlackVariable,h=r.terms;if(h.each(function(t,e){var n=this.rows.get(t);n?s.addExpression(n,e):s.addVariable(t,e)},this),e.isInequality){if(t.trace&&t.traceprint("Inequality, adding slack"),++this._slackCounter,o=new t.SlackVariable({value:this._slackCounter,prefix:"s"}),s.setVariable(o,-1),this._markerVars.set(e,o),!e.required){++this._slackCounter,u=new t.SlackVariable({value:this._slackCounter,prefix:"em"}),s.setVariable(u,1);var c=this.rows.get(this._objective);c.setVariable(u,e.strength.symbolicWeight.value*e.weight),this.insertErrorVar(e,u),this.noteAddedVariable(u,this._objective)}}else if(e.required)t.trace&&t.traceprint("Equality, required"),++this._dummyCounter,a=new t.DummyVariable({value:this._dummyCounter,prefix:"d"}),s.setVariable(a,1),this._markerVars.set(e,a),t.trace&&t.traceprint("Adding dummyVar == d"+this._dummyCounter);else{t.trace&&t.traceprint("Equality, not required"),++this._slackCounter,l=new t.SlackVariable({value:this._slackCounter,prefix:"ep"}),u=new t.SlackVariable({value:this._slackCounter,prefix:"em"}),s.setVariable(l,-1),s.setVariable(u,1),this._markerVars.set(e,l);var c=this.rows.get(this._objective);t.trace&&console.log(c);var f=e.strength.symbolicWeight.value*e.weight;0==f&&(t.trace&&t.traceprint("cn == "+e),t.trace&&t.traceprint("adding "+l+" and "+u+" with swCoeff == "+f)),c.setVariable(l,f),this.noteAddedVariable(l,this._objective),c.setVariable(u,f),this.noteAddedVariable(u,this._objective),this.insertErrorVar(e,u),this.insertErrorVar(e,l),e.isStayConstraint?(this._stayPlusErrorVars.push(l),this._stayMinusErrorVars.push(u)):e.isEditConstraint&&(n[0]=l,n[1]=u,i[0]=r.constant)}return 0>s.constant&&s.multiplyMe(-1),t.trace&&t.fnexitprint("returning "+s),s},optimize:function(e){t.trace&&t.fnenterprint("optimize: "+e),t.trace&&t.traceprint(""+this),this._optimizeCount++;var n=this.rows.get(e);t.assert(null!=n,"zRow != null");for(var r,s,o=null,a=null;;){if(r=0,s=n.terms,s.escapingEach(function(t,e){return t.isPivotable&&r>e?(r=e,o=t,{brk:1}):void 0},this),r>=-i)return;t.trace&&console.log("entryVar:",o,"objectiveCoeff:",r);var u=Number.MAX_VALUE,l=this.columns.get(o),h=0;if(l.each(function(e){if(t.trace&&t.traceprint("Checking "+e),e.isPivotable){var n=this.rows.get(e),i=n.coefficientFor(o);t.trace&&t.traceprint("pivotable, coeff = "+i),0>i&&(h=-n.constant/i,(u>h||t.approx(h,u)&&e.hashCode<a.hashCode)&&(u=h,a=e))}},this),u==Number.MAX_VALUE)throw new t.InternalError("Objective function is unbounded in optimize");this.pivot(o,a),t.trace&&t.traceprint(""+this)}},pivot:function(e,n){t.trace&&console.log("pivot: ",e,n);var i=!1;i&&console.time(" SimplexSolver::pivot"),null==e&&console.warn("pivot: entryVar == null"),null==n&&console.warn("pivot: exitVar == null"),i&&console.time("  removeRow");var r=this.removeRow(n);i&&console.timeEnd("  removeRow"),i&&console.time("  changeSubject"),r.changeSubject(n,e),i&&console.timeEnd("  changeSubject"),i&&console.time("  substituteOut"),this.substituteOut(e,r),i&&console.timeEnd("  substituteOut"),i&&console.time("  addRow"),this.addRow(e,r),i&&console.timeEnd("  addRow"),i&&console.timeEnd(" SimplexSolver::pivot")},_resetStayConstants:function(){t.trace&&console.log("_resetStayConstants");for(var e=0;this._stayPlusErrorVars.length>e;e++){var n=this.rows.get(this._stayPlusErrorVars[e]);null==n&&(n=this.rows.get(this._stayMinusErrorVars[e])),null!=n&&(n.constant=0)}},_setExternalVariables:function(){t.trace&&t.fnenterprint("_setExternalVariables:"),t.trace&&t.traceprint(""+this),this._externalParametricVars.each(function(e){null!=this.rows.get(e)?t.trace&&console.log("Error: variable"+e+" in _externalParametricVars is basic"):e.value=0},this),this._externalRows.each(function(t){var e=this.rows.get(t);t.value!=e.constant&&(t.value=e.constant)},this),this._fNeedsSolving=!1,this.onsolved()},onsolved:function(){},insertErrorVar:function(e,n){t.trace&&t.fnenterprint("insertErrorVar:"+e+", "+n);var i=this._errorVars.get(n);i||(i=new t.HashSet,this._errorVars.set(e,i)),i.add(n)}})}(this.c||e.parent.exports||{}),function(t){"use strict";t.Timer=t.inherit({initialize:function(){this.isRunning=!1,this._elapsedMs=0},start:function(){return this.isRunning=!0,this._startReading=new Date,this},stop:function(){return this.isRunning=!1,this._elapsedMs+=new Date-this._startReading,this},reset:function(){return this.isRunning=!1,this._elapsedMs=0,this},elapsedTime:function(){return this.isRunning?(this._elapsedMs+(new Date-this._startReading))/1e3:this._elapsedMs/1e3}})}(this.c||e.parent.exports||{}),__cassowary_parser=function(){function t(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var e={parse:function(e,n){function i(t){H>F||(F>H&&(H=F,k=[]),k.push(t))}function r(){var t,e,n,i,r;if(i=F,r=F,t=v(),null!==t){if(n=s(),null!==n)for(e=[];null!==n;)e.push(n),n=s();else e=null;null!==e?(n=v(),null!==n?t=[t,e,n]:(t=null,F=r)):(t=null,F=r)}else t=null,F=r;return null!==t&&(t=function(t,e){return e}(i,t[1])),null===t&&(F=i),t}function s(){var t,e,n,i;return n=F,i=F,t=M(),null!==t?(e=c(),null!==e?t=[t,e]:(t=null,F=i)):(t=null,F=i),null!==t&&(t=function(t,e){return e}(n,t[0])),null===t&&(F=n),t}function o(){var t;return e.length>F?(t=e.charAt(F),F++):(t=null,0===U&&i("any character")),t}function a(){var t;return/^[a-zA-Z]/.test(e.charAt(F))?(t=e.charAt(F),F++):(t=null,0===U&&i("[a-zA-Z]")),null===t&&(36===e.charCodeAt(F)?(t="$",F++):(t=null,0===U&&i('"$"')),null===t&&(95===e.charCodeAt(F)?(t="_",F++):(t=null,0===U&&i('"_"')))),t}function u(){var t;return U++,/^[\t\x0B\f \xA0\uFEFF]/.test(e.charAt(F))?(t=e.charAt(F),F++):(t=null,0===U&&i("[\\t\\x0B\\f \\xA0\\uFEFF]")),U--,0===U&&null===t&&i("whitespace"),t}function l(){var t;return/^[\n\r\u2028\u2029]/.test(e.charAt(F))?(t=e.charAt(F),F++):(t=null,0===U&&i("[\\n\\r\\u2028\\u2029]")),t}function h(){var t;return U++,10===e.charCodeAt(F)?(t="\n",F++):(t=null,0===U&&i('"\\n"')),null===t&&("\r\n"===e.substr(F,2)?(t="\r\n",F+=2):(t=null,0===U&&i('"\\r\\n"')),null===t&&(13===e.charCodeAt(F)?(t="\r",F++):(t=null,0===U&&i('"\\r"')),null===t&&(8232===e.charCodeAt(F)?(t="\u2028",F++):(t=null,0===U&&i('"\\u2028"')),null===t&&(8233===e.charCodeAt(F)?(t="\u2029",F++):(t=null,0===U&&i('"\\u2029"')))))),U--,0===U&&null===t&&i("end of line"),t}function c(){var t,n,r;return r=F,t=v(),null!==t?(59===e.charCodeAt(F)?(n=";",F++):(n=null,0===U&&i('";"')),null!==n?t=[t,n]:(t=null,F=r)):(t=null,F=r),null===t&&(r=F,t=_(),null!==t?(n=h(),null!==n?t=[t,n]:(t=null,F=r)):(t=null,F=r),null===t&&(r=F,t=v(),null!==t?(n=f(),null!==n?t=[t,n]:(t=null,F=r)):(t=null,F=r))),t}function f(){var t,n;return n=F,U++,e.length>F?(t=e.charAt(F),F++):(t=null,0===U&&i("any character")),U--,null===t?t="":(t=null,F=n),t}function p(){var t;return U++,t=d(),null===t&&(t=g()),U--,0===U&&null===t&&i("comment"),t;

}function d(){var t,n,r,s,a,u,l;if(a=F,"/*"===e.substr(F,2)?(t="/*",F+=2):(t=null,0===U&&i('"/*"')),null!==t){for(n=[],u=F,l=F,U++,"*/"===e.substr(F,2)?(r="*/",F+=2):(r=null,0===U&&i('"*/"')),U--,null===r?r="":(r=null,F=l),null!==r?(s=o(),null!==s?r=[r,s]:(r=null,F=u)):(r=null,F=u);null!==r;)n.push(r),u=F,l=F,U++,"*/"===e.substr(F,2)?(r="*/",F+=2):(r=null,0===U&&i('"*/"')),U--,null===r?r="":(r=null,F=l),null!==r?(s=o(),null!==s?r=[r,s]:(r=null,F=u)):(r=null,F=u);null!==n?("*/"===e.substr(F,2)?(r="*/",F+=2):(r=null,0===U&&i('"*/"')),null!==r?t=[t,n,r]:(t=null,F=a)):(t=null,F=a)}else t=null,F=a;return t}function m(){var t,n,r,s,a,u,h;if(a=F,"/*"===e.substr(F,2)?(t="/*",F+=2):(t=null,0===U&&i('"/*"')),null!==t){for(n=[],u=F,h=F,U++,"*/"===e.substr(F,2)?(r="*/",F+=2):(r=null,0===U&&i('"*/"')),null===r&&(r=l()),U--,null===r?r="":(r=null,F=h),null!==r?(s=o(),null!==s?r=[r,s]:(r=null,F=u)):(r=null,F=u);null!==r;)n.push(r),u=F,h=F,U++,"*/"===e.substr(F,2)?(r="*/",F+=2):(r=null,0===U&&i('"*/"')),null===r&&(r=l()),U--,null===r?r="":(r=null,F=h),null!==r?(s=o(),null!==s?r=[r,s]:(r=null,F=u)):(r=null,F=u);null!==n?("*/"===e.substr(F,2)?(r="*/",F+=2):(r=null,0===U&&i('"*/"')),null!==r?t=[t,n,r]:(t=null,F=a)):(t=null,F=a)}else t=null,F=a;return t}function g(){var t,n,r,s,a,u,h;if(a=F,"//"===e.substr(F,2)?(t="//",F+=2):(t=null,0===U&&i('"//"')),null!==t){for(n=[],u=F,h=F,U++,r=l(),U--,null===r?r="":(r=null,F=h),null!==r?(s=o(),null!==s?r=[r,s]:(r=null,F=u)):(r=null,F=u);null!==r;)n.push(r),u=F,h=F,U++,r=l(),U--,null===r?r="":(r=null,F=h),null!==r?(s=o(),null!==s?r=[r,s]:(r=null,F=u)):(r=null,F=u);null!==n?t=[t,n]:(t=null,F=a)}else t=null,F=a;return t}function _(){var t,e;for(t=[],e=u(),null===e&&(e=m(),null===e&&(e=g()));null!==e;)t.push(e),e=u(),null===e&&(e=m(),null===e&&(e=g()));return t}function v(){var t,e;for(t=[],e=u(),null===e&&(e=h(),null===e&&(e=p()));null!==e;)t.push(e),e=u(),null===e&&(e=h(),null===e&&(e=p()));return t}function y(){var t,e;return e=F,t=E(),null===t&&(t=b()),null!==t&&(t=function(t,e){return{type:"NumericLiteral",value:e}}(e,t)),null===t&&(F=e),t}function b(){var t,n,r;if(r=F,/^[0-9]/.test(e.charAt(F))?(n=e.charAt(F),F++):(n=null,0===U&&i("[0-9]")),null!==n)for(t=[];null!==n;)t.push(n),/^[0-9]/.test(e.charAt(F))?(n=e.charAt(F),F++):(n=null,0===U&&i("[0-9]"));else t=null;return null!==t&&(t=function(t,e){return parseInt(e.join(""))}(r,t)),null===t&&(F=r),t}function E(){var t,n,r,s,o;return s=F,o=F,t=b(),null!==t?(46===e.charCodeAt(F)?(n=".",F++):(n=null,0===U&&i('"."')),null!==n?(r=b(),null!==r?t=[t,n,r]:(t=null,F=o)):(t=null,F=o)):(t=null,F=o),null!==t&&(t=function(t,e){return parseFloat(e.join(""))}(s,t)),null===t&&(F=s),t}function w(){var t,n,r,s;if(s=F,/^[\-+]/.test(e.charAt(F))?(t=e.charAt(F),F++):(t=null,0===U&&i("[\\-+]")),t=null!==t?t:"",null!==t){if(/^[0-9]/.test(e.charAt(F))?(r=e.charAt(F),F++):(r=null,0===U&&i("[0-9]")),null!==r)for(n=[];null!==r;)n.push(r),/^[0-9]/.test(e.charAt(F))?(r=e.charAt(F),F++):(r=null,0===U&&i("[0-9]"));else n=null;null!==n?t=[t,n]:(t=null,F=s)}else t=null,F=s;return t}function T(){var t,e;return U++,e=F,t=C(),null!==t&&(t=function(t,e){return e}(e,t)),null===t&&(F=e),U--,0===U&&null===t&&i("identifier"),t}function C(){var t,e,n,r,s;if(U++,r=F,s=F,t=a(),null!==t){for(e=[],n=a();null!==n;)e.push(n),n=a();null!==e?t=[t,e]:(t=null,F=s)}else t=null,F=s;return null!==t&&(t=function(t,e,n){return e+n.join("")}(r,t[0],t[1])),null===t&&(F=r),U--,0===U&&null===t&&i("identifier"),t}function S(){var t,n,r,s,o,a,u;return a=F,t=T(),null!==t&&(t=function(t,e){return{type:"Variable",name:e}}(a,t)),null===t&&(F=a),null===t&&(t=y(),null===t&&(a=F,u=F,40===e.charCodeAt(F)?(t="(",F++):(t=null,0===U&&i('"("')),null!==t?(n=v(),null!==n?(r=M(),null!==r?(s=v(),null!==s?(41===e.charCodeAt(F)?(o=")",F++):(o=null,0===U&&i('")"')),null!==o?t=[t,n,r,s,o]:(t=null,F=u)):(t=null,F=u)):(t=null,F=u)):(t=null,F=u)):(t=null,F=u),null!==t&&(t=function(t,e){return e}(a,t[2])),null===t&&(F=a))),t}function A(){var t,e,n,i,r;return t=S(),null===t&&(i=F,r=F,t=O(),null!==t?(e=v(),null!==e?(n=A(),null!==n?t=[t,e,n]:(t=null,F=r)):(t=null,F=r)):(t=null,F=r),null!==t&&(t=function(t,e,n){return{type:"UnaryExpression",operator:e,expression:n}}(i,t[0],t[2])),null===t&&(F=i)),t}function O(){var t;return 43===e.charCodeAt(F)?(t="+",F++):(t=null,0===U&&i('"+"')),null===t&&(45===e.charCodeAt(F)?(t="-",F++):(t=null,0===U&&i('"-"')),null===t&&(33===e.charCodeAt(F)?(t="!",F++):(t=null,0===U&&i('"!"')))),t}function x(){var t,e,n,i,r,s,o,a,u;if(o=F,a=F,t=A(),null!==t){for(e=[],u=F,n=v(),null!==n?(i=R(),null!==i?(r=v(),null!==r?(s=A(),null!==s?n=[n,i,r,s]:(n=null,F=u)):(n=null,F=u)):(n=null,F=u)):(n=null,F=u);null!==n;)e.push(n),u=F,n=v(),null!==n?(i=R(),null!==i?(r=v(),null!==r?(s=A(),null!==s?n=[n,i,r,s]:(n=null,F=u)):(n=null,F=u)):(n=null,F=u)):(n=null,F=u);null!==e?t=[t,e]:(t=null,F=a)}else t=null,F=a;return null!==t&&(t=function(t,e,n){for(var i=e,r=0;n.length>r;r++)i={type:"MultiplicativeExpression",operator:n[r][1],left:i,right:n[r][3]};return i}(o,t[0],t[1])),null===t&&(F=o),t}function R(){var t;return 42===e.charCodeAt(F)?(t="*",F++):(t=null,0===U&&i('"*"')),null===t&&(47===e.charCodeAt(F)?(t="/",F++):(t=null,0===U&&i('"/"'))),t}function I(){var t,e,n,i,r,s,o,a,u;if(o=F,a=F,t=x(),null!==t){for(e=[],u=F,n=v(),null!==n?(i=N(),null!==i?(r=v(),null!==r?(s=x(),null!==s?n=[n,i,r,s]:(n=null,F=u)):(n=null,F=u)):(n=null,F=u)):(n=null,F=u);null!==n;)e.push(n),u=F,n=v(),null!==n?(i=N(),null!==i?(r=v(),null!==r?(s=x(),null!==s?n=[n,i,r,s]:(n=null,F=u)):(n=null,F=u)):(n=null,F=u)):(n=null,F=u);null!==e?t=[t,e]:(t=null,F=a)}else t=null,F=a;return null!==t&&(t=function(t,e,n){for(var i=e,r=0;n.length>r;r++)i={type:"AdditiveExpression",operator:n[r][1],left:i,right:n[r][3]};return i}(o,t[0],t[1])),null===t&&(F=o),t}function N(){var t;return 43===e.charCodeAt(F)?(t="+",F++):(t=null,0===U&&i('"+"')),null===t&&(45===e.charCodeAt(F)?(t="-",F++):(t=null,0===U&&i('"-"'))),t}function V(){var t,e,n,i,r,s,o,a,u;if(o=F,a=F,t=I(),null!==t){for(e=[],u=F,n=v(),null!==n?(i=L(),null!==i?(r=v(),null!==r?(s=I(),null!==s?n=[n,i,r,s]:(n=null,F=u)):(n=null,F=u)):(n=null,F=u)):(n=null,F=u);null!==n;)e.push(n),u=F,n=v(),null!==n?(i=L(),null!==i?(r=v(),null!==r?(s=I(),null!==s?n=[n,i,r,s]:(n=null,F=u)):(n=null,F=u)):(n=null,F=u)):(n=null,F=u);null!==e?t=[t,e]:(t=null,F=a)}else t=null,F=a;return null!==t&&(t=function(t,e,n){for(var i=e,r=0;n.length>r;r++)i={type:"Inequality",operator:n[r][1],left:i,right:n[r][3]};return i}(o,t[0],t[1])),null===t&&(F=o),t}function L(){var t;return"<="===e.substr(F,2)?(t="<=",F+=2):(t=null,0===U&&i('"<="')),null===t&&(">="===e.substr(F,2)?(t=">=",F+=2):(t=null,0===U&&i('">="')),null===t&&(60===e.charCodeAt(F)?(t="<",F++):(t=null,0===U&&i('"<"')),null===t&&(62===e.charCodeAt(F)?(t=">",F++):(t=null,0===U&&i('">"'))))),t}function M(){var t,n,r,s,o,a,u,l,h;if(u=F,l=F,t=V(),null!==t){for(n=[],h=F,r=v(),null!==r?("=="===e.substr(F,2)?(s="==",F+=2):(s=null,0===U&&i('"=="')),null!==s?(o=v(),null!==o?(a=V(),null!==a?r=[r,s,o,a]:(r=null,F=h)):(r=null,F=h)):(r=null,F=h)):(r=null,F=h);null!==r;)n.push(r),h=F,r=v(),null!==r?("=="===e.substr(F,2)?(s="==",F+=2):(s=null,0===U&&i('"=="')),null!==s?(o=v(),null!==o?(a=V(),null!==a?r=[r,s,o,a]:(r=null,F=h)):(r=null,F=h)):(r=null,F=h)):(r=null,F=h);null!==n?t=[t,n]:(t=null,F=l)}else t=null,F=l;return null!==t&&(t=function(t,e,n){for(var i=e,r=0;n.length>r;r++)i={type:"Equality",operator:n[r][1],left:i,right:n[r][3]};return i}(u,t[0],t[1])),null===t&&(F=u),t}function z(t){t.sort();for(var e=null,n=[],i=0;t.length>i;i++)t[i]!==e&&(n.push(t[i]),e=t[i]);return n}function D(){for(var t=1,n=1,i=!1,r=0;Math.max(F,H)>r;r++){var s=e.charAt(r);"\n"===s?(i||t++,n=1,i=!1):"\r"===s||"\u2028"===s||"\u2029"===s?(t++,n=1,i=!0):(n++,i=!1)}return{line:t,column:n}}var P={start:r,Statement:s,SourceCharacter:o,IdentifierStart:a,WhiteSpace:u,LineTerminator:l,LineTerminatorSequence:h,EOS:c,EOF:f,Comment:p,MultiLineComment:d,MultiLineCommentNoLineTerminator:m,SingleLineComment:g,_:_,__:v,Literal:y,Integer:b,Real:E,SignedInteger:w,Identifier:T,IdentifierName:C,PrimaryExpression:S,UnaryExpression:A,UnaryOperator:O,MultiplicativeExpression:x,MultiplicativeOperator:R,AdditiveExpression:I,AdditiveOperator:N,InequalityExpression:V,InequalityOperator:L,LinearExpression:M};if(void 0!==n){if(void 0===P[n])throw Error("Invalid rule name: "+t(n)+".")}else n="start";var F=0,U=0,H=0,k=[],G=P[n]();if(null===G||F!==e.length){var q=Math.max(F,H),j=e.length>q?e.charAt(q):null,W=D();throw new this.SyntaxError(z(k),j,q,W.line,W.column)}return G},toSource:function(){return this._source}};return e.SyntaxError=function(e,n,i,r,s){function o(e,n){var i,r;switch(e.length){case 0:i="end of input";break;case 1:i=e[0];break;default:i=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return r=n?t(n):"end of input","Expected "+i+" but "+r+" found."}this.name="SyntaxError",this.expected=e,this.found=n,this.message=o(e,n),this.offset=i,this.line=r,this.column=s},e.SyntaxError.prototype=Error.prototype,e}()}).call("undefined"!=typeof e?e.compiled=!0&&e:this)},{}],3:[function(t,e,n){function i(t){u.call(this),this._options={},this._idToNode={},this._comp=this.addComponent({onUpdate:a.bind(this),onSizeChange:a.bind(this)}),t&&(t.visualFormat&&this.setVisualFormat(t.visualFormat),t.layoutOptions&&this.setLayoutOptions(t.options))}function r(t){for(var e in t){var n=this._autoLayoutView.subViews[e],i=this._idToNode[e];n&&i&&(n.intrinsicWidth=i.getSize()[0])}}function s(t){for(var e in t){var n=this._autoLayoutView.subViews[e],i=this._idToNode[e];n&&i&&(n.intrinsicHeight=i.getSize()[1])}}function o(t,e){return t=[void 0!==e.width&&e.width!==!0?e.width:Math.max(Math.min(t[0],e["max-width"]||t[0]),e["min-width"]||0),void 0!==e.height&&e.height!==!0?e.height:Math.max(Math.min(t[1],e["max-height"]||t[1]),e["min-height"]||0)],e.width===!0&&e.height===!0?(t[0]=this._autoLayoutView.fittingWidth,t[1]=this._autoLayoutView.fittingHeight):e.width===!0?(this._autoLayoutView.setSize(void 0,t[1]),t[0]=this._autoLayoutView.fittingWidth):e.height===!0?(this._autoLayoutView.setSize(t[0],void 0),t[1]=this._autoLayoutView.fittingHeight):(t=e["aspect-ratio"]?[Math.min(t[0],t[1]*e["aspect-ratio"]),Math.min(t[1],t[0]/e["aspect-ratio"])]:t,this._autoLayoutView.setSize(t[0],t[1])),t}function a(){if(this._autoLayoutView){var t,e,n=this.getSize();(this._options.spacing||this._metaInfo.spacing)&&this._autoLayoutView.setSpacing(this._options.spacing||this._metaInfo.spacing);var i=this._options.widths||this._metaInfo.widths;i&&r.call(this,i);var a=this._options.heights||this._metaInfo.heights;if(a&&s.call(this,a),this._options.viewport||this._metaInfo.viewport){var l=o.call(this,n,this._options.viewport||this._metaInfo.viewport);t=(n[0]-l[0])/2,e=(n[1]-l[1])/2}else this._autoLayoutView.setSize(n[0],n[1]),t=0,e=0;for(var h in this._autoLayoutView.subViews){var c=this._autoLayoutView.subViews[h];if(0!==h.indexOf("_")&&"stack"!==c.type){var f=this._idToNode[h];f&&(f.setSizeMode(i&&i[h]===!0?void 0:u.ABSOLUTE_SIZE,a&&a[h]===!0?void 0:u.ABSOLUTE_SIZE),f.setAbsoluteSize(i&&i[h]===!0?void 0:c.width,a&&a[h]===!0?void 0:c.height),f.setPosition(t+c.left,e+c.top,5*c.zIndex))}}this._reflowLayout&&(this._reflowLayout=!1,this.requestUpdate(this._comp))}}var u=t("famous/core/Node"),l=t("autolayout");i.prototype=Object.create(u.prototype),i.prototype.constructor=i,i.DEFAULT_PARSE_OPTIONS={extended:!0,strict:!1},i.prototype.reflowLayout=function(){this._reflowLayout||(this._reflowLayout=!0,this.requestUpdate(this._comp))},i.prototype.setVisualFormat=function(t,e){this._visualFormat=t;var n=l.VisualFormat.parse(t,e||i.DEFAULT_PARSE_OPTIONS);return this._metaInfo=l.VisualFormat.parseMetaInfo(t),this._autoLayoutView=new l.View({constraints:n}),this.reflowLayout(),this},i.prototype.setLayoutOptions=function(t){return this._options=t||{},this.reflowLayout(),this},i.prototype.addChild=function(t,e){return t=u.prototype.addChild.call(this,t),this._idToNode[e]=t,this.reflowLayout(),t},i.prototype.removeChild=function(t,e){var n=!1;if(t&&e)n=u.prototype.removeChild.call(this,t),delete this._idToNode[e];else if(t){for(e in this._idToNode)if(this._idToNode[e]===t){delete this._idToNode[e];break}n=u.prototype.removeChild.call(this,t)}else e&&(n=u.prototype.removeChild.call(this,this._idToNode[e]),delete this._idToNode[e]);return this.reflowLayout(),n},e.exports=i},{autolayout:1,"famous/core/Node":11}],4:[function(t,e,n){"use strict";function i(t){this._node=t,this._projectionType=i.ORTHOGRAPHIC_PROJECTION,this._focalDepth=0,this._near=0,this._far=0,this._requestingUpdate=!1,this._id=t.addComponent(this),this._viewTransform=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this._viewDirty=!1,this._perspectiveDirty=!1,this.setFlat()}var r=t("../core/Commands");i.FRUSTUM_PROJECTION=0,i.PINHOLE_PROJECTION=1,i.ORTHOGRAPHIC_PROJECTION=2,i.prototype.toString=function(){return"Camera"},i.prototype.getValue=function(){return{component:this.toString(),projectionType:this._projectionType,focalDepth:this._focalDepth,near:this._near,far:this._far}},i.prototype.setValue=function(t){return this.toString()===t.component?(this.set(t.projectionType,t.focalDepth,t.near,t.far),!0):!1},i.prototype.set=function(t,e,n,i){this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0),this._projectionType=t,this._focalDepth=e,this._near=n,this._far=i},i.prototype.setDepth=function(t){return this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0),this._perspectiveDirty=!0,this._projectionType=i.PINHOLE_PROJECTION,this._focalDepth=t,this._near=0,this._far=0,this},i.prototype.setFrustum=function(t,e){return this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0),this._perspectiveDirty=!0,this._projectionType=i.FRUSTUM_PROJECTION,this._focalDepth=0,this._near=t,this._far=e,this},i.prototype.setFlat=function(){return this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0),this._perspectiveDirty=!0,this._projectionType=i.ORTHOGRAPHIC_PROJECTION,this._focalDepth=0,this._near=0,this._far=0,this},i.prototype.onUpdate=function(){this._requestingUpdate=!1;var t=this._node.getLocation();if(this._node.sendDrawCommand(r.WITH).sendDrawCommand(t),this._perspectiveDirty)switch(this._perspectiveDirty=!1,this._projectionType){case i.FRUSTUM_PROJECTION:this._node.sendDrawCommand(r.FRUSTRUM_PROJECTION),this._node.sendDrawCommand(this._near),this._node.sendDrawCommand(this._far);break;case i.PINHOLE_PROJECTION:this._node.sendDrawCommand(r.PINHOLE_PROJECTION),this._node.sendDrawCommand(this._focalDepth);break;case i.ORTHOGRAPHIC_PROJECTION:this._node.sendDrawCommand(r.ORTHOGRAPHIC_PROJECTION)}this._viewDirty&&(this._viewDirty=!1,this._node.sendDrawCommand(r.CHANGE_VIEW_TRANSFORM),this._node.sendDrawCommand(this._viewTransform[0]),this._node.sendDrawCommand(this._viewTransform[1]),this._node.sendDrawCommand(this._viewTransform[2]),this._node.sendDrawCommand(this._viewTransform[3]),this._node.sendDrawCommand(this._viewTransform[4]),this._node.sendDrawCommand(this._viewTransform[5]),this._node.sendDrawCommand(this._viewTransform[6]),this._node.sendDrawCommand(this._viewTransform[7]),this._node.sendDrawCommand(this._viewTransform[8]),this._node.sendDrawCommand(this._viewTransform[9]),this._node.sendDrawCommand(this._viewTransform[10]),this._node.sendDrawCommand(this._viewTransform[11]),this._node.sendDrawCommand(this._viewTransform[12]),this._node.sendDrawCommand(this._viewTransform[13]),this._node.sendDrawCommand(this._viewTransform[14]),this._node.sendDrawCommand(this._viewTransform[15]))},i.prototype.onTransformChange=function(t){var e=t;this._viewDirty=!0,this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0);var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7],h=e[8],c=e[9],f=e[10],p=e[11],d=e[12],m=e[13],g=e[14],_=e[15],v=n*a-i*o,y=n*u-r*o,b=n*l-s*o,E=i*u-r*a,w=i*l-s*a,T=r*l-s*u,C=h*m-c*d,S=h*g-f*d,A=h*_-p*d,O=c*g-f*m,x=c*_-p*m,R=f*_-p*g,I=1/(v*R-y*x+b*O+E*A-w*S+T*C);this._viewTransform[0]=(a*R-u*x+l*O)*I,this._viewTransform[1]=(r*x-i*R-s*O)*I,this._viewTransform[2]=(m*T-g*w+_*E)*I,this._viewTransform[3]=(f*w-c*T-p*E)*I,this._viewTransform[4]=(u*A-o*R-l*S)*I,this._viewTransform[5]=(n*R-r*A+s*S)*I,this._viewTransform[6]=(g*b-d*T-_*y)*I,this._viewTransform[7]=(h*T-f*b+p*y)*I,this._viewTransform[8]=(o*x-a*A+l*C)*I,this._viewTransform[9]=(i*A-n*x-s*C)*I,this._viewTransform[10]=(d*w-m*b+_*v)*I,this._viewTransform[11]=(c*b-h*w-p*v)*I,this._viewTransform[12]=(a*S-o*O-u*C)*I,this._viewTransform[13]=(n*O-i*S+r*C)*I,this._viewTransform[14]=(m*y-d*E-g*v)*I,this._viewTransform[15]=(h*E-c*y+f*v)*I},e.exports=i},{"../core/Commands":7}],5:[function(t,e,n){"use strict";function i(){"undefined"!=typeof self&&self.window!==self&&this._enterWorkerMode()}i.prototype._enterWorkerMode=function(){this._workerMode=!0;var t=this;self.addEventListener("message",function(e){t.onMessage(e.data)})},i.prototype.onMessage=null,i.prototype.sendMessage=function(t){this._workerMode?self.postMessage(t):this.onmessage(t)},i.prototype.onmessage=null,i.prototype.postMessage=function(t){return this.onMessage(t)},e.exports=i},{}],6:[function(t,e,n){"use strict";function i(){this._time=0,this._frame=0,this._timerQueue=[],this._updatingIndex=0,this._scale=1,this._scaledTime=this._time}i.prototype.setScale=function(t){return this._scale=t,this},i.prototype.getScale=function(){return this._scale},i.prototype.step=function(t){this._frame++,this._scaledTime=this._scaledTime+(t-this._time)*this._scale,this._time=t;for(var e=0;e<this._timerQueue.length;e++)this._timerQueue[e](this._scaledTime)&&this._timerQueue.splice(e,1);return this},i.prototype.now=function(){return this._scaledTime},i.prototype.getTime=i.prototype.now,i.prototype.getFrame=function(){return this._frame},i.prototype.setTimeout=function(t,e){var n=Array.prototype.slice.call(arguments,2),i=this._time,r=function(r){return r-i>=e?(t.apply(null,n),!0):!1};return this._timerQueue.push(r),r},i.prototype.setInterval=function(t,e){var n=Array.prototype.slice.call(arguments,2),i=this._time,r=function(r){return r-i>=e&&(t.apply(null,n),i=r),!1};return this._timerQueue.push(r),r},i.prototype.clearTimer=function(t){var e=this._timerQueue.indexOf(t);return-1!==e&&this._timerQueue.splice(e,1),this},e.exports=i},{}],7:[function(t,e,n){"use strict";var i={INIT_DOM:0,DOM_RENDER_SIZE:1,CHANGE_TRANSFORM:2,CHANGE_SIZE:3,CHANGE_PROPERTY:4,CHANGE_CONTENT:5,CHANGE_ATTRIBUTE:6,ADD_CLASS:7,REMOVE_CLASS:8,SUBSCRIBE:9,GL_SET_DRAW_OPTIONS:10,GL_AMBIENT_LIGHT:11,GL_LIGHT_POSITION:12,GL_LIGHT_COLOR:13,MATERIAL_INPUT:14,GL_SET_GEOMETRY:15,GL_UNIFORMS:16,GL_BUFFER_DATA:17,GL_CUTOUT_STATE:18,GL_MESH_VISIBILITY:19,GL_REMOVE_MESH:20,PINHOLE_PROJECTION:21,ORTHOGRAPHIC_PROJECTION:22,CHANGE_VIEW_TRANSFORM:23,WITH:24,FRAME:25,ENGINE:26,START:27,STOP:28,TIME:29,TRIGGER:30,NEED_SIZE_FOR:31,DOM:32,READY:33,ALLOW_DEFAULT:34,PREVENT_DEFAULT:35,UNSUBSCRIBE:36,prettyPrint:function(t,e,n){var i;e=e?e:0;for(var s={i:e,result:""},o=n?n+e:t.length;s.i<o;s.i++){if(i=r[t[s.i]],!i)throw new Error("PARSE ERROR: no command registered for: "+t[s.i]);i(t,s)}return s.result}},r=[];r[i.INIT_DOM]=function(t,e){e.result+=e.i+". INIT_DOM\n    tagName: "+t[++e.i]+"\n\n"},r[i.DOM_RENDER_SIZE]=function(t,e){e.result+=e.i+". DOM_RENDER_SIZE\n    selector: "+t[++e.i]+"\n\n"},r[i.CHANGE_TRANSFORM]=function(t,e){e.result+=e.i+". CHANGE_TRANSFORM\n    val: [";for(var n=0;16>n;n++)e.result+=t[++e.i]+(15>n?", ":"");e.result+="]\n\n"},r[i.CHANGE_SIZE]=function(t,e){e.result+=e.i+". CHANGE_SIZE\n    x: "+t[++e.i]+", y: "+t[++e.i]+"\n\n"},r[i.CHANGE_PROPERTY]=function(t,e){e.result+=e.i+". CHANGE_PROPERTY\n    key: "+t[++e.i]+", value: "+t[++e.i]+"\n\n"},r[i.CHANGE_CONTENT]=function(t,e){e.result+=e.i+". CHANGE_CONTENT\n    content: "+t[++e.i]+"\n\n"},r[i.CHANGE_ATTRIBUTE]=function(t,e){e.result+=e.i+". CHANGE_ATTRIBUTE\n    key: "+t[++e.i]+", value: "+t[++e.i]+"\n\n"},r[i.ADD_CLASS]=function(t,e){e.result+=e.i+". ADD_CLASS\n    className: "+t[++e.i]+"\n\n"},r[i.REMOVE_CLASS]=function(t,e){e.result+=e.i+". REMOVE_CLASS\n    className: "+t[++e.i]+"\n\n"},r[i.SUBSCRIBE]=function(t,e){e.result+=e.i+". SUBSCRIBE\n    event: "+t[++e.i]+"\n\n"},r[i.GL_SET_DRAW_OPTIONS]=function(t,e){e.result+=e.i+". GL_SET_DRAW_OPTIONS\n    options: "+t[++e.i]+"\n\n"},r[i.GL_AMBIENT_LIGHT]=function(t,e){e.result+=e.i+". GL_AMBIENT_LIGHT\n    r: "+t[++e.i]+"g: "+t[++e.i]+"b: "+t[++e.i]+"\n\n"},r[i.GL_LIGHT_POSITION]=function(t,e){e.result+=e.i+". GL_LIGHT_POSITION\n    x: "+t[++e.i]+"y: "+t[++e.i]+"z: "+t[++e.i]+"\n\n"},r[i.GL_LIGHT_COLOR]=function(t,e){e.result+=e.i+". GL_LIGHT_COLOR\n    r: "+t[++e.i]+"g: "+t[++e.i]+"b: "+t[++e.i]+"\n\n"},r[i.MATERIAL_INPUT]=function(t,e){e.result+=e.i+". MATERIAL_INPUT\n    key: "+t[++e.i]+", value: "+t[++e.i]+"\n\n"},r[i.GL_SET_GEOMETRY]=function(t,e){e.result+=e.i+". GL_SET_GEOMETRY\n   x: "+t[++e.i]+", y: "+t[++e.i]+", z: "+t[++e.i]+"\n\n"},r[i.GL_UNIFORMS]=function(t,e){e.result+=e.i+". GL_UNIFORMS\n    key: "+t[++e.i]+", value: "+t[++e.i]+"\n\n"},r[i.GL_BUFFER_DATA]=function(t,e){e.result+=e.i+". GL_BUFFER_DATA\n    data: ";for(var n=0;5>n;n++)e.result+=t[++e.i]+", ";e.result+="\n\n"},r[i.GL_CUTOUT_STATE]=function(t,e){e.result+=e.i+". GL_CUTOUT_STATE\n    state: "+t[++e.i]+"\n\n"},r[i.GL_MESH_VISIBILITY]=function(t,e){e.result+=e.i+". GL_MESH_VISIBILITY\n    visibility: "+t[++e.i]+"\n\n"},r[i.GL_REMOVE_MESH]=function(t,e){e.result+=e.i+". GL_REMOVE_MESH\n\n"},r[i.PINHOLE_PROJECTION]=function(t,e){e.result+=e.i+". PINHOLE_PROJECTION\n    depth: "+t[++e.i]+"\n\n"},r[i.ORTHOGRAPHIC_PROJECTION]=function(t,e){e.result+=e.i+". ORTHOGRAPHIC_PROJECTION\n"},r[i.CHANGE_VIEW_TRANSFORM]=function(t,e){e.result+=e.i+". CHANGE_VIEW_TRANSFORM\n   value: [";for(var n=0;16>n;n++)e.result+=t[++e.i]+(15>n?", ":"");e.result+="]\n\n"},r[i.PREVENT_DEFAULT]=function(t,e){e.result+=e.i+". PREVENT_DEFAULT\n    value: "+t[++e.i]+"\n\n"},r[i.ALLOW_DEFAULT]=function(t,e){e.result+=e.i+". ALLOW_DEFAULT\n    value: "+t[++e.i]+"\n\n"},r[i.READY]=function(t,e){e.result+=e.i+". READY\n\n"},r[i.WITH]=function(t,e){e.result+=e.i+". **WITH**\n     path: "+t[++e.i]+"\n\n"},r[i.TIME]=function(t,e){e.result+=e.i+". TIME\n     ms: "+t[++e.i]+"\n\n"},r[i.NEED_SIZE_FOR]=function(t,e){e.result+=e.i+". NEED_SIZE_FOR\n    selector: "+t[++e.i]+"\n\n"},e.exports=i},{}],8:[function(t,e,n){"use strict";function i(){this._nodes={},this._queue=[]}function r(t,e){e.length=0;var n,i=0,r=t.length;for(n=0;r>n;n++)"/"===t[n]&&(e.push(t.substring(i,n)),i=n+1);return n-i>0&&e.push(t.substring(i,n)),e}var s=t("./Event"),o=t("./Path");i.prototype._setUpdater=function(t){this._updater=t;for(var e in this._nodes)this._nodes[e]._setUpdater(t)},i.prototype.addChildrenToQueue=function(t){for(var e,n=t.getChildren(),i=0,r=n.length;r>i;i++)e=n[i],e&&this._queue.push(e)},i.prototype.next=function(){return this._queue.shift()},i.prototype.breadthFirstNext=function(){var t=this._queue.shift();return t?(this.addChildrenToQueue(t),t):void 0},i.prototype.mount=function(t,e){if(!e)throw new Error("Dispatch: no node passed to mount at: "+t);if(this._nodes[t])throw new Error("Dispatch: there is a node already registered at: "+t);e._setUpdater(this._updater),this._nodes[t]=e;var n=o.parent(t),i=n?this._nodes[n]:e;if(!i)throw new Error("Parent to path: "+t+" doesn't exist at expected path: "+n);var r,s,a=e.getChildren(),u=e.getComponents();if(i.isMounted()&&e._setMounted(!0,t),i.isShown()&&e._setShown(!0),i.isMounted()){for(e._setParent(i),e.onMount&&e.onMount(t),r=0,s=u.length;s>r;r++)u[r]&&u[r].onMount&&u[r].onMount(e,r);for(r=0,s=a.length;s>r;r++)a[r]&&a[r].mount?a[r].mount(t+"/"+r):a[r]&&this.mount(t+"/"+r,a[r])}if(i.isShown())for(e.onShow&&e.onShow(),r=0,s=u.length;s>r;r++)u[r]&&u[r].onShow&&u[r].onShow()},i.prototype.dismount=function(t){var e=this._nodes[t];if(!e)throw new Error("No node registered to path: "+t);var n,i,r=e.getChildren(),s=e.getComponents();if(e.isShown())for(e._setShown(!1),e.onHide&&e.onHide(),n=0,i=s.length;i>n;n++)s[n]&&s[n].onHide&&s[n].onHide();if(e.isMounted()){for(e.onDismount&&e.onDismount(t),n=0,i=r.length;i>n;n++)r[n]&&r[n].dismount?r[n].dismount():r[n]&&this.dismount(t+"/"+n);for(n=0,i=s.length;i>n;n++)s[n]&&s[n].onDismount&&s[n].onDismount();e._setMounted(!1),e._setParent(null)}this._nodes[t]=null},i.prototype.getNode=function(t){return this._nodes[t]},i.prototype.show=function(t){var e=this._nodes[t];if(!e)throw new Error("No node registered to path: "+t);e.onShow&&e.onShow();for(var n=e.getComponents(),i=0,r=n.length;r>i;i++)n[i]&&n[i].onShow&&n[i].onShow();this.addChildrenToQueue(e);for(var s;s=this.breadthFirstNext();)this.show(s.getLocation())},i.prototype.hide=function(t){var e=this._nodes[t];if(!e)throw new Error("No node registered to path: "+t);e.onHide&&e.onHide();for(var n=e.getComponents(),i=0,r=n.length;r>i;i++)n[i]&&n[i].onHide&&n[i].onHide();this.addChildrenToQueue(e);for(var s;s=this.breadthFirstNext();)this.hide(s.getLocation())},i.prototype.lookupNode=function(t){if(!t)throw new Error("lookupNode must be called with a path");this._queue.length=0;var e=this._queue;r(t,e);for(var n=0,i=e.length;i>n;n++)e[n]=this._nodes[e[n]];return e[e.length-1]},i.prototype.dispatch=function(t,e,n){if(!t)throw new Error("dispatch requires a path as it's first argument");if(!e)throw new Error("dispatch requires an event name as it's second argument");var i=this._nodes[t];if(i){this.addChildrenToQueue(i);for(var r;r=this.breadthFirstNext();)r&&r.onReceive&&r.onReceive(e,n)}},i.prototype.dispatchUIEvent=function(t,e,n){if(!t)throw new Error("dispatchUIEvent needs a valid path to dispatch to");if(!e)throw new Error("dispatchUIEvent needs an event name as its second argument");var i;if(s.call(n),i=this.getNode(t)){var r,o,a,u;for(n.node=i;i;){for(i.onReceive&&i.onReceive(e,n),o=i.getComponents(),a=0,u=o.length;u>a;a++)o[a]&&o[a].onReceive&&o[a].onReceive(e,n);if(n.propagationStopped)break;if(r=i.getParent(),r===i)return;i=r}}},e.exports=new i},{"./Event":9,"./Path":12}],9:[function(t,e,n){"use strict";function i(){this.propagationStopped=!1,this.stopPropagation=r}function r(){this.propagationStopped=!0}e.exports=i},{}],10:[function(t,e,n){"use strict";function i(){var t=this;a._setUpdater(this),this._updateQueue=[],this._nextUpdateQueue=[],this._scenes={},this._messages=g,this._inUpdate=!1,this._clock=new r,this._channel=new o,this._channel.onMessage=function(e){t.handleMessage(e)}}var r=t("./Clock"),s=t("./Scene"),o=t("./Channel"),a=t("./Dispatch"),u=t("../renderers/UIManager"),l=t("../renderers/Compositor"),h=t("../render-loops/RequestAnimationFrameLoop"),c=t("./TransformSystem"),f=t("./SizeSystem"),p=t("./Commands"),d=[p.ENGINE,p.START],m=[p.ENGINE,p.STOP],g=[p.TIME,null];i.prototype.init=function(t){if("undefined"==typeof window)throw new Error("FamousEngine#init needs to have access to the global window object. Instantiate Compositor and UIManager manually in the UI thread.");return this.compositor=t&&t.compositor||new l,this.renderLoop=t&&t.renderLoop||new h,this.uiManager=new u(this.getChannel(),this.compositor,this.renderLoop),this},i.prototype.setChannel=function(t){return this._channel=t,this},i.prototype.getChannel=function(){return this._channel},i.prototype._update=function(){this._inUpdate=!0;var t,e=this._clock.now(),n=this._nextUpdateQueue,i=this._updateQueue;for(this._messages[1]=e,f.update(),c.update();n.length;)i.unshift(n.pop());for(;i.length;)t=i.shift(),t&&t.update&&t.update(e),t&&t.onUpdate&&t.onUpdate(e);this._inUpdate=!1},i.prototype.requestUpdate=function(t){if(!t)throw new Error("requestUpdate must be called with a class to be updated");this._inUpdate?this.requestUpdateOnNextTick(t):this._updateQueue.push(t)},i.prototype.requestUpdateOnNextTick=function(t){this._nextUpdateQueue.push(t)},i.prototype.handleMessage=function(t){if(!t)throw new Error("onMessage must be called with an array of messages");for(var e;t.length>0;)switch(e=t.shift()){case p.WITH:this.handleWith(t);break;case p.FRAME:this.handleFrame(t);break;default:throw new Error("received unknown command: "+e)}return this},i.prototype.handleWith=function(t){var e=t.shift(),n=t.shift();switch(n){case p.TRIGGER:var i=t.shift(),r=t.shift();a.dispatchUIEvent(e,i,r);break;default:throw new Error("received unknown command: "+n)}return this},i.prototype.handleFrame=function(t){if(!t)throw new Error("handleFrame must be called with an array of messages");if(!t.length)throw new Error("FRAME must be sent with a time");return this.step(t.shift()),this},i.prototype.step=function(t){if(null==t)throw new Error("step must be called with a time");if(this._clock.step(t),this._update(),this._messages.length)for(this._channel.sendMessage(this._messages);this._messages.length>2;)this._messages.pop();return this},i.prototype.getContext=function(t){if(!t)throw new Error("getContext must be called with a selector");var e=t.indexOf("/");return t=-1===e?t:t.substring(0,e),this._scenes[t]},i.prototype.getClock=function(){return this._clock},i.prototype.message=function(t){return this._messages.push(t),this},i.prototype.createScene=function(t){return t=t||"body",this._scenes[t]&&this._scenes[t].dismount(),this._scenes[t]=new s(t,this),this._scenes[t]},i.prototype.addScene=function(t){var e=t._selector,n=this._scenes[e];return n&&n!==t&&n.dismount(),t.isMounted()||t.mount(t.getSelector()),this._scenes[e]=t,this},i.prototype.removeScene=function(t){var e=t._selector,n=this._scenes[e];return n&&n===t&&(t.isMounted()&&t.dismount(),delete this._scenes[e]),this},i.prototype.startRenderLoop=function(){return this._channel.sendMessage(d),this},i.prototype.stopRenderLoop=function(){return this._channel.sendMessage(m),this},i.prototype.startEngine=function(){return console.warn("FamousEngine.startEngine is deprecated! Use FamousEngine.startRenderLoop instead!"),this.startRenderLoop()},i.prototype.stopEngine=function(){return console.warn("FamousEngine.stopEngine is deprecated! Use FamousEngine.stopRenderLoop instead!"),this.stopRenderLoop()},e.exports=new i},{"../render-loops/RequestAnimationFrameLoop":36,"../renderers/Compositor":37,"../renderers/UIManager":39,"./Channel":5,"./Clock":6,"./Commands":7,"./Dispatch":8,"./Scene":14,"./SizeSystem":16,"./TransformSystem":18}],11:[function(t,e,n){"use strict";function i(){this._requestingUpdate=!1,this._inUpdate=!1,this._mounted=!1,this._shown=!0,this._updater=null,this._opacity=1,this._UIEvents=[],this._updateQueue=[],this._nextUpdateQueue=[],this._freedComponentIndicies=[],this._components=[],this._freedChildIndicies=[],this._children=[],this._fullChildren=[],this._parent=null,this._id=null,this._transformID=null,this._sizeID=null,this.constructor.NO_DEFAULT_COMPONENTS||this._init()}var r=t("./SizeSystem"),s=t("./Dispatch"),o=t("./TransformSystem"),a=t("./Size"),u=t("./Transform");i.RELATIVE_SIZE=0,i.ABSOLUTE_SIZE=1,i.RENDER_SIZE=2,i.DEFAULT_SIZE=0,i.NO_DEFAULT_COMPONENTS=!1,i.prototype._init=function(){this._transformID=this.addComponent(new u),this._sizeID=this.addComponent(new a)},i.prototype._setParent=function(t){this._parent&&-1!==this._parent.getChildren().indexOf(this)&&this._parent.removeChild(this),this._parent=t},i.prototype._setMounted=function(t,e){this._mounted=t,this._id=e?e:null},i.prototype._setShown=function(t){this._shown=t},i.prototype._setUpdater=function(t){this._updater=t,this._requestingUpdate&&this._updater.requestUpdate(this)},i.prototype.getLocation=function(){return this._id},i.prototype.getId=i.prototype.getLocation,i.prototype.emit=function(t,e){return s.dispatch(this.getLocation(),t,e),this},i.prototype.sendDrawCommand=function(t){return this._updater.message(t),this},i.prototype.getValue=function(){var t=this._children.length,e=this._components.length,n=0,i={location:this.getId(),spec:{location:this.getId(),showState:{mounted:this.isMounted(),shown:this.isShown(),opacity:this.getOpacity()||null},offsets:{mountPoint:[0,0,0],
align:[0,0,0],origin:[0,0,0]},vectors:{position:[0,0,0],rotation:[0,0,0,1],scale:[1,1,1]},size:{sizeMode:[0,0,0],proportional:[1,1,1],differential:[0,0,0],absolute:[0,0,0],render:[0,0,0]}},UIEvents:this._UIEvents,components:[],children:[]};if(i.location){var s=o.get(this.getId()),a=r.get(this.getId());for(n=0;3>n;n++)i.spec.offsets.mountPoint[n]=s.offsets.mountPoint[n],i.spec.offsets.align[n]=s.offsets.align[n],i.spec.offsets.origin[n]=s.offsets.origin[n],i.spec.vectors.position[n]=s.vectors.position[n],i.spec.vectors.rotation[n]=s.vectors.rotation[n],i.spec.vectors.scale[n]=s.vectors.scale[n],i.spec.size.sizeMode[n]=a.sizeMode[n],i.spec.size.proportional[n]=a.proportionalSize[n],i.spec.size.differential[n]=a.differentialSize[n],i.spec.size.absolute[n]=a.absoluteSize[n],i.spec.size.render[n]=a.renderSize[n];i.spec.vectors.rotation[3]=s.vectors.rotation[3]}for(n=0;t>n;n++)this._children[n]&&this._children[n].getValue&&i.children.push(this._children[n].getValue());for(n=0;e>n;n++)this._components[n]&&this._components[n].getValue&&i.components.push(this._components[n].getValue());return i},i.prototype.getComputedValue=function(){console.warn("Node.getComputedValue is depricated. Use Node.getValue instead");for(var t=this._children.length,e={location:this.getId(),computedValues:{transform:this.isMounted()?o.get(this.getLocation()).getLocalTransform():null,size:this.isMounted()?r.get(this.getLocation()).get():null},children:[]},n=0;t>n;n++)this._children[n]&&this._children[n].getComputedValue&&e.children.push(this._children[n].getComputedValue());return e},i.prototype.getChildren=function(){return this._fullChildren},i.prototype.getRawChildren=function(){return this._children},i.prototype.getParent=function(){return this._parent},i.prototype.requestUpdate=function(t){return this._inUpdate||!this.isMounted()?this.requestUpdateOnNextTick(t):(-1===this._updateQueue.indexOf(t)&&(this._updateQueue.push(t),this._requestingUpdate||this._requestUpdate()),this)},i.prototype.requestUpdateOnNextTick=function(t){return-1===this._nextUpdateQueue.indexOf(t)&&this._nextUpdateQueue.push(t),this},i.prototype.isMounted=function(){return this._mounted},i.prototype.isRendered=function(){return this._mounted&&this._shown},i.prototype.isShown=function(){return this._shown},i.prototype.getOpacity=function(){return this._opacity},i.prototype.getMountPoint=function(){if(this.constructor.NO_DEFAULT_COMPONENTS){if(this.isMounted())return o.get(this.getLocation()).getMountPoint();throw new Error("This node does not have access to a transform component")}return this.getComponent(this._transformID).getMountPoint()},i.prototype.getAlign=function(){if(this.constructor.NO_DEFAULT_COMPONENTS){if(this.isMounted())return o.get(this.getLocation()).getAlign();throw new Error("This node does not have access to a transform component")}return this.getComponent(this._transformID).getAlign()},i.prototype.getOrigin=function(){if(this.constructor.NO_DEFAULT_COMPONENTS){if(this.isMounted())return o.get(this.getLocation()).getOrigin();throw new Error("This node does not have access to a transform component")}return this.getComponent(this._transformID).getOrigin()},i.prototype.getPosition=function(){if(this.constructor.NO_DEFAULT_COMPONENTS){if(this.isMounted())return o.get(this.getLocation()).getPosition();throw new Error("This node does not have access to a transform component")}return this.getComponent(this._transformID).getPosition()},i.prototype.getRotation=function(){if(this.constructor.NO_DEFAULT_COMPONENTS){if(this.isMounted())return o.get(this.getLocation()).getRotation();throw new Error("This node does not have access to a transform component")}return this.getComponent(this._transformID).getRotation()},i.prototype.getScale=function(){if(this.constructor.NO_DEFAULT_COMPONENTS){if(this.isMounted())return o.get(this.getLocation()).getScale();throw new Error("This node does not have access to a transform component")}return this.getComponent(this._transformID).getScale()},i.prototype.getSizeMode=function(){if(this.constructor.NO_DEFAULT_COMPONENTS){if(this.isMounted())return r.get(this.getLocation()).getSizeMode();throw new Error("This node does not have access to a size component")}return this.getComponent(this._sizeID).getSizeMode()},i.prototype.getProportionalSize=function(){if(this.constructor.NO_DEFAULT_COMPONENTS){if(this.isMounted())return r.get(this.getLocation()).getProportional();throw new Error("This node does not have access to a size component")}return this.getComponent(this._sizeID).getProportional()},i.prototype.getDifferentialSize=function(){if(this.constructor.NO_DEFAULT_COMPONENTS){if(this.isMounted())return r.get(this.getLocation()).getDifferential();throw new Error("This node does not have access to a size component")}return this.getComponent(this._sizeID).getDifferential()},i.prototype.getAbsoluteSize=function(){if(this.constructor.NO_DEFAULT_COMPONENTS){if(this.isMounted())return r.get(this.getLocation()).getAbsolute();throw new Error("This node does not have access to a size component")}return this.getComponent(this._sizeID).getAbsolute()},i.prototype.getRenderSize=function(){if(this.constructor.NO_DEFAULT_COMPONENTS){if(this.isMounted())return r.get(this.getLocation()).getRender();throw new Error("This node does not have access to a size component")}return this.getComponent(this._sizeID).getRender()},i.prototype.getSize=function(){if(this.constructor.NO_DEFAULT_COMPONENTS){if(this.isMounted())return r.get(this.getLocation()).get();throw new Error("This node does not have access to a size component")}return this.getComponent(this._sizeID).get()},i.prototype.getTransform=function(){return o.get(this.getLocation())},i.prototype.getUIEvents=function(){return this._UIEvents},i.prototype.addChild=function(t){var e=t?this._children.indexOf(t):-1;return t=t?t:new i,-1===e&&(e=this._freedChildIndicies.length?this._freedChildIndicies.pop():this._children.length,this._children[e]=t,this._fullChildren.push(t)),this.isMounted()&&t.mount(this.getLocation()+"/"+e),t},i.prototype.removeChild=function(t){var e=this._children.indexOf(t);if(e>-1){this._freedChildIndicies.push(e),this._children[e]=null,t.isMounted()&&t.dismount();var n=this._fullChildren.indexOf(t),i=this._fullChildren.length,r=0;for(r=n;i-1>r;r++)this._fullChildren[r]=this._fullChildren[r+1];return this._fullChildren.pop(),!0}return!1},i.prototype.addComponent=function(t){var e=this._components.indexOf(t);return-1===e&&(e=this._freedComponentIndicies.length?this._freedComponentIndicies.pop():this._components.length,this._components[e]=t,this.isMounted()&&t.onMount&&t.onMount(this,e),this.isShown()&&t.onShow&&t.onShow()),e},i.prototype.getComponent=function(t){return this._components[t]},i.prototype.removeComponent=function(t){var e=this._components.indexOf(t);return-1!==e&&(this._freedComponentIndicies.push(e),this.isShown()&&t.onHide&&t.onHide(),this.isMounted()&&t.onDismount&&t.onDismount(),this._components[e]=null),t},i.prototype.removeUIEvent=function(t){var e,n=this.getUIEvents(),i=this._components,r=n.indexOf(t);if(-1!==r){n.splice(r,1);for(var s=0,o=i.length;o>s;s++)e=i[s],e&&e.onRemoveUIEvent&&e.onRemoveUIEvent(t)}},i.prototype.addUIEvent=function(t){var e,n=this.getUIEvents(),i=this._components,r=-1!==n.indexOf(t);if(!r){n.push(t);for(var s=0,o=i.length;o>s;s++)e=i[s],e&&e.onAddUIEvent&&e.onAddUIEvent(t)}return this},i.prototype._requestUpdate=function(t){(t||!this._requestingUpdate)&&(this._updater&&this._updater.requestUpdate(this),this._requestingUpdate=!0)},i.prototype._vecOptionalSet=function(t,e,n){return null!=n&&t[e]!==n?(t[e]=n,this._requestingUpdate||this._requestUpdate(),!0):!1},i.prototype.show=function(){return s.show(this.getLocation()),this._shown=!0,this},i.prototype.hide=function(){return s.hide(this.getLocation()),this._shown=!1,this},i.prototype.setAlign=function(t,e,n){if(this.constructor.NO_DEFAULT_COMPONENTS){if(!this.isMounted())throw new Error("This node does not have access to a transform component");o.get(this.getLocation()).setAlign(t,e,n)}else this.getComponent(this._transformID).setAlign(t,e,n);return this},i.prototype.setMountPoint=function(t,e,n){if(this.constructor.NO_DEFAULT_COMPONENTS){if(!this.isMounted())throw new Error("This node does not have access to a transform component");o.get(this.getLocation()).setMountPoint(t,e,n)}else this.getComponent(this._transformID).setMountPoint(t,e,n);return this},i.prototype.setOrigin=function(t,e,n){if(this.constructor.NO_DEFAULT_COMPONENTS){if(!this.isMounted())throw new Error("This node does not have access to a transform component");o.get(this.getLocation()).setOrigin(t,e,n)}else this.getComponent(this._transformID).setOrigin(t,e,n);return this},i.prototype.setPosition=function(t,e,n){if(this.constructor.NO_DEFAULT_COMPONENTS){if(!this.isMounted())throw new Error("This node does not have access to a transform component");o.get(this.getLocation()).setPosition(t,e,n)}else this.getComponent(this._transformID).setPosition(t,e,n);return this},i.prototype.setRotation=function(t,e,n,i){if(this.constructor.NO_DEFAULT_COMPONENTS){if(!this.isMounted())throw new Error("This node does not have access to a transform component");o.get(this.getLocation()).setRotation(t,e,n,i)}else this.getComponent(this._transformID).setRotation(t,e,n,i);return this},i.prototype.setScale=function(t,e,n){if(this.constructor.NO_DEFAULT_COMPONENTS){if(!this.isMounted())throw new Error("This node does not have access to a transform component");o.get(this.getLocation()).setScale(t,e,n)}else this.getComponent(this._transformID).setScale(t,e,n);return this},i.prototype.setOpacity=function(t){if(t!==this._opacity){this._opacity=t,this._requestingUpdate||this._requestUpdate();for(var e,n=0,i=this._components,r=i.length;r>n;n++)e=i[n],e&&e.onOpacityChange&&e.onOpacityChange(t)}return this},i.prototype.setSizeMode=function(t,e,n){if(this.constructor.NO_DEFAULT_COMPONENTS){if(!this.isMounted())throw new Error("This node does not have access to a size component");r.get(this.getLocation()).setSizeMode(t,e,n)}else this.getComponent(this._sizeID).setSizeMode(t,e,n);return this},i.prototype.setProportionalSize=function(t,e,n){if(this.constructor.NO_DEFAULT_COMPONENTS){if(!this.isMounted())throw new Error("This node does not have access to a size component");r.get(this.getLocation()).setProportional(t,e,n)}else this.getComponent(this._sizeID).setProportional(t,e,n);return this},i.prototype.setDifferentialSize=function(t,e,n){if(this.constructor.NO_DEFAULT_COMPONENTS){if(!this.isMounted())throw new Error("This node does not have access to a size component");r.get(this.getLocation()).setDifferential(t,e,n)}else this.getComponent(this._sizeID).setDifferential(t,e,n);return this},i.prototype.setAbsoluteSize=function(t,e,n){if(this.constructor.NO_DEFAULT_COMPONENTS){if(!this.isMounted())throw new Error("This node does not have access to a size component");r.get(this.getLocation()).setAbsolute(t,e,n)}else this.getComponent(this._sizeID).setAbsolute(t,e,n);return this},i.prototype.getFrame=function(){return this._updater.getFrame()},i.prototype.getComponents=function(){return this._components},i.prototype.update=function(t){this._inUpdate=!0;for(var e,n=this._nextUpdateQueue,i=this._updateQueue;n.length;)i.unshift(n.pop());for(;i.length;)e=this._components[i.shift()],e&&e.onUpdate&&e.onUpdate(t);return this._inUpdate=!1,this._requestingUpdate=!1,this.isMounted()?this._nextUpdateQueue.length&&(this._updater.requestUpdateOnNextTick(this),this._requestingUpdate=!0):(this._parent=null,this._id=null),this},i.prototype.mount=function(t){if(this.isMounted())throw new Error("Node is already mounted at: "+this.getLocation());return this.constructor.NO_DEFAULT_COMPONENTS?(o.registerTransformAtPath(t),r.registerSizeAtPath(t)):(o.registerTransformAtPath(t,this.getComponent(this._transformID)),r.registerSizeAtPath(t,this.getComponent(this._sizeID))),s.mount(t,this),this._requestingUpdate||this._requestUpdate(),this},i.prototype.dismount=function(){if(!this.isMounted())throw new Error("Node is not mounted");var t=this.getLocation();o.deregisterTransformAtPath(t),r.deregisterSizeAtPath(t),s.dismount(t),this._requestingUpdate||this._requestUpdate()},e.exports=i},{"./Dispatch":8,"./Size":15,"./SizeSystem":16,"./Transform":17,"./TransformSystem":18}],12:[function(t,e,n){"use strict";var i={hasTrailingSlash:function(t){return"/"===t[t.length-1]},depth:function(t){for(var e=0,n=t.length,i=this.hasTrailingSlash(t)?n-1:n,r=0;i>r;r++)e+="/"===t[r]?1:0;return e},index:function(t){for(var e=t.length,n=this.hasTrailingSlash(t)?e-1:e;n--&&"/"!==t[n];);var i=parseInt(t.substring(n+1));return isNaN(i)?0:i},indexAtDepth:function(t,e){for(var n=0,i=t.length,r=0;i>n;n++)if("/"===t[n]&&r++,r===e)return t=t.substring(n?n+1:n),r=t.indexOf("/"),t=-1===r?t:t.substring(0,r),r=parseInt(t),isNaN(r)?t:r},parent:function(t){return t.substring(0,t.lastIndexOf("/",t.length-2))},isChildOf:function(t,e){return this.isDescendentOf(t,e)&&this.depth(t)===this.depth(e)+1},isDescendentOf:function(t,e){return t===e?!1:(t=this.hasTrailingSlash(t)?t:t+"/",e=this.hasTrailingSlash(e)?e:e+"/",this.depth(e)<this.depth(t)&&0===t.indexOf(e))},getSelector:function(t){var e=t.indexOf("/");return-1===e?t:t.substring(0,e)}};e.exports=i},{}],13:[function(t,e,n){"use strict";function i(){this.items=[],this.paths=[],this.memo={}}var r=t("./Path");i.prototype.insert=function(t,e){var n=this.paths,i=n.indexOf(t);if(-1!==i)throw new Error("item already exists at path: "+t);for(var s=0,o=r.depth(t),a=r.index(t);n[s]&&o>=r.depth(n[s]);)s++;for(;n[s]&&o===r.depth(n[s])&&a<r.index(n[s]);)s++;n.splice(s,0,t),this.items.splice(s,0,e),this.memo[t]=s;for(var u=this.paths.length;u>s;s++)this.memo[this.paths[s]]=null},i.prototype.remove=function(t){var e=this.paths,n=this.memo[t]?this.memo[t]:e.indexOf(t);if(-1===n)throw new Error("Cannot remove. No item exists at path: "+t);e.splice(n,1),this.items.splice(n,1),this.memo[t]=null;for(var i=this.paths.length;i>n;n++)this.memo[this.paths[n]]=null},i.prototype.get=function(t){if(this.memo[t])return this.items[this.memo[t]];var e=this.paths.indexOf(t);return-1===e?void 0:(this.memo[t]=e,this.items[e])},i.prototype.getItems=function(){return this.items},i.prototype.getPaths=function(){return this.paths},e.exports=i},{"./Path":12}],14:[function(t,e,n){"use strict";function i(t,e){if(!t)throw new Error("Scene needs to be created with a DOM selector");if(!e)throw new Error("Scene needs to be created with a class like Famous");r.call(this),this._globalUpdater=e,this._selector=t,this.mount(t),this._globalUpdater.message(o.NEED_SIZE_FOR).message(t),this.show()}var r=t("./Node"),s=t("./Dispatch"),o=t("./Commands"),a=t("./TransformSystem"),u=t("./SizeSystem");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.NO_DEFAULT_COMPONENTS=!0,i.prototype.getUpdater=function(){return this._updater},i.prototype.getSelector=function(){return this._selector},i.prototype.getDispatch=function(){return console.warn("Scene#getDispatch is deprecated, require the dispatch directly"),s},i.prototype.onReceive=function(t,e){if("CONTEXT_RESIZE"===t){if(e.length<2)throw new Error("CONTEXT_RESIZE's payload needs to be at least a pair of pixel sizes");this.setSizeMode("absolute","absolute","absolute"),this.setAbsoluteSize(e[0],e[1],e[2]?e[2]:0),this._updater.message(o.WITH).message(this._selector).message(o.READY)}},i.prototype.mount=function(t){if(this.isMounted())throw new Error("Scene is already mounted at: "+this.getLocation());s.mount(t,this),this._id=t,this._mounted=!0,this._parent=this,a.registerTransformAtPath(t),u.registerSizeAtPath(t)},e.exports=i},{"./Commands":7,"./Dispatch":8,"./Node":11,"./SizeSystem":16,"./TransformSystem":18}],15:[function(t,e,n){"use strict";function i(t){this.finalSize=new Float32Array(3),this.sizeChanged=!1,this.sizeMode=new Uint8Array(3),this.sizeModeChanged=!1,this.absoluteSize=new Float32Array(3),this.absoluteSizeChanged=!1,this.proportionalSize=new Float32Array(a),this.proportionalSizeChanged=!1,this.differentialSize=new Float32Array(3),this.differentialSizeChanged=!1,this.renderSize=new Float32Array(3),this.renderSizeChanged=!1,this.parent=null!=t?t:null}function r(t,e,n){return null!=n&&t[e]!==n?(t[e]=n,!0):!1}function s(t,e,n,i){var s=!1;return s=r(t,0,e)||s,s=r(t,1,n)||s,s=r(t,2,i)||s}function o(t){if(t.constructor===String)switch(t.toLowerCase()){case"relative":case"default":return i.RELATIVE;case"absolute":return i.ABSOLUTE;case"render":return i.RENDER;default:throw new Error("unknown size mode: "+t)}else if(0>t||t>i.RENDER)throw new Error("unknown size mode: "+t);return t}var a=[1,1,1],u=[0,0,0];i.RELATIVE=0,i.ABSOLUTE=1,i.RENDER=2,i.DEFAULT=i.RELATIVE,i.prototype.setParent=function(t){return this.parent=t,this},i.prototype.getParent=function(){return this.parent},i.prototype.setSizeMode=function(t,e,n){return null!=t&&(t=o(t)),null!=e&&(e=o(e)),null!=n&&(n=o(n)),this.sizeModeChanged=s(this.sizeMode,t,e,n),this},i.prototype.getSizeMode=function(){return this.sizeMode},i.prototype.setAbsolute=function(t,e,n){return this.absoluteSizeChanged=s(this.absoluteSize,t,e,n),this},i.prototype.getAbsolute=function(){return this.absoluteSize},i.prototype.setProportional=function(t,e,n){return this.proportionalSizeChanged=s(this.proportionalSize,t,e,n),this},i.prototype.getProportional=function(){return this.proportionalSize},i.prototype.setDifferential=function(t,e,n){return this.differentialSizeChanged=s(this.differentialSize,t,e,n),this},i.prototype.getDifferential=function(){return this.differentialSize},i.prototype.get=function(){return this.finalSize},i.prototype.fromComponents=function(t){for(var e,n,r=this.sizeMode,s=this.finalSize,o=this.parent?this.parent.get():u,a=!1,l=t.length,h=0;3>h;h++){switch(e=s[h],r[h]){case i.RELATIVE:s[h]=o[h]*this.proportionalSize[h]+this.differentialSize[h];break;case i.ABSOLUTE:s[h]=this.absoluteSize[h];break;case i.RENDER:var c,f;for(n=0;l>n;n++)f=t[n],f&&f.getRenderSize&&(c=f.getRenderSize()[h],s[h]=s[h]<c||0===s[h]?c:s[h])}a=a||e!==s[h]}return this.sizeChanged=a,a},e.exports=i},{}],16:[function(t,e,n){"use strict";function i(){this.pathStore=new h}function r(t,e,n){var i=n.getSizeMode(),r=i[0],s=i[1],o=i[2];t.onSizeModeChange&&t.onSizeModeChange(r,s,o);for(var a=0,u=e.length;u>a;a++)e[a]&&e[a].onSizeModeChange&&e[a].onSizeModeChange(r,s,o);n.sizeModeChanged=!1}function s(t,e,n){var i=n.getAbsolute(),r=i[0],s=i[1],o=i[2];t.onAbsoluteSizeChange&&t.onAbsoluteSizeChange(r,s,o);for(var a=0,u=e.length;u>a;a++)e[a]&&e[a].onAbsoluteSizeChange&&e[a].onAbsoluteSizeChange(r,s,o);n.absoluteSizeChanged=!1}function o(t,e,n){var i=n.getProportional(),r=i[0],s=i[1],o=i[2];t.onProportionalSizeChange&&t.onProportionalSizeChange(r,s,o);for(var a=0,u=e.length;u>a;a++)e[a]&&e[a].onProportionalSizeChange&&e[a].onProportionalSizeChange(r,s,o);n.proportionalSizeChanged=!1}function a(t,e,n){var i=n.getDifferential(),r=i[0],s=i[1],o=i[2];t.onDifferentialSizeChange&&t.onDifferentialSizeChange(r,s,o);for(var a=0,u=e.length;u>a;a++)e[a]&&e[a].onDifferentialSizeChange&&e[a].onDifferentialSizeChange(r,s,o);n.differentialSizeChanged=!1}function u(t,e,n){var i=n.getRenderSize(),r=i[0],s=i[1],o=i[2];t.onRenderSizeChange&&t.onRenderSizeChange(r,s,o);for(var a=0,u=e.length;u>a;a++)e[a]&&e[a].onRenderSizeChange&&e[a].onRenderSizeChange(r,s,o);n.renderSizeChanged=!1}function l(t,e,n){var i=n.get(),r=i[0],s=i[1],o=i[2];t.onSizeChange&&t.onSizeChange(r,s,o);for(var a=0,u=e.length;u>a;a++)e[a]&&e[a].onSizeChange&&e[a].onSizeChange(r,s,o);n.sizeChanged=!1}var h=t("./PathStore"),c=t("./Size"),f=t("./Dispatch"),p=t("./Path");i.prototype.registerSizeAtPath=function(t,e){if(!p.depth(t))return this.pathStore.insert(t,e?e:new c);var n=this.pathStore.get(p.parent(t));if(!n)throw new Error("No parent size registered at expected path: "+p.parent(t));e&&e.setParent(n),this.pathStore.insert(t,e?e:new c(n))},i.prototype.deregisterSizeAtPath=function(t){this.pathStore.remove(t)},i.prototype.get=function(t){return this.pathStore.get(t)},i.prototype.update=function(){var t,e,n,i,h,c=this.pathStore.getItems(),p=this.pathStore.getPaths();for(n=0,i=c.length;i>n;n++)t=f.getNode(p[n]),h=t.getComponents(),t&&(e=c[n],e.sizeModeChanged&&r(t,h,e),e.absoluteSizeChanged&&s(t,h,e),e.proportionalSizeChanged&&o(t,h,e),e.differentialSizeChanged&&a(t,h,e),e.renderSizeChanged&&u(t,h,e),e.fromComponents(h)&&l(t,h,e))},e.exports=new i},{"./Dispatch":8,"./Path":12,"./PathStore":13,"./Size":15}],17:[function(t,e,n){"use strict";function i(t){this.local=new Float32Array(i.IDENT),this.global=new Float32Array(i.IDENT),this.offsets={align:new Float32Array(3),alignChanged:!1,mountPoint:new Float32Array(3),mountPointChanged:!1,origin:new Float32Array(3),originChanged:!1},this.vectors={position:new Float32Array(3),positionChanged:!1,rotation:new Float32Array(l),rotationChanged:!1,scale:new Float32Array(h),scaleChanged:!1},this._lastEulerVals=[0,0,0],this._lastEuler=!1,this.parent=t?t:null,this.breakPoint=!1,this.calculatingWorldMatrix=!1}function r(t,e,n){return null!=n&&t[e]!==n?(t[e]=n,!0):!1}function s(t,e,n,i,s){var o=!1;return o=r(t,0,e)||o,o=r(t,1,n)||o,o=r(t,2,i)||o,null!=s&&(o=r(t,3,s)||o),o}function o(t,e){var n=e.getLocalTransform(),r=t.getSize(),s=e.vectors,o=e.offsets,a=t.getParent().getSize(),u=0,l=n[0],h=n[1],c=n[2],f=n[4],p=n[5],d=n[6],m=n[8],g=n[9],_=n[10],v=n[12],y=n[13],b=n[14],E=s.position[0],w=s.position[1],T=s.position[2],C=s.rotation[0],S=s.rotation[1],A=s.rotation[2],O=s.rotation[3],x=s.scale[0],R=s.scale[1],I=s.scale[2],N=o.align[0]*a[0],V=o.align[1]*a[1],L=o.align[2]*a[2],M=o.mountPoint[0]*r[0],z=o.mountPoint[1]*r[1],D=o.mountPoint[2]*r[2],P=o.origin[0]*r[0],F=o.origin[1]*r[1],U=o.origin[2]*r[2],H=O*C,k=O*S,G=O*A,q=C*C,j=S*S,W=A*A,B=C*S,Y=C*A,Q=S*A;return n[0]=(1-2*(j+W))*x,n[1]=2*(B+G)*x,n[2]=2*(Y-k)*x,n[3]=0,n[4]=2*(B-G)*R,n[5]=(1-2*(q+W))*R,n[6]=2*(Q+H)*R,n[7]=0,n[8]=2*(Y+k)*I,n[9]=2*(Q-H)*I,n[10]=(1-2*(q+j))*I,n[11]=0,n[12]=N+E-M+P-(n[0]*P+n[4]*F+n[8]*U),n[13]=V+w-z+F-(n[1]*P+n[5]*F+n[9]*U),n[14]=L+T-D+U-(n[2]*P+n[6]*F+n[10]*U),n[15]=1,e.calculatingWorldMatrix&&e.calculateWorldMatrix()&&(u|=i.WORLD_CHANGED),(l!==n[0]||h!==n[1]||c!==n[2]||f!==n[4]||p!==n[5]||d!==n[6]||m!==n[8]||g!==n[9]||_!==n[10]||v!==n[12]||y!==n[13]||b!==n[14])&&(u|=i.LOCAL_CHANGED),u}function a(t,e){var n=e.getLocalTransform(),r=e.parent.getLocalTransform(),s=t.getSize(),o=e.vectors,a=e.offsets,u=t.getParent().getSize(),l=!1,h=n[0],c=n[1],f=n[2],p=n[4],d=n[5],m=n[6],g=n[8],_=n[9],v=n[10],y=n[12],b=n[13],E=n[14],w=r[0],T=r[1],C=r[2],S=r[4],A=r[5],O=r[6],x=r[8],R=r[9],I=r[10],N=r[12],V=r[13],L=r[14],M=o.position[0],z=o.position[1],D=o.position[2],P=o.rotation[0],F=o.rotation[1],U=o.rotation[2],H=o.rotation[3],k=o.scale[0],G=o.scale[1],q=o.scale[2],j=a.align[0]*u[0],W=a.align[1]*u[1],B=a.align[2]*u[2],Y=a.mountPoint[0]*s[0],Q=a.mountPoint[1]*s[1],X=a.mountPoint[2]*s[2],K=a.origin[0]*s[0],Z=a.origin[1]*s[1],J=a.origin[2]*s[2],$=H*P,tt=H*F,et=H*U,nt=P*P,it=F*F,rt=U*U,st=P*F,ot=P*U,at=F*U,ut=(1-2*(it+rt))*k,lt=2*(st+et)*k,ht=2*(ot-tt)*k,ct=2*(st-et)*G,ft=(1-2*(nt+rt))*G,pt=2*(at+$)*G,dt=2*(ot+tt)*q,mt=2*(at-$)*q,gt=(1-2*(nt+it))*q,_t=j+M-Y+K-(ut*K+ct*Z+dt*J),vt=W+z-Q+Z-(lt*K+ft*Z+mt*J),yt=B+D-X+J-(ht*K+pt*Z+gt*J);return n[0]=w*ut+S*lt+x*ht,n[1]=T*ut+A*lt+R*ht,n[2]=C*ut+O*lt+I*ht,n[3]=0,n[4]=w*ct+S*ft+x*pt,n[5]=T*ct+A*ft+R*pt,n[6]=C*ct+O*ft+I*pt,n[7]=0,n[8]=w*dt+S*mt+x*gt,n[9]=T*dt+A*mt+R*gt,n[10]=C*dt+O*mt+I*gt,n[11]=0,n[12]=w*_t+S*vt+x*yt+N,n[13]=T*_t+A*vt+R*yt+V,n[14]=C*_t+O*vt+I*yt+L,n[15]=1,e.calculatingWorldMatrix&&e.calculateWorldMatrix()&&(l|=i.WORLD_CHANGED),(h!==n[0]||c!==n[1]||f!==n[2]||p!==n[4]||d!==n[5]||m!==n[6]||g!==n[8]||_!==n[9]||v!==n[10]||y!==n[12]||b!==n[13]||E!==n[14])&&(l|=i.LOCAL_CHANGED),l}function u(t,e,n){var i,r=e[0],s=e[1],o=e[2],a=e[4],u=e[5],l=e[6],h=e[8],c=e[9],f=e[10],p=e[12],d=e[13],m=e[14],g=!1,_=n[0],v=n[1],y=n[2],b=n[3];return i=_*r+v*a+y*h+b*p,g=g?g:t[0]===i,t[0]=i,i=_*s+v*u+y*c+b*d,g=g?g:t[1]===i,t[1]=i,i=_*o+v*l+y*f+b*m,g=g?g:t[2]===i,t[2]=i,t[3]=0,_=n[4],v=n[5],y=n[6],b=n[7],i=_*r+v*a+y*h+b*p,g=g?g:t[4]===i,t[4]=i,i=_*s+v*u+y*c+b*d,g=g?g:t[5]===i,t[5]=i,i=_*o+v*l+y*f+b*m,g=g?g:t[6]===i,t[6]=i,t[7]=0,_=n[8],v=n[9],y=n[10],b=n[11],i=_*r+v*a+y*h+b*p,g=g?g:t[8]===i,t[8]=i,i=_*s+v*u+y*c+b*d,g=g?g:t[9]===i,t[9]=i,i=_*o+v*l+y*f+b*m,g=g?g:t[10]===i,t[10]=i,t[11]=0,_=n[12],v=n[13],y=n[14],b=n[15],i=_*r+v*a+y*h+b*p,g=g?g:t[12]===i,t[12]=i,i=_*s+v*u+y*c+b*d,g=g?g:t[13]===i,t[13]=i,i=_*o+v*l+y*f+b*m,g=g?g:t[14]===i,t[14]=i,t[15]=1,g}var l=[0,0,0,1],h=[1,1,1];i.IDENT=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],i.WORLD_CHANGED=1,i.LOCAL_CHANGED=2,i.prototype.reset=function(){this.parent=null,this.breakPoint=!1,this.calculatingWorldMatrix=!1},i.prototype.setParent=function(t){this.parent=t},i.prototype.getParent=function(){return this.parent},i.prototype.setBreakPoint=function(){this.breakPoint=!0,this.calculatingWorldMatrix=!0},i.prototype.setCalculateWorldMatrix=function(){this.calculatingWorldMatrix=!0},i.prototype.isBreakPoint=function(){return this.breakPoint},i.prototype.getLocalTransform=function(){return this.local},i.prototype.getWorldTransform=function(){if(!this.isBreakPoint()&&!this.calculatingWorldMatrix)throw new Error("This transform is not calculating world transforms");return this.global},i.prototype.calculate=function(t){return!this.parent||this.parent.isBreakPoint()?o(t,this):a(t,this)},i.prototype.getPosition=function(){return this.vectors.position},i.prototype.setPosition=function(t,e,n){this.vectors.positionChanged=s(this.vectors.position,t,e,n)},i.prototype.getRotation=function(){return this.vectors.rotation},i.prototype.setRotation=function(t,e,n,i){var r,o,a,u,l=this.vectors.rotation;if(null!=i)r=t,o=e,a=n,u=i,this._lastEulerVals[0]=null,this._lastEulerVals[1]=null,this._lastEulerVals[2]=null,this._lastEuler=!1;else{if(null==t||null==e||null==n)if(this._lastEuler)t=null==t?this._lastEulerVals[0]:t,e=null==e?this._lastEulerVals[1]:e,n=null==n?this._lastEulerVals[2]:n;else{var h=-2*(l[1]*l[2]-l[3]*l[0]);Math.abs(h)>.99999?(e=null==e?.5*Math.PI*h:e,t=null==t?Math.atan2(-l[0]*l[2]+l[3]*l[1],.5-l[1]*l[1]-l[2]*l[2]):t,n=null==n?0:n):(e=null==e?Math.asin(h):e,t=null==t?Math.atan2(l[0]*l[2]+l[3]*l[1],.5-l[0]*l[0]-l[1]*l[1]):t,n=null==n?Math.atan2(l[0]*l[1]+l[3]*l[2],.5-l[0]*l[0]-l[2]*l[2]):n)}var c=.5*t,f=.5*e,p=.5*n,d=Math.sin(c),m=Math.sin(f),g=Math.sin(p),_=Math.cos(c),v=Math.cos(f),y=Math.cos(p),b=m*g,E=v*g,w=m*y,T=v*y;r=d*T+_*b,o=_*w-d*E,a=_*E+d*w,u=_*T-d*b,this._lastEuler=!0,this._lastEulerVals[0]=t,this._lastEulerVals[1]=e,this._lastEulerVals[2]=n}this.vectors.rotationChanged=s(l,r,o,a,u)},i.prototype.getScale=function(){return this.vectors.scale},i.prototype.setScale=function(t,e,n){this.vectors.scaleChanged=s(this.vectors.scale,t,e,n)},i.prototype.getAlign=function(){return this.offsets.align},i.prototype.setAlign=function(t,e,n){this.offsets.alignChanged=s(this.offsets.align,t,e,null!=n?n-.5:n)},i.prototype.getMountPoint=function(){return this.offsets.mountPoint},i.prototype.setMountPoint=function(t,e,n){this.offsets.mountPointChanged=s(this.offsets.mountPoint,t,e,null!=n?n-.5:n)},i.prototype.getOrigin=function(){return this.offsets.origin},i.prototype.setOrigin=function(t,e,n){this.offsets.originChanged=s(this.offsets.origin,t,e,null!=n?n-.5:n)},i.prototype.calculateWorldMatrix=function(){for(var t=this.parent;t&&!t.isBreakPoint();)t=t.parent;if(t)return u(this.global,t.getWorldTransform(),this.local);for(var e=0;16>e;e++)this.global[e]=this.local[e];return!1},e.exports=i},{}],18:[function(t,e,n){"use strict";function i(){this.pathStore=new g}function r(t,e,n){var i=n.align[0],r=n.align[1],s=n.align[2];t.onAlignChange&&t.onAlignChange(i,r,s);for(var o=0,a=e.length;a>o;o++)e[o]&&e[o].onAlignChange&&e[o].onAlignChange(i,r,s);n.alignChanged=!1}function s(t,e,n){var i=n.mountPoint[0],r=n.mountPoint[1],s=n.mountPoint[2];t.onMountPointChange&&t.onMountPointChange(i,r,s);for(var o=0,a=e.length;a>o;o++)e[o]&&e[o].onMountPointChange&&e[o].onMountPointChange(i,r,s);n.mountPointChanged=!1}function o(t,e,n){var i=n.origin[0],r=n.origin[1],s=n.origin[2];t.onOriginChange&&t.onOriginChange(i,r,s);for(var o=0,a=e.length;a>o;o++)e[o]&&e[o].onOriginChange&&e[o].onOriginChange(i,r,s);n.originChanged=!1}function a(t,e,n){var i=n.position[0],r=n.position[1],s=n.position[2];t.onPositionChange&&t.onPositionChange(i,r,s);for(var o=0,a=e.length;a>o;o++)e[o]&&e[o].onPositionChange&&e[o].onPositionChange(i,r,s);n.positionChanged=!1}function u(t,e,n){var i=n.rotation[0],r=n.rotation[1],s=n.rotation[2],o=n.rotation[3];t.onRotationChange&&t.onRotationChange(i,r,s,o);for(var a=0,u=e.length;u>a;a++)e[a]&&e[a].onRotationChange&&e[a].onRotationChange(i,r,s,o);n.rotationChanged=!1}function l(t,e,n){var i=n.scale[0],r=n.scale[1],s=n.scale[2];t.onScaleChange&&t.onScaleChange(i,r,s);for(var o=0,a=e.length;a>o;o++)e[o]&&e[o].onScaleChange&&e[o].onScaleChange(i,r,s);n.scaleChanged=!1}function h(t,e,n){t.onTransformChange&&t.onTransformChange(n);for(var i=0,r=e.length;r>i;i++)e[i]&&e[i].onTransformChange&&e[i].onTransformChange(n)}function c(t,e,n){t.onLocalTransformChange&&t.onLocalTransformChange(n);for(var i=0,r=e.length;r>i;i++)e[i]&&e[i].onLocalTransformChange&&e[i].onLocalTransformChange(n)}function f(t,e,n){t.onWorldTransformChange&&t.onWorldTransformChange(n);for(var i=0,r=e.length;r>i;i++)e[i]&&e[i].onWorldTransformChange&&e[i].onWorldTransformChange(n)}var p=t("./Path"),d=t("./Transform"),m=t("./Dispatch"),g=t("./PathStore");i.prototype.registerTransformAtPath=function(t,e){if(!p.depth(t))return this.pathStore.insert(t,e?e:new d);var n=this.pathStore.get(p.parent(t));if(!n)throw new Error("No parent transform registered at expected path: "+p.parent(t));e&&e.setParent(n),this.pathStore.insert(t,e?e:new d(n))},i.prototype.deregisterTransformAtPath=function(t){this.pathStore.remove(t)},i.prototype.makeBreakPointAt=function(t){var e=this.pathStore.get(t);if(!e)throw new Error("No transform Registered at path: "+t);e.setBreakPoint()},i.prototype.makeCalculateWorldMatrixAt=function(t){var e=this.pathStore.get(t);if(!e)throw new Error("No transform Registered at path: "+t);e.setCalculateWorldMatrix()},i.prototype.get=function(t){return this.pathStore.get(t)},i.prototype.update=function(){for(var t,e,n,i,p,g,_=this.pathStore.getItems(),v=this.pathStore.getPaths(),y=0,b=_.length;b>y;y++)n=m.getNode(v[y]),n&&(g=n.getComponents(),t=_[y],i=t.vectors,p=t.offsets,p.alignChanged&&r(n,g,p),p.mountPointChanged&&s(n,g,p),p.originChanged&&o(n,g,p),i.positionChanged&&a(n,g,i),i.rotationChanged&&u(n,g,i),i.scaleChanged&&l(n,g,i),(e=t.calculate(n))&&(h(n,g,t),e&d.LOCAL_CHANGED&&c(n,g,t.getLocalTransform()),e&d.WORLD_CHANGED&&f(n,g,t.getWorldTransform())))},e.exports=new i},{"./Dispatch":8,"./Path":12,"./PathStore":13,"./Transform":17}],19:[function(t,e,n){"use strict";function i(t,e){if(!t)throw new Error("DOMElement must be instantiated on a node");if(this._changeQueue=[],this._requestingUpdate=!1,this._renderSized=!1,this._requestRenderSize=!1,this._UIEvents=t.getUIEvents().slice(0),this._classes=["famous-dom-element"],this._requestingEventListeners=[],this._styles={},this._attributes={},this._content="",this._tagName=e&&e.tagName?e.tagName:"div",this._renderSize=[0,0,0],this._node=t,t&&t.addComponent(this),this._callbacks=new r,this.setProperty("display",t.isShown()?"block":"none"),this.onOpacityChange(t.getOpacity()),e){var n,i;if(e.classes)for(n=0;n<e.classes.length;n++)this.addClass(e.classes[n]);if(e.attributes)for(i in e.attributes)this.setAttribute(i,e.attributes[i]);if(e.properties)for(i in e.properties)this.setProperty(i,e.properties[i]);e.id&&this.setId(e.id),e.content&&this.setContent(e.content),e.cutout===!1&&this.setCutoutState(e.cutout)}}var r=t("../utilities/CallbackStore"),s=t("../core/TransformSystem"),o=t("../core/Commands"),a=t("../core/Size");i.prototype.getValue=function(){return{classes:this._classes,styles:this._styles,attributes:this._attributes,content:this._content,id:this._attributes.id,
tagName:this._tagName}},i.prototype.onUpdate=function(){var t=this._node,e=this._changeQueue,n=e.length;if(n&&t){for(t.sendDrawCommand(o.WITH),t.sendDrawCommand(t.getLocation());n--;)t.sendDrawCommand(e.shift());this._requestRenderSize&&(t.sendDrawCommand(o.DOM_RENDER_SIZE),t.sendDrawCommand(t.getLocation()),this._requestRenderSize=!1)}this._requestingUpdate=!1},i.prototype.onMount=function(t,e){this._node=t,this._id=e,this._UIEvents=t.getUIEvents().slice(0),s.makeBreakPointAt(t.getLocation()),this.onSizeModeChange.apply(this,t.getSizeMode()),this.draw(),this.setAttribute("data-fa-path",t.getLocation())},i.prototype.onDismount=function(){this.setProperty("display","none"),this.setAttribute("data-fa-path",""),this.setCutoutState(!1),this.onUpdate(),this._initialized=!1},i.prototype.onShow=function(){this.setProperty("display","block")},i.prototype.onHide=function(){this.setProperty("display","none")},i.prototype.setCutoutState=function(t){return this._initialized&&this._changeQueue.push(o.GL_CUTOUT_STATE,t),this._requestingUpdate||this._requestUpdate(),this},i.prototype.onTransformChange=function(t){this._changeQueue.push(o.CHANGE_TRANSFORM),t=t.getLocalTransform();for(var e=0,n=t.length;n>e;e++)this._changeQueue.push(t[e]);this._requestingUpdate||this._requestUpdate()},i.prototype.onSizeChange=function(t,e){var n=this._node.getSizeMode(),i=n[0]!==a.RENDER,r=n[1]!==a.RENDER;return this._initialized&&this._changeQueue.push(o.CHANGE_SIZE,i?t:i,r?e:r),this._requestingUpdate||this._requestUpdate(),this},i.prototype.onOpacityChange=function(t){return this.setProperty("opacity",t)},i.prototype.onAddUIEvent=function(t){return-1===this._UIEvents.indexOf(t)?(this._subscribe(t),this._UIEvents.push(t)):this._inDraw&&this._subscribe(t),this},i.prototype.onRemoveUIEvent=function(t){var e=this._UIEvents.indexOf(t);return-1!==e?(this._unsubscribe(t),this._UIEvents.splice(e,1)):this._inDraw&&this._unsubscribe(t),this},i.prototype._subscribe=function(t){this._initialized&&this._changeQueue.push(o.SUBSCRIBE,t),this._requestingUpdate||this._requestUpdate()},i.prototype.preventDefault=function(t){this._initialized&&this._changeQueue.push(o.PREVENT_DEFAULT,t),this._requestingUpdate||this._requestUpdate()},i.prototype.allowDefault=function(t){this._initialized&&this._changeQueue.push(o.ALLOW_DEFAULT,t),this._requestingUpdate||this._requestUpdate()},i.prototype._unsubscribe=function(t){this._initialized&&this._changeQueue.push(o.UNSUBSCRIBE,t),this._requestingUpdate||this._requestUpdate()},i.prototype.onSizeModeChange=function(t,e,n){(t===a.RENDER||e===a.RENDER||n===a.RENDER)&&(this._renderSized=!0,this._requestRenderSize=!0);var i=this._node.getSize();this.onSizeChange(i[0],i[1])},i.prototype.getRenderSize=function(){return this._renderSize},i.prototype._requestUpdate=function(){!this._requestingUpdate&&this._id&&(this._node.requestUpdate(this._id),this._requestingUpdate=!0)},i.prototype.init=function(){this._changeQueue.push(o.INIT_DOM,this._tagName),this._initialized=!0,this.onTransformChange(s.get(this._node.getLocation()));var t=this._node.getSize();this.onSizeChange(t[0],t[1]),this._requestingUpdate||this._requestUpdate()},i.prototype.setId=function(t){return this.setAttribute("id",t),this},i.prototype.addClass=function(t){return this._classes.indexOf(t)<0?(this._initialized&&this._changeQueue.push(o.ADD_CLASS,t),this._classes.push(t),this._requestingUpdate||this._requestUpdate(),this._renderSized&&(this._requestRenderSize=!0),this):(this._inDraw&&(this._initialized&&this._changeQueue.push(o.ADD_CLASS,t),this._requestingUpdate||this._requestUpdate()),this)},i.prototype.removeClass=function(t){var e=this._classes.indexOf(t);return 0>e?this:(this._changeQueue.push(o.REMOVE_CLASS,t),this._classes.splice(e,1),this._requestingUpdate||this._requestUpdate(),this)},i.prototype.hasClass=function(t){return-1!==this._classes.indexOf(t)},i.prototype.setAttribute=function(t,e){return(this._attributes[t]!==e||this._inDraw)&&(this._attributes[t]=e,this._initialized&&this._changeQueue.push(o.CHANGE_ATTRIBUTE,t,e),this._requestUpdate||this._requestUpdate()),this},i.prototype.setProperty=function(t,e){return(this._styles[t]!==e||this._inDraw)&&(this._styles[t]=e,this._initialized&&this._changeQueue.push(o.CHANGE_PROPERTY,t,e),this._requestingUpdate||this._requestUpdate(),this._renderSized&&(this._requestRenderSize=!0)),this},i.prototype.setContent=function(t){return(this._content!==t||this._inDraw)&&(this._content=t,this._initialized&&this._changeQueue.push(o.CHANGE_CONTENT,t),this._requestingUpdate||this._requestUpdate(),this._renderSized&&(this._requestRenderSize=!0)),this},i.prototype.on=function(t,e){return this._callbacks.on(t,e)},i.prototype.onReceive=function(t,e){"resize"===t&&(this._renderSize[0]=e.val[0],this._renderSize[1]=e.val[1],this._requestingUpdate||this._requestUpdate()),this._callbacks.trigger(t,e)},i.prototype.draw=function(){var t,e,n;for(this._inDraw=!0,this.init(),e=0,n=this._classes.length;n>e;e++)this.addClass(this._classes[e]);this._content&&this.setContent(this._content);for(t in this._styles)null!=this._styles[t]&&this.setProperty(t,this._styles[t]);for(t in this._attributes)null!=this._attributes[t]&&this.setAttribute(t,this._attributes[t]);for(e=0,n=this._UIEvents.length;n>e;e++)this.onAddUIEvent(this._UIEvents[e]);this._inDraw=!1},e.exports=i},{"../core/Commands":7,"../core/Size":15,"../core/TransformSystem":18,"../utilities/CallbackStore":43}],20:[function(t,e,n){"use strict";function i(t,e,n){var i=this;t.classList.add("famous-dom-renderer"),c=c||u("transform"),this._compositor=n,this._target=null,this._parent=null,this._path=null,this._children=[],this._insertElCallbackStore=new l,this._removeElCallbackStore=new l,this._root=new s(t,e),this._boundTriggerEvent=function(t){return i._triggerEvent(t)},this._selector=e,this._elements={},this._elements[e]=this._root,this.perspectiveTransform=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this._VPtransform=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this._lastEv=null}function r(t){for(var e=[],n=t.target;n!==document.body;)e.push(n),n=n.parentNode;return e}var s=t("./ElementCache"),o=t("./Math"),a=t("../core/Path"),u=t("../utilities/vendorPrefix"),l=t("../utilities/CallbackStore"),h=t("./events/EventMap"),c=null;i.prototype.subscribe=function(t){this._assertTargetLoaded(),this._listen(t),this._target.subscribe[t]=!0},i.prototype.preventDefault=function(t){this._assertTargetLoaded(),this._listen(t),this._target.preventDefault[t]=!0},i.prototype.allowDefault=function(t){this._assertTargetLoaded(),this._listen(t),this._target.preventDefault[t]=!1},i.prototype._listen=function(t){if(this._assertTargetLoaded(),!this._target.listeners[t]&&!this._root.listeners[t]){var e=h[t][1]?this._root:this._target;e.listeners[t]=this._boundTriggerEvent,e.element.addEventListener(t,this._boundTriggerEvent)}},i.prototype.unsubscribe=function(t){this._assertTargetLoaded(),this._target.subscribe[t]=!1},i.prototype._triggerEvent=function(t){if(this._lastEv!==t)for(var e=t.path?t.path:r(t),n=0;n<e.length;n++)if(e[n].dataset){var i=e[n].dataset.faPath;if(i&&(this._elements[i].preventDefault[t.type]&&t.preventDefault(),this._elements[i]&&this._elements[i].subscribe[t.type])){this._lastEv=t;var s=h[t.type][0];this._compositor.sendEvent(i,t.type,new s(t));break}}},i.prototype.getSizeOf=function(t){var e=this._elements[t];if(!e)return null;var n={val:e.size};return this._compositor.sendEvent(t,"resize",n),n},i.prototype.draw=function(t){t.perspectiveDirty&&(this.perspectiveDirty=!0,this.perspectiveTransform[0]=t.perspectiveTransform[0],this.perspectiveTransform[1]=t.perspectiveTransform[1],this.perspectiveTransform[2]=t.perspectiveTransform[2],this.perspectiveTransform[3]=t.perspectiveTransform[3],this.perspectiveTransform[4]=t.perspectiveTransform[4],this.perspectiveTransform[5]=t.perspectiveTransform[5],this.perspectiveTransform[6]=t.perspectiveTransform[6],this.perspectiveTransform[7]=t.perspectiveTransform[7],this.perspectiveTransform[8]=t.perspectiveTransform[8],this.perspectiveTransform[9]=t.perspectiveTransform[9],this.perspectiveTransform[10]=t.perspectiveTransform[10],this.perspectiveTransform[11]=t.perspectiveTransform[11],this.perspectiveTransform[12]=t.perspectiveTransform[12],this.perspectiveTransform[13]=t.perspectiveTransform[13],this.perspectiveTransform[14]=t.perspectiveTransform[14],this.perspectiveTransform[15]=t.perspectiveTransform[15]),(t.viewDirty||t.perspectiveDirty)&&(o.multiply(this._VPtransform,this.perspectiveTransform,t.viewTransform),this._root.element.style[c]=this._stringifyMatrix(this._VPtransform))},i.prototype._assertPathLoaded=function(){if(!this._path)throw new Error("path not loaded")},i.prototype._assertParentLoaded=function(){if(!this._parent)throw new Error("parent not loaded")},i.prototype._assertChildrenLoaded=function(){if(!this._children)throw new Error("children not loaded")},i.prototype._assertTargetLoaded=function(){if(!this._target)throw new Error("No target loaded")},i.prototype.findParent=function(){this._assertPathLoaded();for(var t,e=this._path;!t&&e.length;)e=e.substring(0,e.lastIndexOf("/")),t=this._elements[e];return this._parent=t,t},i.prototype.findTarget=function(){return this._target=this._elements[this._path],this._target},i.prototype.loadPath=function(t){return this._path=t,this._target=this._elements[this._path],this._path},i.prototype.resolveChildren=function(t,e){for(var n,i,r=0,s=this._path;n=e.childNodes[r];)n.dataset?(i=n.dataset.faPath,i&&a.isDescendentOf(i,s)?t.appendChild(n):r++):r++},i.prototype.insertEl=function(t){if(this.findParent(),this._assertParentLoaded(),this._parent["void"])throw new Error(this._parent.path+" is a void element. Void elements are not allowed to have children.");this._target||(this._target=new s(document.createElement(t),this._path));var e=this._target.element,n=this._parent.element;this.resolveChildren(e,n),n.appendChild(e),this._elements[this._path]=this._target,this._insertElCallbackStore.trigger(this._path,this._target)},i.prototype.setProperty=function(t,e){this._assertTargetLoaded(),this._target.element.style[t]=e},i.prototype.setSize=function(t,e){this._assertTargetLoaded(),this.setWidth(t),this.setHeight(e)},i.prototype.setWidth=function(t){this._assertTargetLoaded();var e=this._target.content;t===!1?(this._target.explicitWidth=!0,e&&(e.style.width=""),t=e?e.offsetWidth:0,this._target.element.style.width=t+"px"):(this._target.explicitWidth=!1,e&&(e.style.width=t+"px"),this._target.element.style.width=t+"px"),this._target.size[0]=t},i.prototype.setHeight=function(t){this._assertTargetLoaded();var e=this._target.content;t===!1?(this._target.explicitHeight=!0,e&&(e.style.height=""),t=e?e.offsetHeight:0,this._target.element.style.height=t+"px"):(this._target.explicitHeight=!1,e&&(e.style.height=t+"px"),this._target.element.style.height=t+"px"),this._target.size[1]=t},i.prototype.setAttribute=function(t,e){this._assertTargetLoaded(),this._target.element.setAttribute(t,e)},i.prototype.setContent=function(t){this._assertTargetLoaded(),this._target.formElement?this._target.element.value=t:(this._target.content||(this._target.content=document.createElement("div"),this._target.content.classList.add("famous-dom-element-content"),this._target.element.insertBefore(this._target.content,this._target.element.firstChild)),this._target.content.innerHTML=t),this.setSize(this._target.explicitWidth?!1:this._target.size[0],this._target.explicitHeight?!1:this._target.size[1])},i.prototype.setMatrix=function(t){this._assertTargetLoaded(),this._target.element.style[c]=this._stringifyMatrix(t)},i.prototype.addClass=function(t){this._assertTargetLoaded(),this._target.element.classList.add(t)},i.prototype.removeClass=function(t){this._assertTargetLoaded(),this._target.element.classList.remove(t)},i.prototype._stringifyMatrix=function(t){var e="matrix3d(";return e+=t[0]<1e-6&&t[0]>-1e-6?"0,":t[0]+",",e+=t[1]<1e-6&&t[1]>-1e-6?"0,":t[1]+",",e+=t[2]<1e-6&&t[2]>-1e-6?"0,":t[2]+",",e+=t[3]<1e-6&&t[3]>-1e-6?"0,":t[3]+",",e+=t[4]<1e-6&&t[4]>-1e-6?"0,":t[4]+",",e+=t[5]<1e-6&&t[5]>-1e-6?"0,":t[5]+",",e+=t[6]<1e-6&&t[6]>-1e-6?"0,":t[6]+",",e+=t[7]<1e-6&&t[7]>-1e-6?"0,":t[7]+",",e+=t[8]<1e-6&&t[8]>-1e-6?"0,":t[8]+",",e+=t[9]<1e-6&&t[9]>-1e-6?"0,":t[9]+",",e+=t[10]<1e-6&&t[10]>-1e-6?"0,":t[10]+",",e+=t[11]<1e-6&&t[11]>-1e-6?"0,":t[11]+",",e+=t[12]<1e-6&&t[12]>-1e-6?"0,":t[12]+",",e+=t[13]<1e-6&&t[13]>-1e-6?"0,":t[13]+",",e+=t[14]<1e-6&&t[14]>-1e-6?"0,":t[14]+",",e+=t[15]+")"},i.prototype.onInsertEl=function(t,e){return this._insertElCallbackStore.on(t,e),this},i.prototype.offInsertEl=function(t,e){return this._insertElCallbackStore.off(t,e),this},i.prototype.onRemoveEl=function(t,e){return this._removeElCallbackStore.on(t,e),this},i.prototype.offRemoveEl=function(t,e){return this._removeElCallbackStore.off(t,e),this},e.exports=i},{"../core/Path":12,"../utilities/CallbackStore":43,"../utilities/vendorPrefix":47,"./ElementCache":21,"./Math":22,"./events/EventMap":26}],21:[function(t,e,n){"use strict";function i(t,e){this.tagName=t.tagName.toLowerCase(),this["void"]=r[this.tagName];var n=t.constructor;this.formElement=n===HTMLInputElement||n===HTMLTextAreaElement||n===HTMLSelectElement,this.element=t,this.path=e,this.content=null,this.size=new Int16Array(3),this.explicitHeight=!1,this.explicitWidth=!1,this.postRenderSize=new Float32Array(2),this.listeners={},this.preventDefault={},this.subscribe={}}var r=t("./VoidElements");e.exports=i},{"./VoidElements":23}],22:[function(t,e,n){"use strict";function i(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7],h=e[8],c=e[9],f=e[10],p=e[11],d=e[12],m=e[13],g=e[14],_=e[15],v=n*a-i*o,y=n*u-r*o,b=n*l-s*o,E=i*u-r*a,w=i*l-s*a,T=r*l-s*u,C=h*m-c*d,S=h*g-f*d,A=h*_-p*d,O=c*g-f*m,x=c*_-p*m,R=f*_-p*g,I=v*R-y*x+b*O+E*A-w*S+T*C;return I?(I=1/I,t[0]=(a*R-u*x+l*O)*I,t[1]=(r*x-i*R-s*O)*I,t[2]=(m*T-g*w+_*E)*I,t[3]=(f*w-c*T-p*E)*I,t[4]=(u*A-o*R-l*S)*I,t[5]=(n*R-r*A+s*S)*I,t[6]=(g*b-d*T-_*y)*I,t[7]=(h*T-f*b+p*y)*I,t[8]=(o*x-a*A+l*C)*I,t[9]=(i*A-n*x-s*C)*I,t[10]=(d*w-m*b+_*v)*I,t[11]=(c*b-h*w-p*v)*I,t[12]=(a*S-o*O-u*C)*I,t[13]=(n*O-i*S+r*C)*I,t[14]=(m*y-d*E-g*v)*I,t[15]=(h*E-c*y+f*v)*I,t):null}function r(t,e,n){var i,r,s,o,a=e[0],u=e[1],l=e[2],h=e[3],c=e[4],f=e[5],p=e[6],d=e[7],m=e[8],g=e[9],_=e[10],v=e[11],y=e[12],b=e[13],E=e[14],w=e[15],T=n[0],C=n[1],S=n[2],A=n[3],O=n[4],x=n[5],R=n[6],I=n[7],N=n[8],V=n[9],L=n[10],M=n[11],z=n[12],D=n[13],P=n[14],F=n[15],U=!1;return i=T*a+C*c+S*m+A*y,r=T*u+C*f+S*g+A*b,s=T*l+C*p+S*_+A*E,o=T*h+C*d+S*v+A*w,U=U?U:i===t[0]||r===t[1]||s===t[2]||o===t[3],t[0]=i,t[1]=r,t[2]=s,t[3]=o,T=O,C=x,S=R,A=I,i=T*a+C*c+S*m+A*y,r=T*u+C*f+S*g+A*b,s=T*l+C*p+S*_+A*E,o=T*h+C*d+S*v+A*w,U=U?U:i===t[4]||r===t[5]||s===t[6]||o===t[7],t[4]=i,t[5]=r,t[6]=s,t[7]=o,T=N,C=V,S=L,A=M,i=T*a+C*c+S*m+A*y,r=T*u+C*f+S*g+A*b,s=T*l+C*p+S*_+A*E,o=T*h+C*d+S*v+A*w,U=U?U:i===t[8]||r===t[9]||s===t[10]||o===t[11],t[8]=i,t[9]=r,t[10]=s,t[11]=o,T=z,C=D,S=P,A=F,i=T*a+C*c+S*m+A*y,r=T*u+C*f+S*g+A*b,s=T*l+C*p+S*_+A*E,o=T*h+C*d+S*v+A*w,U=U?U:i===t[12]||r===t[13]||s===t[14]||o===t[15],t[12]=i,t[13]=r,t[14]=s,t[15]=o,t}e.exports={multiply:r,invert:i}},{}],23:[function(t,e,n){"use strict";var i={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};e.exports=i},{}],24:[function(t,e,n){"use strict";function i(t){r.call(this,t),this.data=t.data}var r=t("./UIEvent");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return"CompositionEvent"},e.exports=i},{"./UIEvent":32}],25:[function(t,e,n){"use strict";function i(t){this.type=t.type,this.defaultPrevented=t.defaultPrevented,this.timeStamp=t.timeStamp;var e=t.target.constructor;(e===HTMLInputElement||e===HTMLTextAreaElement||e===HTMLSelectElement)&&(this.value=t.target.value)}i.prototype.toString=function(){return"Event"},e.exports=i},{}],26:[function(t,e,n){"use strict";var i=t("./CompositionEvent"),r=t("./Event"),s=t("./FocusEvent"),o=t("./InputEvent"),a=t("./KeyboardEvent"),u=t("./MouseEvent"),l=t("./TouchEvent"),h=t("./UIEvent"),c=t("./WheelEvent"),f={change:[r,!0],submit:[r,!0],abort:[r,!1],beforeinput:[o,!0],blur:[s,!1],click:[u,!0],compositionend:[i,!0],compositionstart:[i,!0],compositionupdate:[i,!0],dblclick:[u,!0],focus:[s,!1],focusin:[s,!0],focusout:[s,!0],input:[o,!0],keydown:[a,!0],keyup:[a,!0],load:[r,!1],mousedown:[u,!0],mouseenter:[u,!1],mouseleave:[u,!1],mousemove:[u,!1],mouseout:[u,!0],mouseover:[u,!0],mouseup:[u,!0],contextMenu:[u,!0],resize:[h,!1],scroll:[h,!1],select:[r,!0],unload:[r,!1],wheel:[c,!0],touchcancel:[l,!0],touchend:[l,!0],touchmove:[l,!0],touchstart:[l,!0]};e.exports=f},{"./CompositionEvent":24,"./Event":25,"./FocusEvent":27,"./InputEvent":28,"./KeyboardEvent":29,"./MouseEvent":30,"./TouchEvent":31,"./UIEvent":32,"./WheelEvent":33}],27:[function(t,e,n){"use strict";function i(t){r.call(this,t)}var r=t("./UIEvent");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return"FocusEvent"},e.exports=i},{"./UIEvent":32}],28:[function(t,e,n){"use strict";function i(t){r.call(this,t),this.inputType=t.inputType,this.data=t.data,this.isComposing=t.isComposing,this.targetRange=t.targetRange}var r=t("./UIEvent");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return"InputEvent"},e.exports=i},{"./UIEvent":32}],29:[function(t,e,n){"use strict";function i(t){r.call(this,t),this.DOM_KEY_LOCATION_STANDARD=0,this.DOM_KEY_LOCATION_LEFT=1,this.DOM_KEY_LOCATION_RIGHT=2,this.DOM_KEY_LOCATION_NUMPAD=3,this.key=t.key,this.code=t.code,this.location=t.location,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.repeat=t.repeat,this.isComposing=t.isComposing,this.keyCode=t.keyCode}var r=t("./UIEvent");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return"KeyboardEvent"},e.exports=i},{"./UIEvent":32}],30:[function(t,e,n){"use strict";function i(t){r.call(this,t),this.screenX=t.screenX,this.screenY=t.screenY,this.clientX=t.clientX,this.clientY=t.clientY,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.button=t.button,this.buttons=t.buttons,this.pageX=t.pageX,this.pageY=t.pageY,this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY}var r=t("./UIEvent");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return"MouseEvent"},e.exports=i},{"./UIEvent":32}],31:[function(t,e,n){"use strict";function i(t){this.identifier=t.identifier,this.screenX=t.screenX,this.screenY=t.screenY,this.clientX=t.clientX,this.clientY=t.clientY,this.pageX=t.pageX,this.pageY=t.pageY}function r(t){if(!t)return a;for(var e=[],n=0;n<t.length;n++)e[n]=new i(t[n]);return e}function s(t){o.call(this,t),this.touches=r(t.touches),this.targetTouches=r(t.targetTouches),this.changedTouches=r(t.changedTouches),this.altKey=t.altKey,this.metaKey=t.metaKey,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey}var o=t("./UIEvent"),a=[];s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.toString=function(){return"TouchEvent"},e.exports=s},{"./UIEvent":32}],32:[function(t,e,n){"use strict";function i(t){r.call(this,t),this.detail=t.detail}var r=t("./Event");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return"UIEvent"},e.exports=i},{"./Event":25}],33:[function(t,e,n){"use strict";function i(t){r.call(this,t),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2,this.deltaX=t.deltaX,this.deltaY=t.deltaY,this.deltaZ=t.deltaZ,this.deltaMode=t.deltaMode}var r=t("./MouseEvent");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return"WheelEvent"},e.exports=i},{"./MouseEvent":30}],34:[function(t,e,n){"use strict";var i,r,s=0,o=["ms","moz","webkit","o"];if("object"==typeof window){i=window.requestAnimationFrame,r=window.cancelAnimationFrame||window.cancelRequestAnimationFrame;for(var a=0;a<o.length&&!i;++a)i=window[o[a]+"RequestAnimationFrame"],r=window[o[a]+"CancelRequestAnimationFrame"]||window[o[a]+"CancelAnimationFrame"];i&&!r&&(i=null)}if(!i){var u=Date.now?Date.now:function(){return(new Date).getTime()};i=function(t){var e=u(),n=Math.max(0,16-(e-s)),i=setTimeout(function(){t(e+n)},n);return s=e+n,i},r=function(t){clearTimeout(t)}}var l={requestAnimationFrame:i,cancelAnimationFrame:r};e.exports=l},{}],35:[function(t,e,n){"use strict";e.exports={requestAnimationFrame:t("./animationFrame").requestAnimationFrame,cancelAnimationFrame:t("./animationFrame").cancelAnimationFrame}},{"./animationFrame":34}],36:[function(t,e,n){"use strict";function i(){var t=this;this._updates=[],this._looper=function(e){t.loop(e)},this._time=0,this._stoppedAt=0,this._sleep=0,this._startOnVisibilityChange=!0,this._rAF=null,this._sleepDiff=!0,this.start(),a&&document.addEventListener(l,function(){t._onVisibilityChange()})}var r=t("../polyfills"),s=r.requestAnimationFrame,o=r.cancelAnimationFrame,a="undefined"!=typeof document;if(a){var u,l;"undefined"!=typeof document.hidden?(u="hidden",l="visibilitychange"):"undefined"!=typeof document.mozHidden?(u="mozHidden",l="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(u="msHidden",l="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(u="webkitHidden",l="webkitvisibilitychange")}i.prototype._onVisibilityChange=function(){document[u]?this._onUnfocus():this._onFocus()},i.prototype._onFocus=function(){this._startOnVisibilityChange&&this._start()},i.prototype._onUnfocus=function(){this._stop()},i.prototype.start=function(){return this._running||(this._startOnVisibilityChange=!0,this._start()),this},i.prototype._start=function(){this._running=!0,this._sleepDiff=!0,this._rAF=s(this._looper)},i.prototype.stop=function(){return this._running&&(this._startOnVisibilityChange=!1,this._stop()),this},i.prototype._stop=function(){this._running=!1,this._stoppedAt=this._time,o(this._rAF)},i.prototype.isRunning=function(){return this._running},i.prototype.step=function(t){this._time=t,this._sleepDiff&&(this._sleep+=t-this._stoppedAt,this._sleepDiff=!1);for(var e=t-this._sleep,n=0,i=this._updates.length;i>n;n++)this._updates[n].update(e);return this},i.prototype.loop=function(t){return this.step(t),this._rAF=s(this._looper),this},i.prototype.update=function(t){return-1===this._updates.indexOf(t)&&this._updates.push(t),this},i.prototype.noLongerUpdate=function(t){var e=this._updates.indexOf(t);return e>-1&&this._updates.splice(e,1),this},e.exports=i},{"../polyfills":35}],37:[function(t,e,n){"use strict";function i(){s(),this._contexts={},this._outCommands=[],this._inCommands=[],this._time=null,this._resized=!1;var t=this;window.addEventListener("resize",function(){t.onResize()})}var r=t("./Context"),s=t("./inject-css"),o=t("../core/Commands");i.prototype.onResize=function(){this._resized=!0;for(var t in this._contexts)this._contexts[t].updateSize()},i.prototype.getTime=function(){return this._time},i.prototype.sendEvent=function(t,e,n){this._outCommands.push(o.WITH,t,o.TRIGGER,e,n)},i.prototype.sendResize=function(t,e){this.sendEvent(t,"CONTEXT_RESIZE",e)},i.prototype.handleWith=function(t,e){var n=e[t],i=n.split("/"),r=this.getOrSetContext(i.shift());return r.receive(n,e,t)},i.prototype.getOrSetContext=function(t){if(this._contexts[t])return this._contexts[t];var e=new r(t,this);return this._contexts[t]=e,e},i.prototype.getContext=function(t){return this._contexts[t]?this._contexts[t]:void 0},i.prototype.drawCommands=function(){for(var t=this._inCommands,e=0,n=t[e];n;){switch(n){case o.TIME:this._time=t[++e];break;case o.WITH:e=this.handleWith(++e,t);break;case o.NEED_SIZE_FOR:this.giveSizeFor(++e,t)}n=t[++e]}for(var i in this._contexts)this._contexts[i].draw();return this._resized&&this.updateSize(),this._outCommands},i.prototype.updateSize=function(){for(var t in this._contexts)this._contexts[t].updateSize()},i.prototype.receiveCommands=function(t){for(var e=t.length,n=0;e>n;n++)this._inCommands.push(t[n]);for(var i in this._contexts)this._contexts[i].checkInit()},i.prototype.giveSizeFor=function(t,e){var n=e[t],i=this.getContext(n);if(i){var r=i.getRootSize();this.sendResize(n,r)}else this.getOrSetContext(n)},i.prototype.clearCommands=function(){this._inCommands.length=0,this._outCommands.length=0,this._resized=!1},e.exports=i},{"../core/Commands":7,"./Context":38,"./inject-css":40}],38:[function(t,e,n){"use strict";function i(t,e){if(this._compositor=e,this._rootEl=document.querySelector(t),this._selector=t,null===this._rootEl)throw new Error('Failed to create Context: No matches for "'+t+'" found.');this._selector=t,this._initDOMRenderer(),this._webGLRenderer=null,this._domRenderer=new M(this._domRendererRootEl,t,e),this._canvasEl=null,this._renderState={projectionType:L.ORTHOGRAPHIC_PROJECTION,perspectiveTransform:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),viewTransform:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),viewDirty:!1,perspectiveDirty:!1},this._size=[],this._meshTransform=new Float32Array(16),this._meshSize=[0,0,0],this._initDOM=!1,this._commandCallbacks=[],this.initCommandCallbacks(),this.updateSize()}function r(t,e,n,i){return t._webGLRenderer&&t._webGLRenderer.getOrSetCutout(e),t._domRenderer.preventDefault(n[++i]),i}function s(t,e,n,i){return t._webGLRenderer&&t._webGLRenderer.getOrSetCutout(e),t._domRenderer.allowDefault(n[++i]),i}function o(t,e,n,i){return t._initDOM=!0,i}function a(t,e,n,i){return t._domRenderer.insertEl(n[++i]),i}function u(t,e,n,i){return t._domRenderer.getSizeOf(n[++i]),i}function l(t,e,n,i){var r=t._meshTransform;return r[0]=n[++i],r[1]=n[++i],r[2]=n[++i],r[3]=n[++i],r[4]=n[++i],r[5]=n[++i],r[6]=n[++i],r[7]=n[++i],r[8]=n[++i],r[9]=n[++i],r[10]=n[++i],r[11]=n[++i],r[12]=n[++i],r[13]=n[++i],r[14]=n[++i],r[15]=n[++i],t._domRenderer.setMatrix(r),t._webGLRenderer&&t._webGLRenderer.setCutoutUniform(e,"u_transform",r),i}function h(t,e,n,i){var r=n[++i],s=n[++i];return t._domRenderer.setSize(r,s),t._webGLRenderer&&(t._meshSize[0]=r,t._meshSize[1]=s,t._webGLRenderer.setCutoutUniform(e,"u_size",t._meshSize)),i}function c(t,e,n,i){return t._webGLRenderer&&t._webGLRenderer.getOrSetCutout(e),t._domRenderer.setProperty(n[++i],n[++i]),i}function f(t,e,n,i){return t._webGLRenderer&&t._webGLRenderer.getOrSetCutout(e),t._domRenderer.setContent(n[++i]),i}function p(t,e,n,i){return t._webGLRenderer&&t._webGLRenderer.getOrSetCutout(e),t._domRenderer.setAttribute(n[++i],n[++i]),i}function d(t,e,n,i){return t._webGLRenderer&&t._webGLRenderer.getOrSetCutout(e),t._domRenderer.addClass(n[++i]),i}function m(t,e,n,i){return t._webGLRenderer&&t._webGLRenderer.getOrSetCutout(e),t._domRenderer.removeClass(n[++i]),i}function g(t,e,n,i){return t._webGLRenderer&&t._webGLRenderer.getOrSetCutout(e),t._domRenderer.subscribe(n[++i]),i}function _(t,e,n,i){return t._webGLRenderer&&t._webGLRenderer.getOrSetCutout(e),t._domRenderer.unsubscribe(n[++i]),i}function v(t,e,n,i){return t._webGLRenderer||t._initWebGLRenderer(),t._webGLRenderer.setMeshOptions(e,n[++i]),i}function y(t,e,n,i){return t._webGLRenderer||t._initWebGLRenderer(),t._webGLRenderer.setAmbientLightColor(e,n[++i],n[++i],n[++i]),i}function b(t,e,n,i){return t._webGLRenderer||t._initWebGLRenderer(),t._webGLRenderer.setLightPosition(e,n[++i],n[++i],n[++i]),i}function E(t,e,n,i){return t._webGLRenderer||t._initWebGLRenderer(),t._webGLRenderer.setLightColor(e,n[++i],n[++i],n[++i]),i}function w(t,e,n,i){return t._webGLRenderer||t._initWebGLRenderer(),t._webGLRenderer.handleMaterialInput(e,n[++i],n[++i]),i}function T(t,e,n,i){return t._webGLRenderer||t._initWebGLRenderer(),t._webGLRenderer.setGeometry(e,n[++i],n[++i],n[++i]),i}function C(t,e,n,i){return t._webGLRenderer||t._initWebGLRenderer(),t._webGLRenderer.setMeshUniform(e,n[++i],n[++i]),i}function S(t,e,n,i){return t._webGLRenderer||t._initWebGLRenderer(),t._webGLRenderer.bufferData(n[++i],n[++i],n[++i],n[++i],n[++i]),i}function A(t,e,n,i){return t._webGLRenderer||t._initWebGLRenderer(),t._webGLRenderer.setCutoutState(e,n[++i]),i}function O(t,e,n,i){return t._webGLRenderer||t._initWebGLRenderer(),t._webGLRenderer.setMeshVisibility(e,n[++i]),i}function x(t,e,n,i){return t._webGLRenderer||t._initWebGLRenderer(),t._webGLRenderer.removeMesh(e),i}function R(t,e,n,i){return t._renderState.projectionType=L.PINHOLE_PROJECTION,t._renderState.perspectiveTransform[11]=-1/n[++i],t._renderState.perspectiveDirty=!0,i}function I(t,e,n,i){return t._renderState.projectionType=L.ORTHOGRAPHIC_PROJECTION,t._renderState.perspectiveTransform[11]=0,t._renderState.perspectiveDirty=!0,i}function N(t,e,n,i){return t._renderState.viewTransform[0]=n[++i],t._renderState.viewTransform[1]=n[++i],t._renderState.viewTransform[2]=n[++i],t._renderState.viewTransform[3]=n[++i],t._renderState.viewTransform[4]=n[++i],t._renderState.viewTransform[5]=n[++i],t._renderState.viewTransform[6]=n[++i],t._renderState.viewTransform[7]=n[++i],t._renderState.viewTransform[8]=n[++i],t._renderState.viewTransform[9]=n[++i],t._renderState.viewTransform[10]=n[++i],t._renderState.viewTransform[11]=n[++i],t._renderState.viewTransform[12]=n[++i],t._renderState.viewTransform[13]=n[++i],t._renderState.viewTransform[14]=n[++i],t._renderState.viewTransform[15]=n[++i],t._renderState.viewDirty=!0,i}var V=t("../webgl-renderers/WebGLRenderer"),L=t("../components/Camera"),M=t("../dom-renderers/DOMRenderer"),z=t("../core/Commands");i.prototype.updateSize=function(){var t=this._rootEl.offsetWidth,e=this._rootEl.offsetHeight;return this._size[0]=t,this._size[1]=e,this._size[2]=t>e?t:e,this._compositor.sendResize(this._selector,this._size),this._webGLRenderer&&this._webGLRenderer.updateSize(this._size),this},i.prototype.draw=function(){this._domRenderer.draw(this._renderState),this._webGLRenderer&&this._webGLRenderer.draw(this._renderState),this._renderState.perspectiveDirty&&(this._renderState.perspectiveDirty=!1),this._renderState.viewDirty&&(this._renderState.viewDirty=!1)},i.prototype._initDOMRenderer=function(){this._domRendererRootEl=document.createElement("div"),this._rootEl.appendChild(this._domRendererRootEl),this._domRendererRootEl.style.visibility="hidden",this._domRenderer=new M(this._domRendererRootEl,this._selector,this._compositor)},i.prototype.initCommandCallbacks=function(){this._commandCallbacks[z.INIT_DOM]=a,this._commandCallbacks[z.DOM_RENDER_SIZE]=u,this._commandCallbacks[z.CHANGE_TRANSFORM]=l,this._commandCallbacks[z.CHANGE_SIZE]=h,this._commandCallbacks[z.CHANGE_PROPERTY]=c,this._commandCallbacks[z.CHANGE_CONTENT]=f,this._commandCallbacks[z.CHANGE_ATTRIBUTE]=p,this._commandCallbacks[z.ADD_CLASS]=d,this._commandCallbacks[z.REMOVE_CLASS]=m,this._commandCallbacks[z.SUBSCRIBE]=g,this._commandCallbacks[z.UNSUBSCRIBE]=_,this._commandCallbacks[z.GL_SET_DRAW_OPTIONS]=v,this._commandCallbacks[z.GL_AMBIENT_LIGHT]=y,this._commandCallbacks[z.GL_LIGHT_POSITION]=b,this._commandCallbacks[z.GL_LIGHT_COLOR]=E,this._commandCallbacks[z.MATERIAL_INPUT]=w,this._commandCallbacks[z.GL_SET_GEOMETRY]=T,this._commandCallbacks[z.GL_UNIFORMS]=C,this._commandCallbacks[z.GL_BUFFER_DATA]=S,this._commandCallbacks[z.GL_CUTOUT_STATE]=A,this._commandCallbacks[z.GL_MESH_VISIBILITY]=O,this._commandCallbacks[z.GL_REMOVE_MESH]=x,this._commandCallbacks[z.PINHOLE_PROJECTION]=R,this._commandCallbacks[z.ORTHOGRAPHIC_PROJECTION]=I,this._commandCallbacks[z.CHANGE_VIEW_TRANSFORM]=N,this._commandCallbacks[z.PREVENT_DEFAULT]=r,this._commandCallbacks[z.ALLOW_DEFAULT]=s,this._commandCallbacks[z.READY]=o},i.prototype._initWebGLRenderer=function(){this._webGLRendererRootEl=document.createElement("canvas"),this._rootEl.appendChild(this._webGLRendererRootEl),this._webGLRenderer=new V(this._webGLRendererRootEl,this._compositor),this._webGLRenderer.updateSize(this._size)},i.prototype.getRootSize=function(){return[this._rootEl.offsetWidth,this._rootEl.offsetHeight]},i.prototype.checkInit=function(){this._initDOM&&(this._domRendererRootEl.style.visibility="visible",
this._initDOM=!1)},i.prototype.receive=function(t,e,n){var i=n,r=e[++i];for(this._domRenderer.loadPath(t);null!=r;){if(r===z.WITH||r===z.TIME)return i-1;i=this._commandCallbacks[r](this,t,e,i)+1,r=e[i]}return i},i.prototype.getDOMRenderer=function(){return this._domRenderer},i.prototype.getWebGLRenderer=function(){return this._webGLRenderer},e.exports=i},{"../components/Camera":4,"../core/Commands":7,"../dom-renderers/DOMRenderer":20,"../webgl-renderers/WebGLRenderer":54}],39:[function(t,e,n){"use strict";function i(t,e,n){this._thread=t,this._compositor=e,this._renderLoop=n,this._renderLoop.update(this);var i=this;this._thread.onmessage=function(t){var e=t.data?t.data:t;if(e[0]===r.ENGINE)switch(e[1]){case r.START:i._engine.start();break;case r.STOP:i._engine.stop();break;default:console.error('Unknown ENGINE command "'+e[1]+'"')}else i._compositor.receiveCommands(e)},this._thread.onerror=function(t){console.error(t)}}var r=t("../core/Commands");i.prototype.getThread=function(){return this._thread},i.prototype.getCompositor=function(){return this._compositor},i.prototype.getEngine=function(){return this._renderLoop},i.prototype.getRenderLoop=function(){return this._renderLoop},i.prototype.update=function(t){this._thread.postMessage([r.FRAME,t]);var e=this._compositor.drawCommands();this._thread.postMessage(e),this._compositor.clearCommands()},e.exports=i},{"../core/Commands":7}],40:[function(t,e,n){"use strict";function i(){if(!s)if(s=!0,document.createStyleSheet){var t=document.createStyleSheet();t.cssText=r}else{var e=document.getElementsByTagName("head")[0],n=document.createElement("style");n.styleSheet?n.styleSheet.cssText=r:n.appendChild(document.createTextNode(r)),(e?e:document.documentElement).appendChild(n)}}var r=".famous-dom-renderer {width:100%;height:100%;transform-style:preserve-3d;-webkit-transform-style:preserve-3d;}.famous-dom-element {-webkit-transform-origin:0% 0%;transform-origin:0% 0%;-webkit-backface-visibility:visible;backface-visibility:visible;-webkit-transform-style:preserve-3d;transform-style:preserve-3d;-webkit-tap-highlight-color:transparent;pointer-events:auto;z-index:1;}.famous-dom-element-content,.famous-dom-element {position:absolute;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;}.famous-webgl-renderer {-webkit-transform:translateZ(1000000px);transform:translateZ(1000000px);pointer-events:none;position:absolute;z-index:1;top:0;width:100%;height:100%;}",s="undefined"==typeof document;e.exports=i},{}],41:[function(t,e,n){"use strict";var i={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return.5>=t?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Math.sin(6*Math.PI*t)+t},inQuad:function(t){return t*t},outQuad:function(t){return-(t-=1)*t+1},inOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},inCubic:function(t){return t*t*t},outCubic:function(t){return--t*t*t+1},inOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},inQuart:function(t){return t*t*t*t},outQuart:function(t){return-(--t*t*t*t-1)},inOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},inQuint:function(t){return t*t*t*t*t},outQuint:function(t){return--t*t*t*t*t+1},inOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},inSine:function(t){return-1*Math.cos(t*(Math.PI/2))+1},outSine:function(t){return Math.sin(t*(Math.PI/2))},inOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},inExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},outExpo:function(t){return 1===t?1:-Math.pow(2,-10*t)+1},inOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},inCirc:function(t){return-(Math.sqrt(1-t*t)-1)},outCirc:function(t){return Math.sqrt(1- --t*t)},inOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},inElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1===t?1:(n||(n=.3),e=n/(2*Math.PI)*Math.asin(1/i),-(i*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/n)))},outElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1===t?1:(n||(n=.3),e=n/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/n)+1)},inOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:2===(t/=.5)?1:(n||(n=.3*1.5),e=n/(2*Math.PI)*Math.asin(1/i),1>t?-.5*i*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/n):i*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/n)*.5+1)},inBack:function(t,e){return void 0===e&&(e=1.70158),t*t*((e+1)*t-e)},outBack:function(t,e){return void 0===e&&(e=1.70158),--t*t*((e+1)*t+e)+1},inOutBack:function(t,e){return void 0===e&&(e=1.70158),(t/=.5)<1?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},inBounce:function(t){return 1-i.outBounce(1-t)},outBounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},inOutBounce:function(t){return.5>t?.5*i.inBounce(2*t):.5*i.outBounce(2*t-1)+.5},flat:function(){return 0}};e.exports=i},{}],42:[function(t,e,n){"use strict";function i(t){this._queue=[],this._from=null,this._state=null,this._startedAt=null,this._pausedAt=null,null!=t&&this.from(t)}var r=t("./Curves"),s=t("../core/FamousEngine");i.Clock=s.getClock(),i.prototype.to=function(t,e,n,i,s){return e=null!=e&&e.constructor===String?r[e]:e,0===this._queue.length&&(this._startedAt=this.constructor.Clock.now(),this._pausedAt=null),this._queue.push(t,null!=e?e:r.linear,null!=n?n:100,i,s),this},i.prototype.from=function(t){return this._state=t,this._from=this._sync(null,this._state),this._queue.length=0,this._startedAt=this.constructor.Clock.now(),this._pausedAt=null,this},i.prototype.delay=function(t,e){var n=this._queue.length>0?this._queue[this._queue.length-5]:this._state;return this.to(n,r.flat,t,e)},i.prototype.override=function(t,e,n,i,s){return this._queue.length>0&&(null!=t&&(this._queue[0]=t),null!=e&&(this._queue[1]=e.constructor===String?r[e]:e),null!=n&&(this._queue[2]=n),null!=i&&(this._queue[3]=i),null!=s&&(this._queue[4]=s)),this},i.prototype._interpolate=function(t,e,n,i,r){if(n instanceof Object)if("slerp"===r){var s,o,a,u,l,h,c,f,p,d,m,g,_;if(s=e[0],o=e[1],a=e[2],u=e[3],l=n[0],h=n[1],c=n[2],f=n[3],1===i)return t[0]=l,t[1]=h,t[2]=c,t[3]=f,t;d=u*f+s*l+o*h+a*c,1-d>1e-5?(p=Math.acos(d),m=Math.sin(p),g=Math.sin((1-i)*p)/m,_=Math.sin(i*p)/m):(g=1-i,_=i),t[0]=s*g+l*_,t[1]=o*g+h*_,t[2]=a*g+c*_,t[3]=u*g+f*_}else if(n instanceof Array)for(var v=0,y=n.length;y>v;v++)t[v]=this._interpolate(t[v],e[v],n[v],i,r);else for(var b in n)t[b]=this._interpolate(t[b],e[b],n[b],i,r);else t=e+i*(n-e);return t},i.prototype._sync=function o(t,e){if("number"==typeof e)t=e;else if(e instanceof Array){null==t&&(t=[]);for(var n=0,i=e.length;i>n;n++)t[n]=o(t[n],e[n])}else if(e instanceof Object){null==t&&(t={});for(var r in e)t[r]=o(t[r],e[r])}return t},i.prototype.get=function(t){if(0===this._queue.length)return this._state;t=this._pausedAt?this._pausedAt:t,t=t?t:this.constructor.Clock.now();var e=(t-this._startedAt)/this._queue[2];this._state=this._interpolate(this._state,this._from,this._queue[0],this._queue[1](e>1?1:e),this._queue[4]);var n=this._state;if(e>=1){this._startedAt=this._startedAt+this._queue[2],this._from=this._sync(this._from,this._state),this._queue.shift(),this._queue.shift(),this._queue.shift();var i=this._queue.shift();this._queue.shift(),i&&i()}return e>1?this.get():n},i.prototype.isActive=function(){return this._queue.length>0},i.prototype.halt=function(){return this.from(this.get())},i.prototype.pause=function(){return this._pausedAt=this.constructor.Clock.now(),this},i.prototype.isPaused=function(){return!!this._pausedAt},i.prototype.resume=function(){var t=this._pausedAt-this._startedAt;return this._startedAt=this.constructor.Clock.now()-t,this._pausedAt=null,this},i.prototype.reset=function(t){return this.from(t)},i.prototype.set=function(t,e,n){return null==e?(this.from(t),n&&n()):this.to(t,e.curve,e.duration,n,e.method),this},e.exports=i},{"../core/FamousEngine":10,"./Curves":41}],43:[function(t,e,n){"use strict";function i(){this._events={}}i.prototype.on=function(t,e){this._events[t]||(this._events[t]=[]);var n=this._events[t];return n.push(e),function(){n.splice(n.indexOf(e),1)}},i.prototype.off=function(t,e){var n=this._events[t];return n&&n.splice(n.indexOf(e),1),this},i.prototype.trigger=function(t,e){var n=this._events[t];if(n)for(var i=0,r=n.length;r>i;i++)n[i](e);return this},e.exports=i},{}],44:[function(t,e,n){"use strict";function i(){this._keyToValue={},this._values=[],this._keys=[],this._keyToIndex={},this._freedIndices=[]}i.prototype.register=function(t,e){var n=this._keyToIndex[t];null==n?(n=this._freedIndices.pop(),void 0===n&&(n=this._values.length),this._values[n]=e,this._keys[n]=t,this._keyToIndex[t]=n,this._keyToValue[t]=e):(this._keyToValue[t]=e,this._values[n]=e)},i.prototype.unregister=function(t){var e=this._keyToIndex[t];null!=e&&(this._freedIndices.push(e),this._keyToValue[t]=null,this._keyToIndex[t]=null,this._values[e]=null,this._keys[e]=null)},i.prototype.get=function(t){return this._keyToValue[t]},i.prototype.getValues=function(){return this._values},i.prototype.getKeys=function(){return this._keys},i.prototype.getKeyToValue=function(){return this._keyToValue},e.exports=i},{}],45:[function(t,e,n){"use strict";var i=function r(t){var e;if("object"==typeof t){e=t instanceof Array?[]:{};for(var n in t)if("object"==typeof t[n]&&null!==t[n])if(t[n]instanceof Array){e[n]=new Array(t[n].length);for(var i=0;i<t[n].length;i++)e[n][i]=r(t[n][i])}else e[n]=r(t[n]);else e[n]=t[n]}else e=t;return e};e.exports=i},{}],46:[function(t,e,n){"use strict";e.exports=function(t){var e=[],n=[],i=0;for(var r in t)t.hasOwnProperty(r)&&(e[i]=r,n[i]=t[r],i++);return{keys:e,values:n}}},{}],47:[function(t,e,n){"use strict";function i(t){for(var e=0;e<r.length;e++){var n=r[e]+t;if(""===document.documentElement.style[n])return n}return t}var r=["","-ms-","-webkit-","-moz-","-o-"];e.exports=i},{}],48:[function(t,e,n){"use strict";function i(t,e,n){this.buffer=null,this.target=t,this.type=e,this.data=[],this.gl=n}i.prototype.subData=function(){for(var t=this.gl,e=[],n=0,i=1e4;n<this.data.length;n+=i)e=Array.prototype.concat.apply(e,this.data.slice(n,n+i));this.buffer=this.buffer||t.createBuffer(),t.bindBuffer(this.target,this.buffer),t.bufferData(this.target,new this.type(e),t.STATIC_DRAW)},e.exports=i},{}],49:[function(t,e,n){"use strict";function i(t){this.gl=t,this.registry={},this._dynamicBuffers=[],this._staticBuffers=[],this._arrayBufferMax=3e4,this._elementBufferMax=3e4}var r="indices",s=t("./Buffer");i.prototype.allocate=function(t,e,n,i,o){var a,u,l,h,c=this.registry[t]||(this.registry[t]={keys:[],values:[],spacing:[],offset:[],length:[]}),f=c.keys.indexOf(e),p=e===r,d=!1,m=0;if(-1===f){if(f=c.keys.length,u=p?n.length:Math.floor(n.length/i),o)l=new s(p?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,p?Uint16Array:Float32Array,this.gl),this._dynamicBuffers.push({buffer:l,offset:n.length,isIndex:p});else{for(h=0;h<this._staticBuffers.length;h++)if(p===this._staticBuffers[h].isIndex&&(a=this._staticBuffers[h].offset+n.length,!p&&a<this._arrayBufferMax||p&&a<this._elementBufferMax)){l=this._staticBuffers[h].buffer,m=this._staticBuffers[h].offset,this._staticBuffers[h].offset+=n.length,d=!0;break}d||(l=new s(p?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,p?Uint16Array:Float32Array,this.gl),this._staticBuffers.push({buffer:l,offset:n.length,isIndex:p}))}c.keys.push(e),c.values.push(l),c.spacing.push(i),c.offset.push(m),c.length.push(u)}var g=n.length;for(h=0;g>h;h++)c.values[f].data[m+h]=n[h];c.values[f].subData()},e.exports=i},{"./Buffer":48}],50:[function(t,e,n){"use strict";function i(){return r(this.gl.compileShader,function(t){if(!this.getShaderParameter(t,this.COMPILE_STATUS)){var e=this.getShaderInfoLog(t),n=this.getShaderSource(t);s(e,n)}})}function r(t,e){return function(){var n=t.apply(this,arguments);return e.apply(this,arguments),n}}function s(t,e){var n="body,html{background:#e3e3e3;font-family:monaco,monospace;font-size:14px;line-height:1.7em}#shaderReport{left:0;top:0;right:0;box-sizing:border-box;position:absolute;z-index:1000;color:#222;padding:15px;white-space:normal;list-style-type:none;margin:50px auto;max-width:1200px}#shaderReport li{background-color:#fff;margin:13px 0;box-shadow:0 1px 2px rgba(0,0,0,.15);padding:20px 30px;border-radius:2px;border-left:20px solid #e01111}span{color:#e01111;text-decoration:underline;font-weight:700}#shaderReport li p{padding:0;margin:0}#shaderReport li:nth-child(even){background-color:#f4f4f4}#shaderReport li p:first-child{margin-bottom:10px;color:#666}",i=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(i),i.textContent=n;var r=document.createElement("ul");r.setAttribute("id","shaderReport"),document.body.appendChild(r);for(var s,o=/ERROR: [\d]+:([\d]+): (.+)/gim,a=e.split("\n");null!=(s=o.exec(t));){s.index===o.lastIndex&&o.lastIndex++;var u=document.createElement("li"),l='<p><span>ERROR</span> "'+s[2]+'" in line '+s[1]+"</p>";l+="<p><b>"+a[s[1]-1].replace(/^[ \t]+/g,"")+"</b></p>",u.innerHTML=l,r.appendChild(u)}}e.exports=i},{}],51:[function(t,e,n){"use strict";function i(t,e){this.gl=t,this.options=e||{},this.registeredMaterials={},this.cachedUniforms={},this.uniformTypes=[],this.definitionVec4=[],this.definitionVec3=[],this.definitionFloat=[],this.applicationVec3=[],this.applicationVec4=[],this.applicationFloat=[],this.applicationVert=[],this.definitionVert=[],this.options.debug&&(this.gl.compileShader=u.call(this)),this.resetProgram()}var r=t("../utilities/clone"),s=t("../utilities/keyValueToArrays"),o=t("../webgl-shaders").vertex,a=t("../webgl-shaders").fragment,u=t("./Debug"),l=35633,h=35632,c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],f="precision mediump float;\n",p={undefined:"float ",1:"float ",2:"vec2 ",3:"vec3 ",4:"vec4 ",16:"mat4 "},d={u_baseColor:"vec4",u_normals:"vert",u_glossiness:"vec4",u_positionOffset:"vert"},m={vert:1,vec3:2,vec4:4,"float":8},g=s({u_perspective:c,u_view:c,u_resolution:[0,0,0],u_transform:c,u_size:[1,1,1],u_time:0,u_opacity:1,u_metalness:0,u_glossiness:[0,0,0,0],u_baseColor:[1,1,1,1],u_normals:[1,1,1],u_positionOffset:[0,0,0],u_lightPosition:c,u_lightColor:c,u_ambientLight:[0,0,0],u_flatShading:0,u_numLights:0}),_=s({a_pos:[0,0,0],a_texCoord:[0,0],a_normals:[0,0,0]}),v=s({v_textureCoordinate:[0,0],v_normal:[0,0,0],v_position:[0,0,0],v_eyeVector:[0,0,0]});i.prototype.registerMaterial=function(t,e){var n=e,i=d[t],r=m[i];if((this.registeredMaterials[e._id]&r)===r)return this;var s;for(s in n.uniforms)-1===g.keys.indexOf(s)&&(g.keys.push(s),g.values.push(n.uniforms[s]));for(s in n.varyings)-1===v.keys.indexOf(s)&&(v.keys.push(s),v.values.push(n.varyings[s]));for(s in n.attributes)-1===_.keys.indexOf(s)&&(_.keys.push(s),_.values.push(n.attributes[s]));return this.registeredMaterials[e._id]|=r,"float"===i&&(this.definitionFloat.push(e.defines),this.definitionFloat.push("float fa_"+e._id+"() {\n "+n.glsl+" \n}"),this.applicationFloat.push("if (int(abs(ID)) == "+e._id+") return fa_"+e._id+"();")),"vec3"===i&&(this.definitionVec3.push(e.defines),this.definitionVec3.push("vec3 fa_"+e._id+"() {\n "+n.glsl+" \n}"),this.applicationVec3.push("if (int(abs(ID.x)) == "+e._id+") return fa_"+e._id+"();")),"vec4"===i&&(this.definitionVec4.push(e.defines),this.definitionVec4.push("vec4 fa_"+e._id+"() {\n "+n.glsl+" \n}"),this.applicationVec4.push("if (int(abs(ID.x)) == "+e._id+") return fa_"+e._id+"();")),"vert"===i&&(this.definitionVert.push(e.defines),this.definitionVert.push("vec3 fa_"+e._id+"() {\n "+n.glsl+" \n}"),this.applicationVert.push("if (int(abs(ID.x)) == "+e._id+") return fa_"+e._id+"();")),this.resetProgram()},i.prototype.resetProgram=function(){var t,e,n,i,s,u,c=[f],d=[f];for(this.uniformLocations=[],this.attributeLocations={},this.uniformTypes={},this.attributeNames=r(_.keys),this.attributeValues=r(_.values),this.varyingNames=r(v.keys),this.varyingValues=r(v.values),this.uniformNames=r(g.keys),this.uniformValues=r(g.values),this.cachedUniforms={},d.push("uniform sampler2D u_textures[7];\n"),this.applicationVert.length&&c.push("uniform sampler2D u_textures[7];\n"),u=0;u<this.uniformNames.length;u++)i=this.uniformNames[u],s=this.uniformValues[u],c.push("uniform "+p[s.length]+i+";\n"),d.push("uniform "+p[s.length]+i+";\n");for(u=0;u<this.attributeNames.length;u++)i=this.attributeNames[u],s=this.attributeValues[u],c.push("attribute "+p[s.length]+i+";\n");for(u=0;u<this.varyingNames.length;u++)i=this.varyingNames[u],s=this.varyingValues[u],c.push("varying "+p[s.length]+i+";\n"),d.push("varying "+p[s.length]+i+";\n");e=c.join("")+o.replace("#vert_definitions",this.definitionVert.join("\n")).replace("#vert_applications",this.applicationVert.join("\n")),t=d.join("")+a.replace("#vec3_definitions",this.definitionVec3.join("\n")).replace("#vec3_applications",this.applicationVec3.join("\n")).replace("#vec4_definitions",this.definitionVec4.join("\n")).replace("#vec4_applications",this.applicationVec4.join("\n")).replace("#float_definitions",this.definitionFloat.join("\n")).replace("#float_applications",this.applicationFloat.join("\n")),n=this.gl.createProgram(),this.gl.attachShader(n,this.compileShader(this.gl.createShader(l),e)),this.gl.attachShader(n,this.compileShader(this.gl.createShader(h),t)),this.gl.linkProgram(n),this.gl.getProgramParameter(n,this.gl.LINK_STATUS)?(this.program=n,this.gl.useProgram(this.program)):(console.error("link error: "+this.gl.getProgramInfoLog(n)),this.program=null),this.setUniforms(this.uniformNames,this.uniformValues);var m=this.gl.getUniformLocation(this.program,"u_textures[0]");return this.gl.uniform1iv(m,[0,1,2,3,4,5,6]),this},i.prototype.uniformIsCached=function(t,e){if(null==this.cachedUniforms[t])return this.cachedUniforms[t]=e.length?new Float32Array(e):e,!1;if(e.length){for(var n=e.length;n--;)if(e[n]!==this.cachedUniforms[t][n]){for(n=e.length;n--;)this.cachedUniforms[t][n]=e[n];return!1}}else if(this.cachedUniforms[t]!==e)return this.cachedUniforms[t]=e,!1;return!0},i.prototype.setUniforms=function(t,e){var n,i,r,s,o,a=this.gl;if(!this.program)return this;for(s=t.length,o=0;s>o;o++)if(r=t[o],i=e[o],n=this.uniformLocations[r],null!==n&&(void 0===n&&(n=a.getUniformLocation(this.program,r),this.uniformLocations[r]=n),!this.uniformIsCached(r,i)))switch(this.uniformTypes[r]||(this.uniformTypes[r]=this.getUniformTypeFromValue(i)),this.uniformTypes[r]){case"uniform4fv":a.uniform4fv(n,i);break;case"uniform3fv":a.uniform3fv(n,i);break;case"uniform2fv":a.uniform2fv(n,i);break;case"uniform1fv":a.uniform1fv(n,i);break;case"uniform1f":a.uniform1f(n,i);break;case"uniformMatrix3fv":a.uniformMatrix3fv(n,!1,i);break;case"uniformMatrix4fv":a.uniformMatrix4fv(n,!1,i)}return this},i.prototype.getUniformTypeFromValue=function(t){if(Array.isArray(t)||t instanceof Float32Array)switch(t.length){case 1:return"uniform1fv";case 2:return"uniform2fv";case 3:return"uniform3fv";case 4:return"uniform4fv";case 9:return"uniformMatrix3fv";case 16:return"uniformMatrix4fv"}else if(!isNaN(parseFloat(t))&&isFinite(t))return"uniform1f";throw'cant load uniform "'+name+'" with value:'+JSON.stringify(t)},i.prototype.compileShader=function(t,e){var n=1;return this.gl.shaderSource(t,e),this.gl.compileShader(t),this.gl.getShaderParameter(t,this.gl.COMPILE_STATUS)||(console.error("compile error: "+this.gl.getShaderInfoLog(t)),console.error("1: "+e.replace(/\n/g,function(){return"\n"+(n+=1)+": "}))),t},e.exports=i},{"../utilities/clone":45,"../utilities/keyValueToArrays":46,"../webgl-shaders":58,"./Debug":50}],52:[function(t,e,n){"use strict";function i(t,e){e=e||{},this.id=t.createTexture(),this.width=e.width||0,this.height=e.height||0,this.mipmap=e.mipmap,this.format=e.format||"RGBA",this.type=e.type||"UNSIGNED_BYTE",this.gl=t,this.bind(),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipYWebgl||!1),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlphaWebgl||!1),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t[e.magFilter]||t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t[e.minFilter]||t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t[e.wrapS]||t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t[e.wrapT]||t.CLAMP_TO_EDGE)}i.prototype.bind=function(){return this.gl.bindTexture(this.gl.TEXTURE_2D,this.id),this},i.prototype.unbind=function(){return this.gl.bindTexture(this.gl.TEXTURE_2D,null),this},i.prototype.setImage=function(t){return this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl[this.format],this.gl[this.format],this.gl[this.type],t),this.mipmap&&this.gl.generateMipmap(this.gl.TEXTURE_2D),this},i.prototype.setArray=function(t){return this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl[this.format],this.width,this.height,0,this.gl[this.format],this.gl[this.type],t),this},i.prototype.readBack=function(t,e,n,i){var r,s=this.gl;t=t||0,e=e||0,n=n||this.width,i=i||this.height;var o=s.createFramebuffer();return s.bindFramebuffer(s.FRAMEBUFFER,o),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,this.id,0),s.checkFramebufferStatus(s.FRAMEBUFFER)===s.FRAMEBUFFER_COMPLETE&&(r=new Uint8Array(n*i*4),s.readPixels(t,e,n,i,s.RGBA,s.UNSIGNED_BYTE,r)),r},e.exports=i},{}],53:[function(t,e,n){"use strict";function i(t){this.registry=[],this._needsResample=[],this._activeTexture=0,this._boundTexture=null,this._checkerboard=o(),this.gl=t}function r(t,e){var n=("string"==typeof t?new Image:t)||{};return n.crossOrigin="anonymous",n.src||(n.src=t),n.complete?e(n):n.onload=function(){e(n)},n}var s=t("./Texture"),o=t("./createCheckerboard");i.prototype.update=function(t){for(var e=this.registry.length,n=1;e>n;n++){var i=this.registry[n];i&&i.isLoaded&&i.resampleRate&&(!i.lastResample||t-i.lastResample>i.resampleRate)&&(this._needsResample[i.id]||(this._needsResample[i.id]=!0,i.lastResample=t))}},i.prototype.register=function(t,e){var n,i=this,o=t.data,a=t.id,u=t.options||{},l=this.registry[a];return l||(l=new s(this.gl,u),l.setImage(this._checkerboard),n=this.registry[a]={resampleRate:u.resampleRate||null,lastResample:null,isLoaded:!1,texture:l,source:o,id:a,slot:e},Array.isArray(o)||o instanceof Uint8Array||o instanceof Float32Array?(this.bindTexture(a),l.setArray(o),n.isLoaded=!0):o instanceof HTMLVideoElement?o.addEventListener("loadeddata",function(){i.bindTexture(a),l.setImage(o),n.isLoaded=!0,n.source=o}):"string"==typeof o&&r(o,function(t){i.bindTexture(a),l.setImage(t),n.isLoaded=!0,n.source=t})),a},i.prototype.bindTexture=function(t){var e=this.registry[t];this._activeTexture!==e.slot&&(this.gl.activeTexture(this.gl.TEXTURE0+e.slot),this._activeTexture=e.slot),this._boundTexture!==t&&(this._boundTexture=t,e.texture.bind()),this._needsResample[e.id]&&(e.texture.setImage(e.source),this._needsResample[e.id]=!1)},e.exports=i},{"./Texture":52,"./createCheckerboard":56}],54:[function(t,e,n){"use strict";function i(t,e){t.classList.add("famous-webgl-renderer"),this.canvas=t,this.compositor=e;var n=this.gl=this.getWebGLContext(this.canvas);n.clearColor(0,0,0,0),n.polygonOffset(.1,.1),n.enable(n.POLYGON_OFFSET_FILL),n.enable(n.DEPTH_TEST),n.enable(n.BLEND),n.depthFunc(n.LEQUAL),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),n.enable(n.CULL_FACE),n.cullFace(n.BACK),this.meshRegistry=new h,this.cutoutRegistry=new h,this.lightRegistry=new h,this.numLights=0,this.ambientLightColor=[0,0,0],this.lightPositions=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.lightColors=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.textureManager=new u(n),this.bufferRegistry=new s(n),this.program=new r(n,{debug:!0}),this.state={boundArrayBuffer:null,boundElementBuffer:null,lastDrawn:null,enabledAttributes:{},enabledAttributesKeys:[]},this.resolutionName=["u_resolution"],this.resolutionValues=[[0,0,0]],this.cachedSize=[],this.projectionTransform=[1,0,0,0,0,1,0,0,0,0,-1e-6,0,-1,1,0,1];var i=this.cutoutGeometry={spec:{id:-1,bufferValues:[[-1,-1,0,1,-1,0,-1,1,0,1,1,0]],bufferNames:["a_pos"],type:"TRIANGLE_STRIP"}};this.bufferRegistry.allocate(this.cutoutGeometry.spec.id,i.spec.bufferNames[0],i.spec.bufferValues[0],3)}var r=t("./Program"),s=t("./BufferRegistry"),o=t("./radixSort"),a=t("../utilities/keyValueToArrays"),u=t("./TextureManager"),l=t("./compileMaterial"),h=t("../utilities/Registry"),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],f=a({u_numLights:0,u_ambientLight:new Array(3),u_lightPosition:new Array(3),u_lightColor:new Array(3),u_perspective:new Array(16),u_time:0,u_view:new Array(16)});i.prototype.getWebGLContext=function(t){for(var e,n=["webgl","experimental-webgl","webkit-3d","moz-webgl"],i=0,r=n.length;r>i;i++){try{e=t.getContext(n[i])}catch(s){console.error("Error creating WebGL context: "+s.toString())}if(e)return e}return e?void 0:(console.error("Could not retrieve WebGL context. Please refer to https://www.khronos.org/webgl/ for requirements"),!1)},i.prototype.createLight=function(t){this.numLights++;var e={color:[0,0,0],position:[0,0,0]};return this.lightRegistry.register(t,e),e},i.prototype.createMesh=function(t){var e=a({u_opacity:1,u_transform:c,u_size:[0,0,0],u_baseColor:[.5,.5,.5,1],u_positionOffset:[0,0,0],u_normals:[0,0,0],u_flatShading:0,u_glossiness:[0,0,0,0]}),n={depth:null,uniformKeys:e.keys,uniformValues:e.values,buffers:{},geometry:null,drawType:null,textures:[],visible:!0};return this.meshRegistry.register(t,n),n},i.prototype.setCutoutState=function(t,e){var n=this.getOrSetCutout(t);n.visible=e},i.prototype.getOrSetCutout=function(t){var e=this.cutoutRegistry.get(t);if(!e){var n=a({u_opacity:0,u_transform:c.slice(),u_size:[0,0,0],u_origin:[0,0,0],u_baseColor:[0,0,0,1]});e={uniformKeys:n.keys,uniformValues:n.values,geometry:this.cutoutGeometry.spec.id,drawType:this.cutoutGeometry.spec.type,visible:!0},this.cutoutRegistry.register(t,e)}return e},i.prototype.setMeshVisibility=function(t,e){var n=this.meshRegistry.get(t)||this.createMesh(t);n.visible=e},i.prototype.removeMesh=function(t){this.meshRegistry.unregister(t)},i.prototype.setCutoutUniform=function(t,e,n){var i=this.getOrSetCutout(t),r=i.uniformKeys.indexOf(e);if(n.length)for(var s=0,o=n.length;o>s;s++)i.uniformValues[r][s]=n[s];else i.uniformValues[r]=n},i.prototype.setMeshOptions=function(t,e){var n=this.meshRegistry.get(t)||this.createMesh(t);return n.options=e,this},i.prototype.setAmbientLightColor=function(t,e,n,i){return this.ambientLightColor[0]=e,this.ambientLightColor[1]=n,this.ambientLightColor[2]=i,this},i.prototype.setLightPosition=function(t,e,n,i){var r=this.lightRegistry.get(t)||this.createLight(t);return r.position[0]=e,r.position[1]=n,r.position[2]=i,this},i.prototype.setLightColor=function(t,e,n,i){var r=this.lightRegistry.get(t)||this.createLight(t);return r.color[0]=e,r.color[1]=n,r.color[2]=i,this},i.prototype.handleMaterialInput=function(t,e,n){var i=this.meshRegistry.get(t)||this.createMesh(t);n=l(n,i.textures.length),i.uniformValues[i.uniformKeys.indexOf(e)][0]=-n._id;for(var r=n.textures.length;r--;)i.textures.push(this.textureManager.register(n.textures[r],i.textures.length+r));return this.program.registerMaterial(e,n),this.updateSize()},i.prototype.setGeometry=function(t,e,n,i){var r=this.meshRegistry.get(t)||this.createMesh(t);return r.geometry=e,r.drawType=n,r.dynamic=i,this},i.prototype.setMeshUniform=function(t,e,n){var i=this.meshRegistry.get(t)||this.createMesh(t),r=i.uniformKeys.indexOf(e);-1===r?(i.uniformKeys.push(e),i.uniformValues.push(n)):i.uniformValues[r]=n},i.prototype.bufferData=function(t,e,n,i,r){this.bufferRegistry.allocate(t,e,n,i,r)},i.prototype.draw=function(t){var e=this.compositor.getTime();this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.textureManager.update(e),this.meshRegistryKeys=o(this.meshRegistry.getKeys(),this.meshRegistry.getKeyToValue()),this.setGlobalUniforms(t),this.drawCutouts(),this.drawMeshes()},i.prototype.drawMeshes=function(){for(var t,e,n=this.gl,i=this.meshRegistry.getValues(),r=0;r<i.length;r++)if(e=i[r],e&&(t=this.bufferRegistry.registry[e.geometry],e.visible&&(e.uniformValues[0]<1?(n.depthMask(!1),n.enable(n.BLEND)):(n.depthMask(!0),n.disable(n.BLEND)),t))){for(var s=e.textures.length;s--;)this.textureManager.bindTexture(e.textures[s]);e.options&&this.handleOptions(e.options,e),this.program.setUniforms(e.uniformKeys,e.uniformValues),this.drawBuffers(t,e.drawType,e.geometry),e.options&&this.resetOptions(e.options)}},i.prototype.drawCutouts=function(){var t,e,n=this.cutoutRegistry.getValues(),i=n.length;this.gl.disable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.gl.depthMask(!0);for(var r=0;i>r;r++)t=n[r],t&&(e=this.bufferRegistry.registry[t.geometry],t.visible&&(this.program.setUniforms(t.uniformKeys,t.uniformValues),this.drawBuffers(e,t.drawType,t.geometry)));this.gl.enable(this.gl.CULL_FACE)},i.prototype.setGlobalUniforms=function(t){for(var e,n,i=this.lightRegistry.getValues(),r=i.length,s=0;r>s;s++)e=i[s],e&&(n=4*s,this.lightPositions[0+n]=e.position[0],this.lightPositions[1+n]=e.position[1],this.lightPositions[2+n]=e.position[2],this.lightColors[0+n]=e.color[0],this.lightColors[1+n]=e.color[1],this.lightColors[2+n]=e.color[2]);f.values[0]=this.numLights,f.values[1]=this.ambientLightColor,f.values[2]=this.lightPositions,f.values[3]=this.lightColors,this.projectionTransform[0]=1/(.5*this.cachedSize[0]),this.projectionTransform[5]=-1/(.5*this.cachedSize[1]),this.projectionTransform[11]=t.perspectiveTransform[11],f.values[4]=this.projectionTransform,f.values[5]=.001*this.compositor.getTime(),f.values[6]=t.viewTransform,this.program.setUniforms(f.keys,f.values)},i.prototype.drawBuffers=function(t,e,n){var i,r,s,o,a,u,l,h,c=this.gl,f=0;for(u=t.keys.length,h=0;u>h;h++)i=t.keys[h],"indices"!==i?(r=this.program.attributeLocations[i],-1!==r&&(void 0!==r||(r=c.getAttribLocation(this.program.program,i),this.program.attributeLocations[i]=r,-1!==r))&&(this.state.enabledAttributes[i]||(c.enableVertexAttribArray(r),this.state.enabledAttributes[i]=!0,this.state.enabledAttributesKeys.push(i)),a=t.values[h],s=t.spacing[h],o=t.offset[h],f=t.length[h],this.state.boundArrayBuffer!==a&&(c.bindBuffer(a.target,a.buffer),this.state.boundArrayBuffer=a),this.state.lastDrawn!==n&&c.vertexAttribPointer(r,s,c.FLOAT,c.FALSE,0,4*o))):l=h;var p=this.state.enabledAttributesKeys.length;for(h=0;p>h;h++){var d=this.state.enabledAttributesKeys[h];this.state.enabledAttributes[d]&&-1===t.keys.indexOf(d)&&(c.disableVertexAttribArray(this.program.attributeLocations[d]),this.state.enabledAttributes[d]=!1)}f&&(void 0!==l?(a=t.values[l],o=t.offset[l],s=t.spacing[l],f=t.length[l],this.state.boundElementBuffer!==a&&(c.bindBuffer(a.target,a.buffer),this.state.boundElementBuffer=a),c.drawElements(c[e],f,c.UNSIGNED_SHORT,2*o)):c.drawArrays(c[e],0,f)),this.state.lastDrawn=n},i.prototype.updateSize=function(t){if(t){var e=window.devicePixelRatio||1,n=~~(t[0]*e),i=~~(t[1]*e);this.canvas.width=n,this.canvas.height=i,this.gl.viewport(0,0,n,i),this.cachedSize[0]=t[0],this.cachedSize[1]=t[1],this.cachedSize[2]=t[0]>t[1]?t[0]:t[1],this.resolutionValues[0]=this.cachedSize}return this.program.setUniforms(this.resolutionName,this.resolutionValues),this},i.prototype.handleOptions=function(t,e){var n=this.gl;if(t)switch(t.blending&&n.enable(n.BLEND),t.side){case"double":this.gl.cullFace(this.gl.FRONT),this.drawBuffers(this.bufferRegistry.registry[e.geometry],e.drawType,e.geometry),this.gl.cullFace(this.gl.BACK);break;case"back":n.cullFace(n.FRONT)}},i.prototype.resetOptions=function(t){var e=this.gl;t&&(t.blending&&e.disable(e.BLEND),"back"===t.side&&e.cullFace(e.BACK))},e.exports=i},{"../utilities/Registry":44,"../utilities/keyValueToArrays":46,"./BufferRegistry":49,"./Program":51,"./TextureManager":53,"./compileMaterial":55,"./radixSort":57}],55:[function(t,e,n){"use strict";function i(t,e){var n="",i={},u={},h={},c=[],f=[];return t.traverse(function(t,p){if(t.chunk){var d=l[r(t)],m=o(t),g=s(t.chunk.glsl,t.inputs,f.length+e);n+=d+m+" = "+g+"\n ",t.uniforms&&a(i,t.uniforms),
t.varyings&&a(u,t.varyings),t.attributes&&a(h,t.attributes),t.chunk.defines&&c.push(t.chunk.defines),t.texture&&f.push(t.texture)}}),{_id:t._id,glsl:n+"return "+o(t)+";",defines:c.join("\n"),uniforms:i,varyings:u,attributes:h,textures:f}}function r(t){if("number"==typeof t)return 1;if(Array.isArray(t))return t.length;var e=t.chunk.output;if("number"==typeof e)return e;var n=t.inputs.map(function(t){return r(t)}).join(",");return e[n]}function s(t,e,n){return t.replace(/%\d/g,function(t){return o(e[t[1]-1])}).replace(/\$TEXTURE/,"u_textures["+n+"]")}function o(t){return Array.isArray(t)?u(t):"object"==typeof t?"fa_"+t._id:t.toFixed(6)}function a(t,e){for(var n in e)t[n]=e[n]}function u(t){var e=t.length;return"vec"+e+"("+t.join(",")+")"}var l={1:"float ",2:"vec2 ",3:"vec3 ",4:"vec4 "};e.exports=i},{}],56:[function(t,e,n){"use strict";function i(){var t=document.createElement("canvas").getContext("2d");t.canvas.width=t.canvas.height=128;for(var e=0;e<t.canvas.height;e+=16)for(var n=0;n<t.canvas.width;n+=16)t.fillStyle=16&(n^e)?"#FFF":"#DDD",t.fillRect(n,e,16,16);return t.canvas}e.exports=i},{}],57:[function(t,e,n){"use strict";function i(t,e,n){var i=t[n],r=e[i];return(r.depth?r.depth:e[i].uniformValues[1][14])+_}function r(t,e,n,i){var r=t[n];return e[r].depth=a(i)-_,r}function s(t,e,n){e[t[n]].depth=null}function o(t){return y[0]=t,b[0]}function a(t){return b[0]=t,y[0]}function u(t,e){var n,a,u,p,_,v,y,b,E,w,T,C=0,S=[];for(m=32/l+.999999999999999|0,n=0,p=h*m;p>n;n++)f[n]=0;for(n=0,p=t.length;p>n;n++){for(_=o(i(t,e,n)),_^=_>>31|2147483648,a=0,u=0;g>a;a+=h,u+=l)f[a+(_>>>u&c)]++;f[a+(_>>>u&d)]++}for(a=0;g>=a;a+=h)for(b=a,E=0;a+h>b;b++)w=f[b]+E,f[b]=E-1,E=w;if(--m){for(n=0,p=t.length;p>n;n++)_=o(i(t,e,n)),S[++f[_&c]]=r(t,e,n,_^=_>>31|2147483648);for(y=S,S=t,t=y;++C<m;){for(n=0,p=t.length,v=C*h,T=C*l;p>n;n++)_=o(i(t,e,n)),S[++f[v+(_>>>T&c)]]=t[n];y=S,S=t,t=y}}for(n=0,p=t.length,v=C*h,T=C*l;p>n;n++)_=o(i(t,e,n)),S[++f[v+(_>>>T&d)]]=r(t,e,n,_^(~_>>31|2147483648)),s(t,e,n);return S}var l=11,h=1<<l,c=h-1,f=new Array(h*Math.ceil(64/l)),p=1<<31%l,d=(p<<1)-1,m=32/l+.999999999999999|0,g=h*(m-1),_=Math.pow(20,6),v=new ArrayBuffer(4),y=new Float32Array(v,0,1),b=new Int32Array(v,0,1);e.exports=u},{}],58:[function(t,e,n){"use strict";var i={vertex:'#define GLSLIFY 1\n/**\n * The MIT License (MIT)\n * \n * Copyright (c) 2015 Famous Industries Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the "Software"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * The MIT License (MIT)\n * \n * Copyright (c) 2015 Famous Industries Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the "Software"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * Calculates transpose inverse matrix from transform\n * \n * @method random\n * @private\n *\n *\n */\n\n\nmat3 getNormalMatrix_1_0(in mat4 t) {\n   mat3 matNorm;\n   mat4 a = t;\n\n   float a00 = a[0][0], a01 = a[0][1], a02 = a[0][2], a03 = a[0][3],\n   a10 = a[1][0], a11 = a[1][1], a12 = a[1][2], a13 = a[1][3],\n   a20 = a[2][0], a21 = a[2][1], a22 = a[2][2], a23 = a[2][3],\n   a30 = a[3][0], a31 = a[3][1], a32 = a[3][2], a33 = a[3][3],\n   b00 = a00 * a11 - a01 * a10,\n   b01 = a00 * a12 - a02 * a10,\n   b02 = a00 * a13 - a03 * a10,\n   b03 = a01 * a12 - a02 * a11,\n   b04 = a01 * a13 - a03 * a11,\n   b05 = a02 * a13 - a03 * a12,\n   b06 = a20 * a31 - a21 * a30,\n   b07 = a20 * a32 - a22 * a30,\n   b08 = a20 * a33 - a23 * a30,\n   b09 = a21 * a32 - a22 * a31,\n   b10 = a21 * a33 - a23 * a31,\n   b11 = a22 * a33 - a23 * a32,\n\n   det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n   det = 1.0 / det;\n\n   matNorm[0][0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n   matNorm[0][1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n   matNorm[0][2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n\n   matNorm[1][0] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n   matNorm[1][1] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n   matNorm[1][2] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n\n   matNorm[2][0] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n   matNorm[2][1] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n   matNorm[2][2] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n\n   return matNorm;\n}\n\n\n\n/**\n * The MIT License (MIT)\n * \n * Copyright (c) 2015 Famous Industries Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the "Software"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * Calculates a matrix that creates the identity when multiplied by m\n * \n * @method inverse\n * @private\n *\n *\n */\n\n\nfloat inverse_2_1(float m) {\n    return 1.0 / m;\n}\n\nmat2 inverse_2_1(mat2 m) {\n    return mat2(m[1][1],-m[0][1],\n               -m[1][0], m[0][0]) / (m[0][0]*m[1][1] - m[0][1]*m[1][0]);\n}\n\nmat3 inverse_2_1(mat3 m) {\n    float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2];\n    float a10 = m[1][0], a11 = m[1][1], a12 = m[1][2];\n    float a20 = m[2][0], a21 = m[2][1], a22 = m[2][2];\n\n    float b01 =  a22 * a11 - a12 * a21;\n    float b11 = -a22 * a10 + a12 * a20;\n    float b21 =  a21 * a10 - a11 * a20;\n\n    float det = a00 * b01 + a01 * b11 + a02 * b21;\n\n    return mat3(b01, (-a22 * a01 + a02 * a21), (a12 * a01 - a02 * a11),\n                b11, (a22 * a00 - a02 * a20), (-a12 * a00 + a02 * a10),\n                b21, (-a21 * a00 + a01 * a20), (a11 * a00 - a01 * a10)) / det;\n}\n\nmat4 inverse_2_1(mat4 m) {\n    float\n        a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n        a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n        a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n        a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\n\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32,\n\n        det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n    return mat4(\n        a11 * b11 - a12 * b10 + a13 * b09,\n        a02 * b10 - a01 * b11 - a03 * b09,\n        a31 * b05 - a32 * b04 + a33 * b03,\n        a22 * b04 - a21 * b05 - a23 * b03,\n        a12 * b08 - a10 * b11 - a13 * b07,\n        a00 * b11 - a02 * b08 + a03 * b07,\n        a32 * b02 - a30 * b05 - a33 * b01,\n        a20 * b05 - a22 * b02 + a23 * b01,\n        a10 * b10 - a11 * b08 + a13 * b06,\n        a01 * b08 - a00 * b10 - a03 * b06,\n        a30 * b04 - a31 * b02 + a33 * b00,\n        a21 * b02 - a20 * b04 - a23 * b00,\n        a11 * b07 - a10 * b09 - a12 * b06,\n        a00 * b09 - a01 * b07 + a02 * b06,\n        a31 * b01 - a30 * b03 - a32 * b00,\n        a20 * b03 - a21 * b01 + a22 * b00) / det;\n}\n\n\n\n/**\n * The MIT License (MIT)\n * \n * Copyright (c) 2015 Famous Industries Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the "Software"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * Reflects a matrix over its main diagonal.\n * \n * @method transpose\n * @private\n *\n *\n */\n\n\nfloat transpose_3_2(float m) {\n    return m;\n}\n\nmat2 transpose_3_2(mat2 m) {\n    return mat2(m[0][0], m[1][0],\n                m[0][1], m[1][1]);\n}\n\nmat3 transpose_3_2(mat3 m) {\n    return mat3(m[0][0], m[1][0], m[2][0],\n                m[0][1], m[1][1], m[2][1],\n                m[0][2], m[1][2], m[2][2]);\n}\n\nmat4 transpose_3_2(mat4 m) {\n    return mat4(m[0][0], m[1][0], m[2][0], m[3][0],\n                m[0][1], m[1][1], m[2][1], m[3][1],\n                m[0][2], m[1][2], m[2][2], m[3][2],\n                m[0][3], m[1][3], m[2][3], m[3][3]);\n}\n\n\n\n\n/**\n * Converts vertex from modelspace to screenspace using transform\n * information from context.\n *\n * @method applyTransform\n * @private\n *\n *\n */\n\nvec4 applyTransform(vec4 pos) {\n    //TODO: move this multiplication to application code. \n\n    /**\n     * Currently multiplied in the vertex shader to avoid consuming the complexity of holding an additional\n     * transform as state on the mesh object in WebGLRenderer. Multiplies the object\'s transformation from object space\n     * to world space with its transformation from world space to eye space.\n     */\n    mat4 MVMatrix = u_view * u_transform;\n\n    //TODO: move the origin, sizeScale and y axis inversion to application code in order to amortize redundant per-vertex calculations.\n\n    /**\n     * The transform uniform should be changed to the result of the transformation chain:\n     *\n     * view * modelTransform * invertYAxis * sizeScale * origin\n     *\n     * which could be simplified to:\n     *\n     * view * modelTransform * convertToDOMSpace\n     *\n     * where convertToDOMSpace represents the transform matrix:\n     *\n     *                           size.x 0       0       size.x \n     *                           0      -size.y 0       size.y\n     *                           0      0       1       0\n     *                           0      0       0       1\n     *\n     */\n\n    /**\n     * Assuming a unit volume, moves the object space origin [0, 0, 0] to the "top left" [1, -1, 0], the DOM space origin.\n     * Later in the transformation chain, the projection transform negates the rigidbody translation.\n     * Equivalent to (but much faster than) multiplying a translation matrix "origin"\n     *\n     *                           1 0 0 1 \n     *                           0 1 0 -1\n     *                           0 0 1 0\n     *                           0 0 0 1\n     *\n     * in the transform chain: projection * view * modelTransform * invertYAxis * sizeScale * origin * positionVector.\n     */\n    pos.x += 1.0;\n    pos.y -= 1.0;\n\n    /**\n     * Assuming a unit volume, scales an object to the amount of pixels in the size uniform vector\'s specified dimensions.\n     * Later in the transformation chain, the projection transform transforms the point into clip space by scaling\n     * by the inverse of the canvas\' resolution.\n     * Equivalent to (but much faster than) multiplying a scale matrix "sizeScale"\n     *\n     *                           size.x 0      0      0 \n     *                           0      size.y 0      0\n     *                           0      0      size.z 0\n     *                           0      0      0      1\n     *\n     * in the transform chain: projection * view * modelTransform * invertYAxis * sizeScale * origin * positionVector.\n     */\n    pos.xyz *= u_size * 0.5;\n\n    /**\n     * Inverts the object space\'s y axis in order to match DOM space conventions. \n     * Later in the transformation chain, the projection transform reinverts the y axis to convert to clip space.\n     * Equivalent to (but much faster than) multiplying a scale matrix "invertYAxis"\n     *\n     *                           1 0 0 0 \n     *                           0 -1 0 0\n     *                           0 0 1 0\n     *                           0 0 0 1\n     *\n     * in the transform chain: projection * view * modelTransform * invertYAxis * sizeScale * origin * positionVector.\n     */\n    pos.y *= -1.0;\n\n    /**\n     * Exporting the vertex\'s position as a varying, in DOM space, to be used for lighting calculations. This has to be in DOM space\n     * since light position and direction is derived from the scene graph, calculated in DOM space.\n     */\n\n    v_position = (MVMatrix * pos).xyz;\n\n    /**\n    * Exporting the eye vector (a vector from the center of the screen) as a varying, to be used for lighting calculations.\n    * In clip space deriving the eye vector is a matter of simply taking the inverse of the position, as the position is a vector\n    * from the center of the screen. However, since our points are represented in DOM space,\n    * the position is a vector from the top left corner of the screen, so some additional math is needed (specifically, subtracting\n    * the position from the center of the screen, i.e. half the resolution of the canvas).\n    */\n\n    v_eyeVector = (u_resolution * 0.5) - v_position;\n\n    /**\n     * Transforming the position (currently represented in dom space) into view space (with our dom space view transform)\n     * and then projecting the point into raster both by applying a perspective transformation and converting to clip space\n     * (the perspective matrix is a combination of both transformations, therefore it\'s probably more apt to refer to it as a\n     * projection transform).\n     */\n\n    pos = u_perspective * MVMatrix * pos;\n\n    return pos;\n}\n\n/**\n * Placeholder for positionOffset chunks to be templated in.\n * Used for mesh deformation.\n *\n * @method calculateOffset\n * @private\n *\n *\n */\n#vert_definitions\nvec3 calculateOffset(vec3 ID) {\n    #vert_applications\n    return vec3(0.0);\n}\n\n/**\n * Writes the position of the vertex onto the screen.\n * Passes texture coordinate and normal attributes as varyings\n * and passes the position attribute through position pipeline.\n *\n * @method main\n * @private\n *\n *\n */\nvoid main() {\n    v_textureCoordinate = a_texCoord;\n    vec3 invertedNormals = a_normals + (u_normals.x < 0.0 ? calculateOffset(u_normals) * 2.0 - 1.0 : vec3(0.0));\n    invertedNormals.y *= -1.0;\n    v_normal = transpose_3_2(mat3(inverse_2_1(u_transform))) * invertedNormals;\n    vec3 offsetPos = a_pos + calculateOffset(u_positionOffset);\n    gl_Position = applyTransform(vec4(offsetPos, 1.0));\n}\n',fragment:'#define GLSLIFY 1\n/**\n * The MIT License (MIT)\n * \n * Copyright (c) 2015 Famous Industries Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the "Software"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * The MIT License (MIT)\n * \n * Copyright (c) 2015 Famous Industries Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the "Software"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * Placeholder for fragmentShader  chunks to be templated in.\n * Used for normal mapping, gloss mapping and colors.\n * \n * @method applyMaterial\n * @private\n *\n *\n */\n\n#float_definitions\nfloat applyMaterial_1_0(float ID) {\n    #float_applications\n    return 1.;\n}\n\n#vec3_definitions\nvec3 applyMaterial_1_0(vec3 ID) {\n    #vec3_applications\n    return vec3(0);\n}\n\n#vec4_definitions\nvec4 applyMaterial_1_0(vec4 ID) {\n    #vec4_applications\n\n    return vec4(0);\n}\n\n\n\n/**\n * The MIT License (MIT)\n * \n * Copyright (c) 2015 Famous Industries Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the "Software"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * Calculates the intensity of light on a surface.\n *\n * @method applyLight\n * @private\n *\n */\nvec4 applyLight_2_1(in vec4 baseColor, in vec3 normal, in vec4 glossiness, int numLights, vec3 ambientColor, vec3 eyeVector, mat4 lightPosition, mat4 lightColor, vec3 v_position) {\n    vec3 diffuse = vec3(0.0);\n    bool hasGlossiness = glossiness.a > 0.0;\n    bool hasSpecularColor = length(glossiness.rgb) > 0.0;\n\n    for(int i = 0; i < 4; i++) {\n        if (i >= numLights) break;\n        vec3 lightDirection = normalize(lightPosition[i].xyz - v_position);\n        float lambertian = max(dot(lightDirection, normal), 0.0);\n\n        if (lambertian > 0.0) {\n            diffuse += lightColor[i].rgb * baseColor.rgb * lambertian;\n            if (hasGlossiness) {\n                vec3 halfVector = normalize(lightDirection + eyeVector);\n                float specularWeight = pow(max(dot(halfVector, normal), 0.0), glossiness.a);\n                vec3 specularColor = hasSpecularColor ? glossiness.rgb : lightColor[i].rgb;\n                diffuse += specularColor * specularWeight * lambertian;\n            }\n        }\n\n    }\n\n    return vec4(ambientColor + diffuse, baseColor.a);\n}\n\n\n\n\n\n/**\n * Writes the color of the pixel onto the screen\n *\n * @method main\n * @private\n *\n *\n */\nvoid main() {\n    vec4 material = u_baseColor.r >= 0.0 ? u_baseColor : applyMaterial_1_0(u_baseColor);\n\n    /**\n     * Apply lights only if flat shading is false\n     * and at least one light is added to the scene\n     */\n    bool lightsEnabled = (u_flatShading == 0.0) && (u_numLights > 0.0 || length(u_ambientLight) > 0.0);\n\n    vec3 normal = normalize(v_normal);\n    vec4 glossiness = u_glossiness.x < 0.0 ? applyMaterial_1_0(u_glossiness) : u_glossiness;\n\n    vec4 color = lightsEnabled ?\n    applyLight_2_1(material, normalize(v_normal), glossiness,\n               int(u_numLights),\n               u_ambientLight * u_baseColor.rgb,\n               normalize(v_eyeVector),\n               u_lightPosition,\n               u_lightColor,   \n               v_position)\n    : material;\n\n    gl_FragColor = color;\n    gl_FragColor.a *= u_opacity;   \n}\n'};e.exports=i},{}],59:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}var r=t("famous/dom-renderables/DOMElement"),s=i(r),o=t("famous/core/FamousEngine"),a=i(o),u=t("famous/components/Camera"),l=i(u),h=t("./js/animation/SpinnerAnimation"),c=t("./js/LogoNode"),f=t("famous-autolayout/src/AutoLayoutController"),p=i(f);a["default"].init();var d=a["default"].getClock(),m=a["default"].createScene(),g=new l["default"](m);g.setDepth(1e3);var _=m.addChild();_.setAlign(0,0,0).setOrigin(.5,.5,.5).setPosition(0,0,0);var v=new c.LogoNode(_);console.log("logonode",v);var y=new h.SpinnerAnimation(_);y.start();var b="\nH:|-[row:[red(green)]-[green]]-|\nH:|-[row2:[blue(yellow)]-[yellow]]-|\nV:|-[row(50%)]-[row2(50%)]-|\n",E=new p["default"]({visualFormat:b}),w=E.addChild(void 0,"red");w.setOrigin(.5,.5,0),new s["default"](w).setProperty("border-radius","8px").setProperty("background","red");var T=E.addChild(void 0,"yellow");T.setOrigin(.5,.5,0),new s["default"](T).setProperty("border-radius","8px").setProperty("background","yellow");var C=E.addChild(void 0,"green");C.setOrigin(.5,.5,0),new s["default"](C).setProperty("border-radius","8px").setProperty("background","green");var S=E.addChild(void 0,"blue");S.setOrigin(.5,.5,0),new s["default"](S).setProperty("border-radius","8px").setProperty("background","blue");var A=m.addChild(E);A.setSizeMode("relative","relative","absolute").setAbsoluteSize(1,1,1).setProportionalSize(.8,.75,0).setOrigin(.5,.5,.5).setMountPoint(.5,.5,0).setAlign(.5,.5,0),w.autoAnimation=new h.SpinnerAnimation(w,-.8),d.setTimeout(function(){w.autoAnimation.start()},1100),T.autoAnimation=new h.SpinnerAnimation(T,-.8),d.setTimeout(function(){T.autoAnimation.start()},1300),S.autoAnimation=new h.SpinnerAnimation(S),d.setTimeout(function(){S.autoAnimation.start()},1600),C.autoAnimation=new h.SpinnerAnimation(C),d.setTimeout(function(){C.autoAnimation.start()},1800)},{"./js/LogoNode":60,"./js/animation/SpinnerAnimation":61,"famous-autolayout/src/AutoLayoutController":3,"famous/components/Camera":4,"famous/core/FamousEngine":10,"famous/dom-renderables/DOMElement":19}],60:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(t,e,n){for(var i=!0;i;){var r=t,s=e,o=n;a=l=u=void 0,i=!1,null===r&&(r=Function.prototype);var a=Object.getOwnPropertyDescriptor(r,s);if(void 0!==a){if("value"in a)return a.value;var u=a.get;return void 0===u?void 0:u.call(o)}var l=Object.getPrototypeOf(r);if(null===l)return void 0;t=l,e=s,n=o,i=!0}},a=t("famous/core/Node"),u=i(a),l=t("famous/dom-renderables/DOMElement"),h=i(l),c=function(t){function e(t){r(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.rootNode=t.addChild(this),new h["default"](this.rootNode,{tagName:"img"}).setAttribute("src","./images/famous_logo.png"),this.rootNode.setSizeMode("absolute","absolute","absolute").setAbsoluteSize(200,200).setAlign(.5,.5,0).setMountPoint(.5,.5,0).setOrigin(.5,.5,0)}return s(e,t),e}(u["default"]);n.LogoNode=c},{"famous/core/Node":11,"famous/dom-renderables/DOMElement":19}],61:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("famous/transitions/Transitionable"),a=i(o),u=function(){function t(e,n){var i=this;r(this,t),this.node=e,this.speed=n||1,this.id=e.addComponent(this),this.transitionY=new a["default"];var s=1e4*this.speed,o=2*Math.PI/s;return this.rotateY=function(){i.transitionY.from(o).set(2*Math.PI,{duration:s},i.rotateY)},this.id}return s(t,[{key:"onUpdate",value:function(t){this.node.setRotation(0,this.transitionY.get(),0),this.node.requestUpdateOnNextTick(this.id)}},{key:"start",value:function(){this.node.requestUpdate(this.id),this.rotateY()}}]),t}();n.SpinnerAnimation=u},{"famous/transitions/Transitionable":42}]},{},[59]);